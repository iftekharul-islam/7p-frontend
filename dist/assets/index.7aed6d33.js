import{k as F,r as k,a as H,j as s,f as n,Q as q,S as z,V as Q,X as u,Y as c,a0 as O,G as A,L as M,bo as G,eS as J,eT as V,eU as X}from"./index.a2df5817.js";/* empty css                  */import{a as K}from"./App.837def71.js";import{h as Z}from"./moment.4d75c86c.js";const aa=()=>{var y;const g=K(),I=F(),[N,w]=k.exports.useState(!1),{WAPData:b,searchParams:_}=H(a=>a.WAP),{bin:l,order:r,item_options:P,thumbs:f}=b;k.exports.useEffect(()=>{b!=null&&b.order||I("/wap")},[b]);const Y=async(a,d,o)=>{a.preventDefault(),w(!0);const h=await g(J({[o]:d}));h!=null&&h.payload&&I("/wap/bin"),w(!1)},j=a=>{g(V(a))},R=async(a,d,o)=>{var h;await g(rejectWapItem({item_id:a,bin_id:d,origin:o,s:(h=document.getElementById("s"))==null?void 0:h.checked}))},$=(a,d,o)=>{a.preventDefault(),g(X({item_id:d,bin_id:o}))};return s(k.exports.Fragment,{children:n(q,{children:[s(z,{children:s("h4",{className:"card-title",children:"WAP"})}),n(Q,{children:[n(u,{className:"mb-1",children:[s(c,{md:"7"}),s(c,{md:"2",children:s(O,{type:"text",name:"order_id",placeholder:"Scan Label",value:_==null?void 0:_.order_id,onChange:a=>{var d;return j({order_id:(d=a==null?void 0:a.target)==null?void 0:d.value})}})}),s(c,{md:"2",children:s(A,{color:"primary",onClick:a=>Y(a,_==null?void 0:_.order_id,"order_id"),disabled:N,children:N?"Please Wait...":"Open Bin"})})]}),s(u,{}),r?n("div",{children:[n(u,{children:[n(c,{md:"3",className:"p-1",children:["BIN ",n("b",{children:["#",l==null?void 0:l.name]})]}),n(c,{md:"7",className:"p-1",children:["Order"," ",n("b",{children:["#",s(M,{to:`/customer-order-edit/${r==null?void 0:r.id}`,children:r==null?void 0:r.short_order})]})]}),s(c,{md:"2",className:"p-1",children:n("small",{children:["Order Date: ",Z(r==null?void 0:r.order_date).format("YYYY-MM-DD")]})})]}),r!=null&&r.items?(y=r==null?void 0:r.items)==null?void 0:y.map((a,d)=>{var o,h,B,x,v,C,D,S,W,E,T;return n(u,{className:"border rounded mt-1",children:[s(c,{md:"8",className:"p-1",children:s("a",{href:a==null?void 0:a.item_url,target:"_blank",children:a==null?void 0:a.item_description})}),s(c,{md:"2",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&s(M,{onClick:p=>$(p,a==null?void 0:a.id,l==null?void 0:l.id),className:"btn btn-primary btn-sm",children:"Reprint WAP Label"})}),s(c,{md:"2",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&(a==null?void 0:a.batch)?n("span",{className:"d-flex",children:[s(A,{color:"danger",size:"sm",onClick:()=>R(a==null?void 0:a.id,l==null?void 0:l.id,"WP"),children:"Reject from WAP"}),s(O,{type:"checkbox",id:"s",name:"s",value:a==null?void 0:a.id})]}):(a==null?void 0:a.item_status)=="rejected"?n("strong",{children:["REJECTED ",(o=a==null?void 0:a.rejections)==null?void 0:o.lenght," TIMES"]}):s("strong",{children:a==null?void 0:a.item_status})}),s(c,{md:"12",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&(a==null?void 0:a.wap_item)?n("small",{children:["Added to Bin ",(h=a==null?void 0:a.wap_item)==null?void 0:h.created_at]}):(a==null?void 0:a.item_status)=="wap"?s("strong",{children:"WAP ITEM NOT FOUND"}):s("hr",{})}),s(c,{md:"3",className:"p-1",children:s("a",{href:a==null?void 0:a.item_url,target:"_blank",children:s("img",{src:a==null?void 0:a.item_thumb,height:"200"})})}),n(c,{md:"6",className:"p-1",children:[a==null?void 0:a.child_sku,s("br",{}),"Item: ",a==null?void 0:a.id,s("br",{}),(a==null?void 0:a.item_quantity)>1&&n("strong",{children:["QTY: ",a==null?void 0:a.item_quantity]}),s("ul",{children:s("div",{dangerouslySetInnerHTML:{__html:P[a==null?void 0:a.id]}})})]}),s(c,{md:"3",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&((B=f[a==null?void 0:a.id])==null?void 0:B.length)>0?s("img",{src:f[a==null?void 0:a.id][0],width:f[a==null?void 0:a.id][1],height:f[a==null?void 0:a.id][2]}):(a==null?void 0:a.item_status)=="production"&&(a==null?void 0:a.batch_number)!="0"?n("span",{children:[n("a",{className:"link-info",href:`/batch-list/${a==null?void 0:a.batch_number}`,target:"_blank",children:["Batch ",a==null?void 0:a.batch_number]}),(a==null?void 0:a.batch)&&((x=a==null?void 0:a.batch)==null?void 0:x.station)&&n("span",{children:[(C=(v=a==null?void 0:a.batch)==null?void 0:v.station)==null?void 0:C.station_description,s("br",{})]}),(a==null?void 0:a.batch)&&s("span",{children:(D=a==null?void 0:a.batch)==null?void 0:D.change_date})]}):(a==null?void 0:a.item_status)=="production"&&(a==null?void 0:a.batch_number)=="0"?"Unbatched":(a==null?void 0:a.item_status)=="rejected"?n("span",{children:[n("a",{href:`/batch-list/${a==null?void 0:a.batch_number}`,target:"_blank",children:["Batch ",a==null?void 0:a.batch_number]}),((S=a==null?void 0:a.rejections)==null?void 0:S.length)>0&&((W=a==null?void 0:a.rejections)==null?void 0:W.map((p,U)=>{var L;return n("span",{children:[s("br",{}),n("small",{children:["Rejected ",p==null?void 0:p.created_at,s("br",{}),(L=p==null?void 0:p.rejection_reason_info)==null?void 0:L.rejection_message]})]},U)}))]}):(a==null?void 0:a.item_status)=="back order"?n("a",{href:`/batch-list/${a==null?void 0:a.batch_number}`,target:"_blank",children:["Batch ",a==null?void 0:a.batch_number]}):(a==null?void 0:a.item_status)=="shipped"?a!=null&&a.shipInfo?n("div",{children:[(E=a==null?void 0:a.shipInfo)==null?void 0:E.mail_class,s("br",{}),(T=a==null?void 0:a.shipInfo)==null?void 0:T.shipping_id]}):"SHIPMENT NOT FOUND":""})]},d)}):"No Items in Bin."]}):s(u,{children:s(c,{md:"12",children:s("h4",{className:"text-center",children:N?n("span",{children:[s(G,{size:"sm"}),"Data Loading"]}):"Bin Empty"})})})]})]})})};export{aa as default};
