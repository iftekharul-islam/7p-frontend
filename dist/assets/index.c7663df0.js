import{k as O,a as Q,r as x,dT as z,j as r,f as d,Q as J,S as K,V as Z,X as t,Y as s,L as N,G as D,dU as a,dV as h,dW as b,dX as ee}from"./index.58b1308d.js";import{a as re}from"./App.a99c5f65.js";import{h as G}from"./moment.4d75c86c.js";import{S as ne}from"./react-select.esm.966b5e80.js";import"./emotion-memoize.esm.06f0e458.js";const ce=()=>{var j,v,P,Y,B,A,w,L,R,T,E;const f=re(),I=O(),{data:n,printerOptions:g,loading:se}=Q(e=>e==null?void 0:e.sentToPrinter),[o,_]=x.exports.useState({printer:null,date:null,batch_number:[]}),[c,S]=x.exports.useState([]),k=()=>{f(a(o!=null&&o.printer?{printer:o==null?void 0:o.printer,date:o==null?void 0:o.date}:null))};x.exports.useEffect(()=>{k()},[o]),x.exports.useEffect(()=>{f(z())},[]);const V=async e=>{var i,u,p;S([...c,e]);const l=await f(h({name:e}));((i=l==null?void 0:l.payload)==null?void 0:i.status)==206?I(`/print-sublimation?select_batch=${(u=l==null?void 0:l.payload)==null?void 0:u.select_batch}`):((p=l==null?void 0:l.payload)==null?void 0:p.status)==201&&k(),S(c.filter(m=>m!==e))},W=async e=>{e.preventDefault(),await f(b({...o,directory:"sublimation",force:"0"})),k()},X=async e=>{e.preventDefault(),await f(ee({...o,directory:"sublimation",force:"0"})),k()},y=(e,l,i)=>{e.preventDefault(),_({printer:l,date:i})},q=e=>{var l,i;e.preventDefault(),(l=e==null?void 0:e.target)!=null&&l.checked?_({...o,batch_number:(i=n==null?void 0:n.to_printer)==null?void 0:i.map(u=>u==null?void 0:u.batch_number)}):_({...o,batch_number:[]})},H=(e,l)=>{var u,p;e.preventDefault();let i=(u=o==null?void 0:o.batch_number)!=null?u:[];(p=e==null?void 0:e.target)!=null&&p.checked?i=[...i,l]:i=i.filter(m=>m!==l),_({...o,batch_number:i})};return r(x.exports.Fragment,{children:d(J,{className:"p-1",children:[r(K,{children:r("h4",{children:"Sent to Printer"})}),d(Z,{children:[r(t,{children:r(s,{sm:"4",children:r(ne,{className:"react-select",classNamePrefix:"react-select",options:g,isClearable:!0,value:g==null?void 0:g.find(e=>(e==null?void 0:e.value)===(o==null?void 0:o.printer)),onChange:e=>{_({printer:e==null?void 0:e.value,date:null})}})})}),((j=n==null?void 0:n.summary)==null?void 0:j.length)>0?d("span",{children:[d(t,{className:"mt-1",children:[r(s,{sm:"2",className:"border py-1",children:"Sent To:"}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:"0-3 days"}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:"4-7 days"}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:"7+ days"}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:"Total"})]}),(v=n==null?void 0:n.summary)==null?void 0:v.map((e,l)=>d(t,{children:[r(s,{sm:"2",className:"border py-1",children:r(N,{onClick:i=>y(i,e==null?void 0:e.to_printer,null),children:e==null?void 0:e.to_printer})}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:r(N,{onClick:i=>y(i,e==null?void 0:e.to_printer,1),children:e==null?void 0:e.group_1})}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:r(N,{onClick:i=>y(i,e==null?void 0:e.to_printer,2),children:e==null?void 0:e.group_2})}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:r(N,{onClick:i=>y(i,e==null?void 0:e.to_printer,3),children:e==null?void 0:e.group_3})}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:r(N,{onClick:i=>y(i,e==null?void 0:e.to_printer,null),children:e==null?void 0:e.batch_count})})]},l)),d(t,{children:[r(s,{sm:"2",className:"border py-1",children:"Total"}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:(P=n==null?void 0:n.summary)==null?void 0:P.reduce(function(e,l){return e+l.group_1},0)}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:(Y=n==null?void 0:n.summary)==null?void 0:Y.reduce(function(e,l){return e+l.group_2},0)}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:(B=n==null?void 0:n.summary)==null?void 0:B.reduce(function(e,l){return e+l.group_3},0)}),r(s,{sm:"1",className:"border py-1 d-flex justify-content-center",children:(A=n==null?void 0:n.summary)==null?void 0:A.reduce(function(e,l){return e+l.batch_count},0)})]})]}):((w=n==null?void 0:n.to_printer)==null?void 0:w.length)>0?d("span",{children:[r("hr",{}),d(t,{className:"mt-1",children:[r(s,{sm:"3",children:r(D,{color:"primary",onClick:W,children:"Reprint Selected Batches"})}),r(s,{sm:"3",children:r(D,{color:"primary",onClick:X,children:"Export Selected Batches Again"})}),r(s,{sm:"1"}),r(s,{sm:"5",children:d("h4",{children:[(L=n==null?void 0:n.to_printer)==null?void 0:L.length," Batches Found /"," ",n==null?void 0:n.total_items," Item Lines"]})})]}),r("hr",{}),d(t,{className:"mt-1",children:[d(s,{sm:"2",children:[r("input",{type:"checkbox",checked:((R=o==null?void 0:o.batch_number)==null?void 0:R.length)===((T=n==null?void 0:n.to_printer)==null?void 0:T.length),onClick:q}),r("b",{className:"mx-1",children:"Select All"})]}),r(s,{sm:"1",children:r("b",{children:"Printed"})}),r(s,{sm:"1",children:r("b",{children:"First Order"})}),r(s,{sm:"1",children:r("b",{children:"Lines"})}),r(s,{sm:"2",children:r("b",{children:"Current Station"})}),r(s,{sm:"2",children:r("b",{children:"Date Sent/User"})}),r(s,{sm:"1"}),r(s,{sm:"1"}),r(s,{sm:"1"})]}),(E=n==null?void 0:n.to_printer)==null?void 0:E.map((e,l)=>{var i,u,p,m,F,M,$,U;return d("span",{children:[r("hr",{}),d(t,{className:"mt-1",children:[d(s,{sm:"2",children:[r("input",{type:"checkbox",checked:(i=o==null?void 0:o.batch_number)==null?void 0:i.includes(e==null?void 0:e.batch_number),onClick:C=>H(C,e==null?void 0:e.batch_number)}),d("span",{className:"mx-1",children:[r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),(e==null?void 0:e.status)!=="active"&&d("span",{children:["(",((p=(u=e==null?void 0:e.status)==null?void 0:u.charAt(0))==null?void 0:p.toUpperCase())+((m=e==null?void 0:e.status)==null?void 0:m.slice(1)),")"]}),r("br",{}),(e==null?void 0:e.store)&&r("span",{children:(F=e==null?void 0:e.store)==null?void 0:F.store_name}),r("br",{}),e!=null&&e.summary_date?"Summary Printed":""]})]}),r(s,{sm:"1",children:d("div",{children:[(e==null?void 0:e.to_printer)!=="1"&&d("span",{children:[e==null?void 0:e.to_printer,r("br",{})]}),G(e==null?void 0:e.to_printer_date).format("YYYY-MM-DD"),r("br",{}),n==null?void 0:n.batch_queue[e==null?void 0:e.batch_number]]})}),r(s,{sm:"1",children:G(e==null?void 0:e.min_order_date).format("YYYY-MM-DD")}),r(s,{sm:"1",children:((M=e==null?void 0:e.items_counts)==null?void 0:M.length)>0&&(($=e==null?void 0:e.items_counts[0])==null?void 0:$.count)}),r(s,{sm:"2",children:d("span",{children:[e==null?void 0:e.station_name,r("br",{}),e==null?void 0:e.station_description]})}),r(s,{sm:"2",children:d("span",{children:[e==null?void 0:e.to_printer_date,r("br",{}),n==null?void 0:n.scans[e==null?void 0:e.batch_number]]})}),r(s,{sm:"1",children:e!=null&&e.first_item?r("img",{src:(U=e==null?void 0:e.first_item)==null?void 0:U.item_thumb,height:70,width:70}):"No Items"}),r(s,{sm:"1",children:(e==null?void 0:e.days)>1&&`Printed ${e==null?void 0:e.days} Days Ago`}),r(s,{sm:"1",children:r(D,{color:"primary",onClick:C=>{C.preventDefault(),V(e==null?void 0:e.batch_number)},disabled:c==null?void 0:c.includes(e==null?void 0:e.batch_number),children:c!=null&&c.includes(e==null?void 0:e.batch_number)?"Please Wait":`Reprint ${e==null?void 0:e.batch_number}`})})]},l)]})})]}):r("div",{className:"text-center mt-5",children:"No Data Found"})]})]})})};export{ce as default};
