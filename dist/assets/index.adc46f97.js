import{a as I,r as m,c9 as Q,f as s,X as N,j as r,Y as n,$ as u,a0 as p,G as O,aB as B,c6 as Y,c5 as X,ca as K,cb as q,cc as A,az as Z,aF as H,aG as G,aH as J,cd as V,I as F,L as z,ce as ee,cf as re,cg as le,ch as se,ci as ne,cj as R,Z as ce,Q as oe,S as he,T as ie,V as pe,ck as _e,cl as ue}from"./index.8b10020f.js";/* empty css                  */import{a,M as fe,s as M}from"./App.6aecf595.js";import{E as te}from"./eye.aed05687.js";import{F as be}from"./index.17631888.js";import{S as L}from"./react-select.esm.f6728b2e.js";import{D as U,d as de,r as ye}from"./react-draft-wysiwyg.dfb1f38f.js";import{A as ge}from"./react-select-async.esm.f53fa396.js";import"./emotion-memoize.esm.06f0e458.js";const me=(e,o,_,k)=>{var g;const E=a();return I(i=>i.manualOrders),m.exports.useEffect(()=>{E(Q())},[]),s(m.exports.Fragment,{children:[s(N,{className:"pt-2",children:[r(n,{sm:"5",children:s(N,{children:[s(n,{sm:"12",children:[r("h4",{children:"Ship To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_full_name",children:"Full Name"}),r(p,{type:"text",name:"ship_full_name",id:"ship_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.ship_full_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_company_name",children:"Company"}),r(p,{type:"text",name:"ship_company_name",id:"ship_company_name",placeholder:"Enter Company",value:e==null?void 0:e.ship_company_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_address_1",children:"Street"}),r(p,{type:"text",name:"ship_address_1",id:"ship_address_1",placeholder:"Enter Street",value:e==null?void 0:e.ship_address_1,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_first_name",children:"First/Last"}),r(p,{type:"text",name:"ship_first_name",id:"ship_first_name",placeholder:"Enter First",value:e==null?void 0:e.ship_first_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_last_name",children:"."}),r(p,{type:"text",name:"ship_last_name",id:"ship_last_name",placeholder:"Enter Last",value:e==null?void 0:e.ship_last_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_address_2",children:"Line 2"}),r(p,{type:"text",name:"ship_address_2",id:"ship_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.ship_address_2,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_city",children:"City"}),r(p,{type:"text",name:"ship_city",id:"ship_city",placeholder:"Enter City",value:e==null?void 0:e.ship_city,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_state",children:"State"}),r(p,{type:"text",name:"ship_state",id:"ship_state",placeholder:"State",value:e==null?void 0:e.ship_state,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_zip",children:"ZipCode"}),r(p,{type:"text",name:"ship_zip",id:"ship_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.ship_zip,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_country",children:"Country"}),r(p,{type:"text",name:"ship_country",id:"ship_country",placeholder:"Enter Country",value:e==null?void 0:e.ship_country,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_phone",children:"Phone"}),r(p,{type:"text",name:"ship_phone",id:"ship_phone",placeholder:"Enter Phone",value:e==null?void 0:e.ship_phone,onChange:o})]})]})}),r(n,{sm:"2"}),r(n,{sm:"5",children:s(N,{children:[s(n,{sm:"12",children:[r("h4",{children:"Bill To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_full_name",children:"Full Name"}),r(p,{type:"text",name:"bill_full_name",id:"bill_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.bill_full_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_company_name",children:"Company"}),r(p,{type:"text",name:"bill_company_name",id:"bill_company_name",placeholder:"Enter Company",value:e==null?void 0:e.bill_company_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_address_2",children:"Line 2"}),r(p,{type:"text",name:"bill_address_2",id:"bill_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.bill_address_2,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_first_name",children:"First/Last"}),r(p,{type:"text",name:"bill_first_name",id:"bill_first_name",placeholder:"Enter First",value:e==null?void 0:e.bill_first_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_last_name",children:"."}),r(p,{type:"text",name:"bill_last_name",id:"bill_last_name",placeholder:"Enter Last",value:e==null?void 0:e.bill_last_name,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_address_1",children:"Street"}),r(p,{type:"text",name:"bill_address_1",id:"bill_address_1",placeholder:"Enter Street",value:e==null?void 0:e.bill_address_1,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_city",children:"City"}),r(p,{type:"text",name:"bill_city",id:"bill_city",placeholder:"Enter City",value:e==null?void 0:e.bill_city,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_state",children:"State"}),r(p,{type:"text",name:"bill_state",id:"bill_state",placeholder:"State",value:e==null?void 0:e.bill_state,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_zip",children:"ZipCode"}),r(p,{type:"text",name:"bill_zip",id:"bill_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.bill_zip,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_country",children:"Country"}),r(p,{type:"text",name:"bill_country",id:"bill_country",placeholder:"Enter Country",value:e==null?void 0:e.bill_country,onChange:o})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_phone",children:"Phone"}),r(p,{type:"text",name:"bill_phone",id:"bill_phone",placeholder:"Enter Phone",value:e==null?void 0:e.bill_phone,onChange:o})]})]})})]}),r("hr",{}),s(N,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(u,{className:"form-label",for:"bill_email",children:"Email"})}),r(n,{sm:"3",children:r(p,{type:"text",name:"bill_email",id:"bill_email",placeholder:"Enter Email",value:(g=e==null?void 0:e.customer)==null?void 0:g.bill_email,onChange:o})}),s(n,{sm:"2",className:"d-flex align-items-center",children:[r("div",{onClick:i=>{k(!0),i.preventDefault()},children:r(fe,{size:20,className:"mx-1"})}),"|",r(te,{size:20,className:"mx-1"})]})]}),s(N,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(u,{className:"form-label",for:"order_comments",children:"Customer comment"})}),r(n,{sm:"3",children:r(p,{type:"text",name:"order_comments",id:"order_comments",placeholder:"Enter Customer comment",value:e==null?void 0:e.order_comments,onChange:o})})]}),s(N,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(u,{className:"form-label",for:"ship_message",children:"Shipper Message"})}),r(n,{sm:"3",children:r(p,{type:"textarea",name:"ship_message",id:"ship_message",placeholder:"Enter Shipper Message",value:e==null?void 0:e.ship_message,onChange:o})})]})]})},ve=(e,o,_,k)=>{var E,g,i,b,v,f,h,x;return m.exports.useEffect(()=>{var j,l,c,d,y,t,S;o({target:{name:"total",value:parseFloat(parseFloat((j=e==null?void 0:e.subtotal)!=null?j:0)-parseFloat((l=e==null?void 0:e.coupon_value)!=null?l:0)+parseFloat((c=e==null?void 0:e.gift_wrap_cost)!=null?c:0)+parseFloat((d=e==null?void 0:e.shipping_charge)!=null?d:0)+parseFloat((y=e==null?void 0:e.insurance)!=null?y:0)+parseFloat((t=e==null?void 0:e.adjustments)!=null?t:0)+parseFloat((S=e==null?void 0:e.tax_charge)!=null?S:0)).toFixed(2)}})},[e==null?void 0:e.subtotal,e==null?void 0:e.coupon_value,e==null?void 0:e.gift_wrap_cost,e==null?void 0:e.shipping_charge,e==null?void 0:e.insurance,e==null?void 0:e.adjustments,e==null?void 0:e.tax_charge]),r(m.exports.Fragment,{children:s(N,{className:"pt-2",children:[r(n,{sm:"7"}),s(n,{sm:"5",children:[s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Subtotal:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"subtotal",id:"subtotal",value:(E=e==null?void 0:e.subtotal)!=null?E:0,disabled:!0})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Coupon-discount:"}),r(n,{sm:"4",children:r(p,{type:"text",name:"coupon_id",id:"coupon_id",placeholder:"Coupon id",value:e==null?void 0:e.coupon_id,onChange:o})}),r(n,{sm:"4",children:r(p,{type:"number",name:"coupon_value",id:"coupon_value",value:(g=e==null?void 0:e.coupon_value)!=null?g:0,onChange:o})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Gift Wrap:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"gift_wrap_cost",id:"gift_wrap_cost",value:(i=e==null?void 0:e.gift_wrap_cost)!=null?i:0,onChange:o})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Shipping:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"shipping_charge",id:"shipping_charge",value:(b=e==null?void 0:e.shipping_charge)!=null?b:0,onChange:o})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Insurance:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"insurance",id:"insurance",value:(v=e==null?void 0:e.insurance)!=null?v:0,onChange:o})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Adjustments:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"adjustments",id:"adjustments",value:(f=e==null?void 0:e.adjustments)!=null?f:0,onChange:o})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Tax:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"tax_charge",id:"tax_charge",value:(h=e==null?void 0:e.tax_charge)!=null?h:0,onChange:o})})]}),s(N,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Total:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(p,{type:"number",name:"total",id:"total",value:(x=e==null?void 0:e.total)!=null?x:0,disabled:!0})})]}),r(N,{children:r(n,{sm:"12",className:"mt-1",children:r("div",{className:"d-flex justify-content-end",children:r(O,{className:"me-1",color:"primary",type:"submit",onClick:j=>{j.preventDefault(),_()},children:"Update Order"})})})})]})]})})},xe=(e,o,_,k)=>{var h,x,j,l;const E=a(),{id:g}=B(),i=I(c=>c.orders);m.exports.useEffect(()=>{E(Y()),E(X())},[]);const b=c=>{E(K({id:g,store_select:c==null?void 0:c.value})),o({target:{name:"store_id",value:c==null?void 0:c.value}})},v=c=>{E(q({id:g,shipping_method:c==null?void 0:c.value})),o({target:{name:"shipping_method",value:c==null?void 0:c.value}})},f=c=>{E(q({id:g,ship_date:c[0]})),o({target:{name:"ship_date",value:c[0]}})};return s(m.exports.Fragment,{children:[s(N,{children:[s(n,{sm:"4",children:[s("div",{children:["Order: ",e==null?void 0:e.order_id]}),s("div",{children:["Date: ",e==null?void 0:e.order_date]}),(e==null?void 0:e.purchase_order)&&s("div",{children:["PO: ",e==null?void 0:e.purchase_order]})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"store",children:"Store"}),r(L,{className:"react-select",classNamePrefix:"select",theme:M,placeholder:"Select Store",options:i==null?void 0:i.storeOptions,value:(h=i==null?void 0:i.storeOptions)==null?void 0:h.find(c=>(c==null?void 0:c.value)==(e==null?void 0:e.store_id)),onChange:b})]}),r(n,{sm:"4"})]}),r("hr",{}),s(N,{children:[r(n,{sm:"2"}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"store",children:"Ship Via"}),r(L,{className:"react-select",classNamePrefix:"select",theme:M,placeholder:"Ship Via",options:i==null?void 0:i.shipOptions,value:(x=i==null?void 0:i.shipOptions)==null?void 0:x.find(c=>{var d,y;if(((d=e==null?void 0:e.store)==null?void 0:d.change_method)=="1"&&(e==null?void 0:e.carrier)!="MN")return(c==null?void 0:c.value)===`${e==null?void 0:e.carrier}*${e==null?void 0:e.method}`;if(((y=e==null?void 0:e.store)==null?void 0:y.change_method)=="1")return(c==null?void 0:c.value)===`${e==null?void 0:e.carrier}*`;if(e!=null&&e.carrier)return{label:(e==null?void 0:e.carrier)+(e==null?void 0:e.method),value:(e==null?void 0:e.carrier)+(e==null?void 0:e.method)};c==null||c.value}),isDisabled:((j=e==null?void 0:e.store)==null?void 0:j.change_method)!="1",onChange:v})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"date",children:"Ship By Date"}),r(be,{className:"form-control",id:"date",placeholder:"Select Date",value:(l=e==null?void 0:e.ship_date)!=null?l:null,options:{dateFormat:"d-m-Y"},onChange:f})]}),s(n,{sm:"2",className:"d-flex align-items-end",children:[(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7&&r("div",{children:(e==null?void 0:e.carrier)=="MN"&&(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7?r(O,{color:"info",onClick:c=>c.preventDefault(),children:(order==null?void 0:order.method)!=""?order==null?void 0:order.method:"Manual Ship"}):(e==null?void 0:e.batched)==0&&(e==null?void 0:e.order_status)!=6&&(e==null?void 0:e.order_status)!=8?r(O,{color:"info",onClick:c=>c.preventDefault(),children:"Ship"}):(e==null?void 0:e.order_status)==10&&r(O,{color:"info",onClick:c=>c.preventDefault(),children:"Re-Ship Returned Package"})}),((e==null?void 0:e.batched)==0||(e==null?void 0:e.batched)<=2)&&r(O,{color:"info",onClick:()=>{var c;return k((c=e==null?void 0:e.order)==null?void 0:c.id)},children:"Batch"})]})]})]})},Ne=(e,o,_)=>{var f;const[k,E]=m.exports.useState(()=>U.EditorState.createEmpty());m.exports.useEffect(()=>{if(k){const h=de(U.convertToRaw(k.getCurrentContent()));v({...b,message:h})}},[k]);const g=a(),i=I(h=>h.orders),[b,v]=m.exports.useState(null);return m.exports.useEffect(()=>{var h;v({order_5p:_==null?void 0:_.id,recipient:(h=_==null?void 0:_.customer)==null?void 0:h.bill_email,subject:`Order ${_==null?void 0:_.short_order}`,message_types:0,message:""})},[_]),m.exports.useEffect(()=>{g(A())},[]),m.exports.useEffect(()=>{g(A())},[]),r("div",{children:s(Z,{isOpen:e,toggle:()=>o(!e),className:"modal-dialog-centered modal-lg",fullscreen:"sm",children:[r(H,{toggle:()=>o(!e),children:"Send email to customer"}),s(G,{children:[s("div",{children:[r(u,{className:"form-label",for:"email",children:"Email"}),r(p,{type:"email",id:"email",value:b==null?void 0:b.recipient,onChange:h=>{var x;return v({...b,recipient:(x=h==null?void 0:h.target)==null?void 0:x.value})},placeholder:"Email Address"})]}),s("div",{children:[r(u,{className:"form-label",for:"email",children:"Type"}),r(L,{className:"react-select",classNamePrefix:"select",theme:M,placeholder:"Select Type",options:i==null?void 0:i.emailTypeOptions,value:(f=i==null?void 0:i.emailTypeOptions)==null?void 0:f.find(h=>(h==null?void 0:h.value)===(b==null?void 0:b.message_types)),onChange:h=>v({...b,message_types:h==null?void 0:h.value})})]}),s("div",{children:[r(u,{className:"form-label",for:"email",children:"Subject"}),r(p,{type:"text",id:"text",value:b==null?void 0:b.subject,onChange:h=>{var x;return v({...b,subject:(x=h==null?void 0:h.target)==null?void 0:x.value})},placeholder:"Enter Subject"})]}),r("div",{children:r(ye.exports.Editor,{editorState:k,onEditorStateChange:h=>E(h),wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class"})})]}),r(J,{children:r(O,{color:"primary",onClick:h=>{h.preventDefault(),g(V(b)),o(!e)},children:"Send"})})]})})};function W(e){if(e[0])return e.substring(0,3)==="927"||e[0]==="8"?`https://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e[0]==="L"||e[0]==="U"?`https://tools.usps.com/go/TrackConfirmAction?qtc_tLabels1=${e}`:e.substring(0,3)==="937"?`http://webtrack.dhlglobalmail.com/?trackingnumber=${e}`:e.substring(0,2)==="94"||e.substring(0,3)==="927"?`https://tools.usps.com/go/TrackConfirmAction?tLabels=${e}`:e[0]==="2"||e[0]==="7"?`http://www.fedex.com/Tracking?tracknumbers=${e}`:e.substring(0,2)==="1Z"?`http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e.substring(0,2)==="42"?`https://webtrack.dhlecs.com/?trackingnumber=${e}`:"#"}function Ee({item:e,setShowTracking:o,setItemTracking:_,carrier:k}){var g,i,b,v,f,h,x,j,l,c,d,y,t,S,T,D,$,w;const E=(C,P)=>{console.log("redo item")};return s("span",{children:[(e==null?void 0:e.item_status)==="production"?e!=null&&e.batch?s("p",{children:["View batch:",r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((g=e==null?void 0:e.batch)==null?void 0:g.station)&&s(F,{children:[r("br",{}),s("span",{children:[(b=(i=e==null?void 0:e.batch)==null?void 0:i.station)==null?void 0:b.station_name," ",(f=(v=e==null?void 0:e.batch)==null?void 0:v.station)==null?void 0:f.station_description]}),r("br",{}),(h=e==null?void 0:e.batch)==null?void 0:h.change_date]})]}):(e==null?void 0:e.batch_number)!=="0"?r("p",{children:"No Batch Record"}):r("p",{children:"Unbatched"}):(e==null?void 0:e.item_status)==="wap"?e!=null&&e.wap_item?s(F,{children:[s("p",{children:["WAP Bin"," ",r("a",{href:`/wap/details/${(x=e==null?void 0:e.wap_item)==null?void 0:x.bin_id}`,target:"_blank",children:(j=e==null?void 0:e.wap_item)==null?void 0:j.bin.name})]}),r("p",{children:"Added:"}),r("p",{children:(l=e==null?void 0:e.wap_item)==null?void 0:l.created_at})]}):r("p",{children:"WAP BIN: NOT FOUND"}):(e==null?void 0:e.item_status)==="rejected"&&(e==null?void 0:e.rejection)?(e==null?void 0:e.rejection.graphic_status)!=="Redo Item"?s(F,{children:[r("p",{children:"Rejected"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((c=e==null?void 0:e.rejection)==null?void 0:c.rejection_reason_info)&&s(F,{children:[r("br",{}),(y=(d=e==null?void 0:e.rejection)==null?void 0:d.rejection_reason_info)==null?void 0:y.rejection_message]}),r("br",{}),(t=e==null?void 0:e.rejection)==null?void 0:t.rejection_message,r("br",{}),(S=e==null?void 0:e.rejection)==null?void 0:S.created_at]}):s(F,{children:[r("p",{children:"Redo"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((T=e==null?void 0:e.rejection)==null?void 0:T.rejection_reason_info)&&s(F,{children:[r("br",{}),($=(D=e==null?void 0:e.rejection)==null?void 0:D.rejection_reason_info)==null?void 0:$.rejection_message]}),r("br",{}),e==null?void 0:e.rejection.rejection_message,r("br",{}),e==null?void 0:e.rejection.created_at]}):(e==null?void 0:e.item_status)==="rejected"&&!(e!=null&&e.rejection)?r("p",{children:"REJECTED BUT NO REJECTION RECORD"}):(e==null?void 0:e.item_status)==="back order"?(()=>{let C=0;return e!=null&&e.inventoryunit&&(e==null||e.inventoryunit.forEach(P=>{P.open_po&&P.open_po.eta>C&&(C=P.open_po.eta)})),s(F,{children:[r("p",{children:"Back Order"}),!(e!=null&&e.batch)&&r("p",{children:"Unbatched"}),C>0&&s("p",{children:["ETA: ",C]})]})})():(e==null?void 0:e.item_status)!=="shipped"&&s(F,{children:[r("p",{children:e==null?void 0:e.item_status}),(e==null?void 0:e.batch)&&s(F,{children:[r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),r("br",{}),e==null?void 0:e.batch.change_date]})]}),(e==null?void 0:e.ship_info)&&((w=e==null?void 0:e.ship_info)==null?void 0:w.tracking_number)?s(F,{children:[r("a",{href:`/shipping?search_for_first=${e==null?void 0:e.ship_info.unique_order_id}&search_in_first=unique_order_id`,children:"Shipped"})," ","on"," ",new Date((e==null?void 0:e.ship_info.postmark_date)||Date.now()).toLocaleDateString(),r("br",{}),!(e!=null&&e.ship_info.mail_class.toLowerCase().includes("innovation"))&&s(F,{children:[e==null?void 0:e.ship_info.mail_class,r("br",{})]}),s("a",{href:W(e==null?void 0:e.ship_info.shipping_id),target:"_blank",children:["Trk# ",e==null?void 0:e.ship_info.shipping_id]}),r("br",{}),(e==null?void 0:e.batch)&&s(F,{children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:["Batch ",e==null?void 0:e.batch_number]}),r("br",{})]}),r("br",{}),r("button",{id:"redo-item",onClick:()=>E(e==null?void 0:e.id,e==null?void 0:e.item_quantity),className:"btn btn-xs btn-danger",children:"Redo Item"})]}):(e==null?void 0:e.item_status)==="shipped"&&(e==null?void 0:e.tracking_number)!==null?s("a",{href:W(e==null?void 0:e.tracking_number),target:"_blank",children:["Trk# ",e==null?void 0:e.tracking_number]}):(e==null?void 0:e.item_status)!=="shipped"&&(e==null?void 0:e.item_status)!=="cancelled"&&k!=="MN"?r(F,{children:r("button",{id:"shipitem",onClick:C=>{C.preventDefault(),o(!0),_(e)},className:"btn btn-xs btn-success",children:"Enter Tracking"})}):null]})}const Se=(e,o,_,k,E)=>{var j;const g=a(),{id:i}=B(),b=async l=>{let c=[];return l.length>3?(c=await g(ee(l)),c==null?void 0:c.payload):[]},v=l=>{var d,y,t,S,T,D,$;const c=(d=e==null?void 0:e.items)==null?void 0:d.map(w=>({...w}));c==null||c.push({item_id:(y=l==null?void 0:l.data)==null?void 0:y.item_id,child_sku:(t=l==null?void 0:l.data)==null?void 0:t.product_model,id_catalog:(S=l==null?void 0:l.data)==null?void 0:S.id_catalog,item_description:(T=l==null?void 0:l.data)==null?void 0:T.product_name,item_thumb:(D=l==null?void 0:l.data)==null?void 0:D.product_thumb,item_unit_price:($=l==null?void 0:l.data)==null?void 0:$.product_price,item_quantity:1,is_new:!0}),o({target:{name:"items",value:c}})},f=(l,c)=>{var y,t,S;const d=(y=e==null?void 0:e.items)==null?void 0:y.map(T=>({...T}));d[c][(t=l.target)==null?void 0:t.name]=(S=l.target)==null?void 0:S.value,o({target:{name:"items",value:d}})};m.exports.useEffect(()=>{const l=parseFloat(e==null?void 0:e.items.reduce(function(c,d){return parseFloat(c)+parseFloat(d==null?void 0:d.item_unit_price)*parseFloat(d==null?void 0:d.item_quantity)},0)).toFixed(2);o({target:{name:"subtotal",value:l}})},[e==null?void 0:e.items]);const h=(l,c,d)=>{l.preventDefault(),g(re({id:i,orderId:c,itemId:d}))},x=(l,c,d)=>{l.preventDefault(),g(le({id:i,orderId:c,itemId:d}))};return s(m.exports.Fragment,{children:[s(N,{className:"rounded bg-secondary p-1 my-1 text-uppercase",children:[r(n,{sm:"1 text-light fw-bolder ",children:"Image"}),r(n,{sm:"3 text-light fw-bolder",children:"Name"}),r(n,{sm:"4 text-light fw-bolder",children:"Description"}),r(n,{sm:"1 text-light fw-bolder",children:"Quantity"}),r(n,{sm:"1 text-light fw-bolder",children:"Price"}),r(n,{sm:"1 text-light fw-bolder",children:"Total"}),r(n,{sm:"1 text-light fw-bolder",children:"Action"})]}),(j=e==null?void 0:e.items)==null?void 0:j.map((l,c)=>{var d,y;return s(N,{className:"",children:[s(n,{sm:"1",children:[r("a",{href:l!=null&&l.item_url?l==null?void 0:l.item_url:"#",target:"_blank",children:r("img",{src:l==null?void 0:l.item_thumb,alt:l==null?void 0:l.child_sku,height:"100",width:"100"})}),r("div",{children:(e==null?void 0:e.store)&&((d=e==null?void 0:e.store)==null?void 0:d.change_items)==="1"&&(l==null?void 0:l.item_status)!=="cancelled"&&(l==null?void 0:l.item_status)!=="shipped"?r(z,{style:{color:"gray"},className:"delete-item",onClick:t=>h(t,e==null?void 0:e.id,l==null?void 0:l.id),children:"Cancel"}):(e==null?void 0:e.store)&&((y=e==null?void 0:e.store)==null?void 0:y.change_items)==="1"&&(l==null?void 0:l.item_status)==="cancelled"?r(z,{style:{color:"gray"},className:"delete-item",onClick:t=>x(t,e==null?void 0:e.id,l==null?void 0:l.id),children:"Restore"}):null})]}),s(n,{sm:"3",children:[r("div",{children:l==null?void 0:l.child_sku}),r("div",{children:l==null?void 0:l.item_description})]}),r(n,{sm:"4",children:r(p,{type:"text",Rows:"1",name:"options",id:"options",placeholder:"Click Here",value:l==null?void 0:l.options,onChange:t=>f(t,c)})}),r(n,{sm:"1",children:r(p,{type:"number",name:"item_quantity",id:"item_quantity",placeholder:"Item_quantity",value:l==null?void 0:l.item_quantity,onChange:t=>f(t,c)})}),r(n,{sm:"1",children:r(p,{type:"number",name:"item_unit_price",id:"item_unit_price",placeholder:"Price",value:parseFloat(l==null?void 0:l.item_unit_price).toFixed(2),onChange:t=>f(t,c)})}),r(n,{sm:"1",children:r(p,{type:"number",name:"total_price",id:"total_price",placeholder:"Price",value:parseFloat((l==null?void 0:l.item_quantity)*(l==null?void 0:l.item_unit_price)).toFixed(2),disabled:!0})}),r(n,{sm:"1",children:r(Ee,{item:l,setShowTracking:k,setItemTracking:E,carrier:e==null?void 0:e.carrier})}),r("hr",{})]},c)}),s(N,{className:"pt-2",children:[r(n,{sm:"2"}),r(n,{sm:"8",children:r(ge,{isClearable:!1,className:"react-select",classNamePrefix:"select",name:"callback-react-select",loadOptions:b,value:null,onChange:v,theme:M})}),r(n,{sm:"2"})]})]})},ke=(e,o,_,k,E)=>{var f;const g=a(),[i,b]=m.exports.useState(null);m.exports.useEffect(()=>{b({track_item_id:_==null?void 0:_.id,track_order_id:k,track_shopify_order_id:E,track_shopify_item_line_id:_==null?void 0:_.item_id,track_shopify_item_quantity:`#${_==null?void 0:_.item_id}`,method:"",track_number:""})},[_]);const v=I(h=>h.orders);return m.exports.useEffect(()=>{g(se())},[]),r("div",{children:s(Z,{isOpen:e,toggle:()=>o(!e),className:"modal-dialog-centered",children:[r(H,{toggle:()=>o(!e),children:"Enter Tracking Number"}),s(G,{children:[s("div",{children:[r(u,{className:"form-label",for:"email",children:"Ship Via"}),r(L,{className:"react-select",classNamePrefix:"select",theme:M,placeholder:"Select Type",options:v==null?void 0:v.shippingMethodOptions,value:(f=v==null?void 0:v.shippingMethodOptions)==null?void 0:f.find(h=>(h==null?void 0:h.value)===(i==null?void 0:i.method)),onChange:h=>b({...i,method:h==null?void 0:h.value})})]}),s("div",{children:[r(u,{className:"form-label",for:"email",children:"Tracking Number"}),r(p,{type:"text",id:"text",value:i==null?void 0:i.subject,onChange:h=>{var x;return b({...i,track_number:(x=h==null?void 0:h.target)==null?void 0:x.value})},placeholder:"Enter Tracking Number"})]})]}),r(J,{children:r(O,{color:"primary",onClick:h=>{h.preventDefault(),g(ne(i)),o(!e)},children:"Ship Item"})})]})})},Ie=()=>{const{id:e}=B(),o=a(),_=I(y=>y.orders),[k,E]=m.exports.useState(!1),[g,i]=m.exports.useState(!1),[b,v]=m.exports.useState(null),[f,h]=m.exports.useState({items:[]}),[x,j]=m.exports.useState(null);m.exports.useEffect(()=>{o(R(e))},[e]),m.exports.useEffect(()=>{_!=null&&_.order&&h(_==null?void 0:_.order)},[_==null?void 0:_.order]);const l=y=>{var t,S;h({...f,[(t=y.target)==null?void 0:t.name]:(S=y.target)==null?void 0:S.value})},c=async()=>{var t,S,T;const y=await o(_e({data:f,id:e}));(t=y==null?void 0:y.payload)!=null&&t.status?o(R(e)):j((T=(S=y==null?void 0:y.payload)==null?void 0:S.data)==null?void 0:T.errors)},d=async y=>{var S;const t=await o(ue(e));(S=t==null?void 0:t.payload)!=null&&S.status&&o(R(e))};return r(m.exports.Fragment,{children:r(N,{children:r(ce,{children:r(n,{sm:"12",children:s(oe,{children:[r(he,{children:r(ie,{tag:"h4",children:"Edit Order"})}),s(pe,{children:[xe(f,l,x,d),me(f,l,x,E),Se(f,l,x,i,v),ve(f,l,c),ke(g,i,b,f==null?void 0:f.id,f==null?void 0:f.short_order),Ne(k,E,f)]})]})})})})})};export{Ie as default};
