import{a as Y,r as b,cr as q,cs as A,ct as K,cu as M,j as e,f as c,Q as T,X as i,Y as s,a0 as U,G,V,ab as X,ac as z,ad as j,cv as H,N as J,n as W,cw as Z}from"./index.6f97c64f.js";/* empty css                  */import{a as R}from"./App.571d4ccd.js";/* empty css                                  */import{F as E}from"./index.93a40e35.js";import{S as _}from"./react-select.esm.eab0f134.js";import"./emotion-memoize.esm.06f0e458.js";const de=()=>{var g,S,x,O,I,C,y,k,B,L,w,D,P,$,F;const h=R(),r=Y(a=>a.previewBatches),[o,u]=b.exports.useState(!1),l=r==null?void 0:r.searchParams;var p=((g=r==null?void 0:r.data)==null?void 0:g.count)-1;let N=((S=r==null?void 0:r.data)==null?void 0:S.serial)-1;b.exports.useEffect(()=>{f()},[r==null?void 0:r.params,r==null?void 0:r.active]),b.exports.useEffect(()=>{h(q()),h(A()),h(K())},[]);const f=async()=>{u(!0),await h(M()),u(!1)},m=a=>{h(H(a))},Q=a=>{(r==null?void 0:r.active)!==a&&h(Z(a))},v=({text:a,total:d=null,tab:t})=>e(J,{children:c(W,{active:(r==null?void 0:r.active)===t,onClick:()=>{Q(t)},children:[a,d!=null?` (${d}) `:null]})});return e("div",{className:"app-user-list",children:c(b.exports.Fragment,{children:[c(T,{className:"p-2",children:[c(i,{className:"mb-1",children:[e(s,{sm:"2",children:e(U,{type:"text",id:"search_for_first",name:"search_for_first",placeholder:"Search for",value:l==null?void 0:l.search_for_first,onChange:a=>{var d;return m({search_for_first:(d=a==null?void 0:a.target)==null?void 0:d.value})}})}),e(s,{sm:"2",children:e(_,{className:"react-select",classNamePrefix:"select",placeholder:"Search in",options:r==null?void 0:r.searchInOptions,value:(x=r==null?void 0:r.searchInOptions)==null?void 0:x.find(a=>(a==null?void 0:a.value)==(l==null?void 0:l.search_in_first)),onChange:a=>m({search_in_first:a==null?void 0:a.value})})}),e(s,{sm:"2",children:e(_,{className:"react-select",classNamePrefix:"select",placeholder:"Select Store",options:r==null?void 0:r.storeOptions,value:(O=r==null?void 0:r.storeOptions)==null?void 0:O.find(a=>(a==null?void 0:a.value)==(l==null?void 0:l.store)),onChange:a=>m({store:a==null?void 0:a.value})})}),e(s,{sm:"2",children:e(_,{className:"react-select",classNamePrefix:"select",placeholder:"Select Section",options:r==null?void 0:r.sectionOptions,value:(I=r==null?void 0:r.sectionOptions)==null?void 0:I.find(a=>(a==null?void 0:a.value)==(l==null?void 0:l.section)),onChange:a=>m({section:a==null?void 0:a.value})})}),e(s,{sm:"2",children:e(E,{className:"form-control",id:"date",placeholder:"Order Start Date",value:(C=l==null?void 0:l.start_date)!=null?C:null,options:{dateFormat:"d-m-Y"},onChange:a=>m({start_date:a[0]})})}),e(s,{sm:"2",children:e(E,{className:"form-control",id:"date",placeholder:"Order End Date",value:(y=l==null?void 0:l.end_date)!=null?y:null,options:{dateFormat:"d-m-Y"},onChange:a=>m({end_date:a[0]})})})]}),c(i,{className:"mb-1",children:[e(s,{sm:"11"}),e(s,{sm:"1",className:"d-flex justify-content-end",children:e(G,{color:"primary",onClick:f,disabled:o,children:o?"Searching":"Search"})})]})]}),e(T,{children:e(V,{children:c(i,{children:[c(X,{pills:!0,className:"mb-2 orange",children:[e(v,{text:"In Stock",tab:"0"}),e(v,{text:"Back Orders",tab:"1"})]}),c(z,{activeTab:r==null?void 0:r.active,children:[e(j,{tabId:"0",children:o?e("div",{className:"text-center",children:e("h4",{children:"Loading..."})}):((B=(k=r==null?void 0:r.data)==null?void 0:k.batch_routes)==null?void 0:B.length)>0?c("span",{children:[c(i,{children:[e(s,{sm:"2",className:"p-1 border",children:e("b",{children:"Batch #"})}),e(s,{sm:"1",className:"p-1 border",children:e("b",{children:"S.L #"})}),e(s,{sm:"1",className:"p-1 border",children:e("b",{children:"Batch S.L #"})}),e(s,{sm:"2",className:"border",children:c("b",{children:["Item ID ",e("br",{}),"Order #"]})}),e(s,{sm:"3",className:" border",children:c("b",{children:["Order date",e("br",{}),"Store"]})}),e(s,{sm:"1",className:"p-1 border",children:e("b",{children:"SKU"})}),e(s,{sm:"2",className:"p-1 border",children:e("b",{children:"Quantity"})})]}),(w=(L=r==null?void 0:r.data)==null?void 0:L.batch_routes)==null?void 0:w.map(a=>{var t;var d=1;return p++,c("div",{className:"p-1 border",children:[c(i,{children:[e(s,{sm:"1",className:"p-1 ",children:p}),c(s,{sm:"4",className:"p-1 ",children:["Route: ",a.batch_code," ="," ",a.batch_route_name]}),c(s,{sm:"7",className:"p-1 ",children:["Next station ",">>>"," ",a.next_station,e("hr",{})]})]},a.id),(t=a==null?void 0:a.items)==null?void 0:t.map(n=>(N++,d++,c(i,{children:[e(s,{sm:"2",className:"p-1",children:e("img",{src:n.item_thumb,alt:"Item Thumbnail",height:60})}),e(s,{sm:"1",className:"p-1",children:N}),e(s,{sm:"1",className:"p-1",children:d}),c(s,{sm:"2",className:"p-1",children:["***",n.item_table_id,e("br",{}),e("a",{href:`/customer-order-edit/${n.order_5p}`,target:"_blank",children:n.short_order})]}),c(s,{sm:"3",className:"p-1",children:[n.order_date.substring(0,10),e("br",{}),n.store_name]}),e(s,{sm:"1",className:"p-1",children:n.item_code}),e(s,{sm:"2",className:"p-1",children:n.quantity})]}))),c(i,{children:[e(s,{sm:"10",className:"p-1"}),e(s,{sm:"2",className:"p-1",children:c("span",{children:[d-1," of"," ",a.batch_max_units," Max"]})})]})]})})]}):e("h4",{className:"text-center",children:"No batches to create."})}),e(j,{tabId:"1",children:o?e("div",{className:"text-center",children:e("h4",{children:"Loading..."})}):((P=(D=r==null?void 0:r.data)==null?void 0:D.batch_routes)==null?void 0:P.length)>0?c("span",{children:[c(i,{children:[e(s,{sm:"2",className:"p-1 border",children:e("b",{children:"Batch #"})}),e(s,{sm:"1",className:"p-1 border",children:e("b",{children:"S.L #"})}),e(s,{sm:"1",className:"p-1 border",children:e("b",{children:"Batch S.L #"})}),e(s,{sm:"2",className:"border",children:c("b",{children:["Item ID ",e("br",{}),"Order #"]})}),e(s,{sm:"3",className:" border",children:c("b",{children:["Order date",e("br",{}),"Store"]})}),e(s,{sm:"1",className:"p-1 border",children:e("b",{children:"SKU"})}),e(s,{sm:"2",className:"p-1 border",children:e("b",{children:"Quantity"})})]}),(F=($=r==null?void 0:r.data)==null?void 0:$.batch_routes)==null?void 0:F.map(a=>{var t;var d=1;return p++,c("div",{className:"p-1 border",children:[c(i,{children:[e(s,{sm:"1",className:"p-1 ",children:p}),c(s,{sm:"4",className:"p-1 ",children:["Route: ",a.batch_code," ="," ",a.batch_route_name]}),c(s,{sm:"7",className:"p-1 ",children:["Next station ",">>>"," ",a.next_station,e("hr",{})]})]},a.id),(t=a==null?void 0:a.items)==null?void 0:t.map(n=>(N++,d++,c(i,{children:[e(s,{sm:"2",className:"p-1",children:e("img",{src:n.item_thumb,alt:"Item Thumbnail",height:60})}),e(s,{sm:"1",className:"p-1",children:N}),e(s,{sm:"1",className:"p-1",children:d}),c(s,{sm:"2",className:"p-1",children:["***",n.item_table_id,e("br",{}),e("a",{href:`/customer-order-edit/${n.order_5p}`,target:"_blank",children:n.short_order})]}),c(s,{sm:"3",className:"p-1",children:[n.order_date.substring(0,10),e("br",{}),n.store_name]}),e(s,{sm:"1",className:"p-1",children:n.item_code}),e(s,{sm:"2",className:"p-1",children:n.quantity})]}))),c(i,{children:[e(s,{sm:"10",className:"p-1"}),e(s,{sm:"2",className:"p-1",children:c("span",{children:[d-1," of"," ",a.batch_max_units," Max"]})})]})]})})]}):e("h4",{className:"text-center",children:"No batches to create."})})]})]})})})]})})};export{de as default};
