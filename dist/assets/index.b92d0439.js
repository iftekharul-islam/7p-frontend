import{k as I,aG as q,r as p,a as z,d9 as D,j as r,f as n,Q as E,S as G,bn as k,V as M,X as m,Y as s,a0 as B,d7 as u,G as O,L as P,I as t,d8 as Q}from"./index.a20de6aa.js";import{h as W}from"./moment.4d75c86c.js";import{a as H}from"./App.ca33e514.js";const $=()=>{var _,g,N;const l=H(),Y=I(),{id:a}=q(),[o,c]=p.exports.useState(!0),{listData:d,searchParams:i}=z(e=>e==null?void 0:e.qualityControls);p.exports.useEffect(async()=>{a?(c(!0),await l(D(a)),c(!1)):Y("/quality-control")},[a]);const j=async()=>{const e=await l(Q());console.log("\u{1F680} ~ file: index.js:39 ~ handleSearch ~ res:",e)};return r(p.exports.Fragment,{children:n(E,{children:[r(G,{children:r("h4",{className:"card-title",children:o?n("span",{children:["Please Wait ",r(k,{size:"sm"})]}):(_=d==null?void 0:d.station)==null?void 0:_.station_description})}),n(M,{children:[n(m,{className:"mb-1",children:[r(s,{md:"2",children:r(B,{type:"text",placeholder:"Enter Batch",value:i==null?void 0:i.batch_number,onChange:e=>l(u({batch_number:e.target.value}))})}),r(s,{md:"2",children:r(B,{type:"text",value:i==null?void 0:i.user_barcode,onChange:e=>l(u({user_barcode:e.target.value}))})}),r(s,{md:"2",children:r(O,{color:"primary",onClick:j,disabled:o,children:o?"Please Wait...":"Open Batch"})})]}),((g=d==null?void 0:d.batches)==null?void 0:g.length)>0?n("div",{children:[n(m,{children:[r(s,{md:"2",className:"p-1 border",children:"Batch"}),r(s,{md:"1",className:"p-1 border",children:"First order"}),r(s,{md:"1",className:"p-1 border",children:"Lines"}),r(s,{md:"3",className:"p-1 border",children:"Last Scan"}),r(s,{md:"2",className:"p-1 border"}),r(s,{md:"3",className:"p-1 border"})]}),(N=d==null?void 0:d.batches)==null?void 0:N.map((e,w)=>{var f,x,C,y,v,S,L;return r(P,{onClick:F=>{F.preventDefault(),l(u({batch_number:e==null?void 0:e.batch_number}))},children:n(m,{children:[n(s,{md:"2",className:"p-1 border",children:[e==null?void 0:e.batch_number,(e==null?void 0:e.store)&&n(t,{children:[r("br",{}),(f=e==null?void 0:e.store)==null?void 0:f.store_name]})]}),r(s,{md:"1",className:"p-1 border",children:W(e==null?void 0:e.min_order_date).format("YYYY-MM-DD")}),r(s,{md:"1",className:"p-1 border",children:(x=e==null?void 0:e.items_count)!=null?x:0}),n(s,{md:"3",className:"p-1 border",children:[(e==null?void 0:e.scanned_in)&&((C=e==null?void 0:e.scanned_in)==null?void 0:C.station_id)==(e==null?void 0:e.station_id)&&n(t,{children:[n("strong",{children:["QC in Progress by"," ",(v=(y=e==null?void 0:e.scanned_in)==null?void 0:y.in_user)==null?void 0:v.username]}),r("br",{})]}),e==null?void 0:e.change_date]}),e!=null&&e.first_item?n(t,{children:[r(s,{md:"2",className:"p-1 border",children:r("img",{src:(S=e==null?void 0:e.first_item)==null?void 0:S.item_thumb,width:"70",height:"70"})}),r(s,{md:"3",className:"p-1 border",children:(L=e==null?void 0:e.first_item)==null?void 0:L.item_description})]}):r(s,{md:"5",className:"p-1 border",children:"No Items"})]},w)})})]}):r(m,{children:r(s,{md:"12",children:r("h4",{className:"text-center",children:o?n("span",{children:[r(k,{size:"sm"}),"Data Loading"]}):"No batches in station."})})})]})]})})};export{$ as default};
