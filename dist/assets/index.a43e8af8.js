import{a as O,r as y,c5 as U,f as s,Y as v,j as r,Z as n,a0 as f,a1 as i,G as T,aF as B,c2 as W,c1 as Z,c6 as H,c7 as M,c8 as w,aA as R,aB as q,aC as A,aD as z,c9 as G,I as j,ca as J,cb as Q,cc as Y,cd as $,$ as K,Q as X,S as V,T as ee,V as re,ce as le,cf as se}from"./index.5fe5f7df.js";/* empty css                  */import{a as F,M as ne,s as C}from"./App.bc1d8e0c.js";import{E as ce}from"./eye.f2154f94.js";import{F as oe}from"./index.3370a612.js";import{S as I}from"./react-select.esm.77870ec9.js";import{D as P,d as he,r as ie}from"./react-draft-wysiwyg.81d1551d.js";import{A as pe}from"./react-select-async.esm.c5442d50.js";import"./emotion-memoize.esm.06f0e458.js";const _e=(e,c,p,a)=>{var m;const x=F();return O(h=>h.manualOrders),y.exports.useEffect(()=>{x(U())},[]),s(y.exports.Fragment,{children:[s(v,{className:"pt-2",children:[r(n,{sm:"5",children:s(v,{children:[s(n,{sm:"12",children:[r("h4",{children:"Ship To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_full_name",children:"Full Name"}),r(i,{type:"text",name:"ship_full_name",id:"ship_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.ship_full_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_company_name",children:"Company"}),r(i,{type:"text",name:"ship_company_name",id:"ship_company_name",placeholder:"Enter Company",value:e==null?void 0:e.ship_company_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_address_1",children:"Street"}),r(i,{type:"text",name:"ship_address_1",id:"ship_address_1",placeholder:"Enter Street",value:e==null?void 0:e.ship_address_1,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_first_name",children:"First/Last"}),r(i,{type:"text",name:"ship_first_name",id:"ship_first_name",placeholder:"Enter First",value:e==null?void 0:e.ship_first_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_last_name",children:"."}),r(i,{type:"text",name:"ship_last_name",id:"ship_last_name",placeholder:"Enter Last",value:e==null?void 0:e.ship_last_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_address_2",children:"Line 2"}),r(i,{type:"text",name:"ship_address_2",id:"ship_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.ship_address_2,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_city",children:"City"}),r(i,{type:"text",name:"ship_city",id:"ship_city",placeholder:"Enter City",value:e==null?void 0:e.ship_city,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_state",children:"State"}),r(i,{type:"text",name:"ship_state",id:"ship_state",placeholder:"State",value:e==null?void 0:e.ship_state,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_zip",children:"ZipCode"}),r(i,{type:"text",name:"ship_zip",id:"ship_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.ship_zip,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_country",children:"Country"}),r(i,{type:"text",name:"ship_country",id:"ship_country",placeholder:"Enter Country",value:e==null?void 0:e.ship_country,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"ship_phone",children:"Phone"}),r(i,{type:"text",name:"ship_phone",id:"ship_phone",placeholder:"Enter Phone",value:e==null?void 0:e.ship_phone,onChange:c})]})]})}),r(n,{sm:"2"}),r(n,{sm:"5",children:s(v,{children:[s(n,{sm:"12",children:[r("h4",{children:"Bill To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_full_name",children:"Full Name"}),r(i,{type:"text",name:"bill_full_name",id:"bill_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.bill_full_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_company_name",children:"Company"}),r(i,{type:"text",name:"bill_company_name",id:"bill_company_name",placeholder:"Enter Company",value:e==null?void 0:e.bill_company_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_address_2",children:"Line 2"}),r(i,{type:"text",name:"bill_address_2",id:"bill_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.bill_address_2,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_first_name",children:"First/Last"}),r(i,{type:"text",name:"bill_first_name",id:"bill_first_name",placeholder:"Enter First",value:e==null?void 0:e.bill_first_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_last_name",children:"."}),r(i,{type:"text",name:"bill_last_name",id:"bill_last_name",placeholder:"Enter Last",value:e==null?void 0:e.bill_last_name,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_address_1",children:"Street"}),r(i,{type:"text",name:"bill_address_1",id:"bill_address_1",placeholder:"Enter Street",value:e==null?void 0:e.bill_address_1,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_city",children:"City"}),r(i,{type:"text",name:"bill_city",id:"bill_city",placeholder:"Enter City",value:e==null?void 0:e.bill_city,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_state",children:"State"}),r(i,{type:"text",name:"bill_state",id:"bill_state",placeholder:"State",value:e==null?void 0:e.bill_state,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_zip",children:"ZipCode"}),r(i,{type:"text",name:"bill_zip",id:"bill_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.bill_zip,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_country",children:"Country"}),r(i,{type:"text",name:"bill_country",id:"bill_country",placeholder:"Enter Country",value:e==null?void 0:e.bill_country,onChange:c})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"bill_phone",children:"Phone"}),r(i,{type:"text",name:"bill_phone",id:"bill_phone",placeholder:"Enter Phone",value:e==null?void 0:e.bill_phone,onChange:c})]})]})})]}),r("hr",{}),s(v,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(f,{className:"form-label",for:"bill_email",children:"Email"})}),r(n,{sm:"3",children:r(i,{type:"text",name:"bill_email",id:"bill_email",placeholder:"Enter Email",value:(m=e==null?void 0:e.customer)==null?void 0:m.bill_email,onChange:c})}),s(n,{sm:"2",className:"d-flex align-items-center",children:[r("div",{onClick:h=>{a(!0),h.preventDefault()},children:r(ne,{size:20,className:"mx-1"})}),"|",r(ce,{size:20,className:"mx-1"})]})]}),s(v,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(f,{className:"form-label",for:"order_comments",children:"Customer comment"})}),r(n,{sm:"3",children:r(i,{type:"text",name:"order_comments",id:"order_comments",placeholder:"Enter Customer comment",value:e==null?void 0:e.order_comments,onChange:c})})]}),s(v,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(f,{className:"form-label",for:"ship_message",children:"Shipper Message"})}),r(n,{sm:"3",children:r(i,{type:"textarea",name:"ship_message",id:"ship_message",placeholder:"Enter Shipper Message",value:e==null?void 0:e.ship_message,onChange:c})})]})]})},ue=(e,c,p,a)=>{var x,m,h,u,t,d,l,_;return y.exports.useEffect(()=>{var b,N,o,k,g,E,S;c({target:{name:"total",value:parseFloat(parseFloat((b=e==null?void 0:e.subtotal)!=null?b:0)-parseFloat((N=e==null?void 0:e.coupon_value)!=null?N:0)+parseFloat((o=e==null?void 0:e.gift_wrap_cost)!=null?o:0)+parseFloat((k=e==null?void 0:e.shipping_charge)!=null?k:0)+parseFloat((g=e==null?void 0:e.insurance)!=null?g:0)+parseFloat((E=e==null?void 0:e.adjustments)!=null?E:0)+parseFloat((S=e==null?void 0:e.tax_charge)!=null?S:0)).toFixed(2)}})},[e==null?void 0:e.subtotal,e==null?void 0:e.coupon_value,e==null?void 0:e.gift_wrap_cost,e==null?void 0:e.shipping_charge,e==null?void 0:e.insurance,e==null?void 0:e.adjustments,e==null?void 0:e.tax_charge]),r(y.exports.Fragment,{children:s(v,{className:"pt-2",children:[r(n,{sm:"7"}),s(n,{sm:"5",children:[s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Subtotal:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"subtotal",id:"subtotal",value:(x=e==null?void 0:e.subtotal)!=null?x:0,disabled:!0})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Coupon-discount:"}),r(n,{sm:"4",children:r(i,{type:"text",name:"coupon_id",id:"coupon_id",placeholder:"Coupon id",value:e==null?void 0:e.coupon_id,onChange:c})}),r(n,{sm:"4",children:r(i,{type:"number",name:"coupon_value",id:"coupon_value",value:(m=e==null?void 0:e.coupon_value)!=null?m:0,onChange:c})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Gift Wrap:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"gift_wrap_cost",id:"gift_wrap_cost",value:(h=e==null?void 0:e.gift_wrap_cost)!=null?h:0,onChange:c})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Shipping:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"shipping_charge",id:"shipping_charge",value:(u=e==null?void 0:e.shipping_charge)!=null?u:0,onChange:c})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Insurance:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"insurance",id:"insurance",value:(t=e==null?void 0:e.insurance)!=null?t:0,onChange:c})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Adjustments:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"adjustments",id:"adjustments",value:(d=e==null?void 0:e.adjustments)!=null?d:0,onChange:c})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Tax:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"tax_charge",id:"tax_charge",value:(l=e==null?void 0:e.tax_charge)!=null?l:0,onChange:c})})]}),s(v,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Total:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"total",id:"total",value:(_=e==null?void 0:e.total)!=null?_:0,disabled:!0})})]}),r(v,{children:r(n,{sm:"12",className:"mt-1",children:r("div",{className:"d-flex justify-content-end",children:r(T,{className:"me-1",color:"primary",type:"submit",onClick:b=>{b.preventDefault(),p()},children:"Update Order"})})})})]})]})})},fe=(e,c,p,a)=>{var l,_,b,N;console.log("\u{1F680} ~ file: Details.js:18 ~ Details ~ data:",e);const x=F(),{id:m}=B(),h=O(o=>o.orders);y.exports.useEffect(()=>{x(W()),x(Z())},[]);const u=o=>{x(H({id:m,store_select:o==null?void 0:o.value})),c({target:{name:"store_id",value:o==null?void 0:o.value}})},t=o=>{x(M({id:m,shipping_method:o==null?void 0:o.value})),c({target:{name:"shipping_method",value:o==null?void 0:o.value}})},d=o=>{x(M({id:m,ship_date:o[0]})),c({target:{name:"ship_date",value:o[0]}})};return s(y.exports.Fragment,{children:[s(v,{children:[s(n,{sm:"4",children:[s("div",{children:["Order: ",e==null?void 0:e.order_id]}),s("div",{children:["Date: ",e==null?void 0:e.order_date]}),(e==null?void 0:e.purchase_order)&&s("div",{children:["PO: ",e==null?void 0:e.purchase_order]})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"store",children:"Store"}),r(I,{className:"react-select",classNamePrefix:"select",theme:C,placeholder:"Select Store",options:h==null?void 0:h.storeOptions,value:(l=h==null?void 0:h.storeOptions)==null?void 0:l.find(o=>(o==null?void 0:o.value)===(e==null?void 0:e.store_id)),onChange:u})]}),r(n,{sm:"4"})]}),r("hr",{}),s(v,{children:[r(n,{sm:"2"}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"store",children:"Ship Via"}),r(I,{className:"react-select",classNamePrefix:"select",theme:C,placeholder:"Ship Via",options:h==null?void 0:h.shipOptions,value:(_=h==null?void 0:h.shipOptions)==null?void 0:_.find(o=>{var k,g;if(((k=e==null?void 0:e.store)==null?void 0:k.change_method)=="1"&&(e==null?void 0:e.carrier)!="MN")return(o==null?void 0:o.value)===`${e==null?void 0:e.carrier}*${e==null?void 0:e.method}`;if(((g=e==null?void 0:e.store)==null?void 0:g.change_method)=="1")return(o==null?void 0:o.value)===`${e==null?void 0:e.carrier}*`;if(e!=null&&e.carrier)return{label:(e==null?void 0:e.carrier)+(e==null?void 0:e.method),value:(e==null?void 0:e.carrier)+(e==null?void 0:e.method)};o==null||o.value}),isDisabled:((b=e==null?void 0:e.store)==null?void 0:b.change_method)!="1",onChange:t})]}),s(n,{sm:"4",children:[r(f,{className:"form-label",for:"date",children:"Ship By Date"}),r(oe,{className:"form-control",id:"date",placeholder:"Select Date",value:(N=e==null?void 0:e.ship_date)!=null?N:null,options:{dateFormat:"d-m-Y"},onChange:d})]}),s(n,{sm:"2",className:"d-flex align-items-end",children:[(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7&&r("div",{children:(e==null?void 0:e.carrier)=="MN"&&(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7?r(T,{color:"info",onClick:o=>o.preventDefault(),children:(order==null?void 0:order.method)!=""?order==null?void 0:order.method:"Manual Ship"}):(e==null?void 0:e.batched)==0&&(e==null?void 0:e.order_status)!=6&&(e==null?void 0:e.order_status)!=8?r(T,{color:"info",onClick:o=>o.preventDefault(),children:"Ship"}):(e==null?void 0:e.order_status)==10&&r(T,{color:"info",onClick:o=>o.preventDefault(),children:"Re-Ship Returned Package"})}),((e==null?void 0:e.batched)===0||(e==null?void 0:e.batched)<=2)&&r(T,{color:"info",onClick:()=>{var o;return a((o=e==null?void 0:e.order)==null?void 0:o.id)},children:"Batch"})]})]})]})},te=(e,c,p)=>{var d;const[a,x]=y.exports.useState(()=>P.EditorState.createEmpty());y.exports.useEffect(()=>{if(a){const l=he(P.convertToRaw(a.getCurrentContent()));t({...u,message:l})}},[a]);const m=F(),h=O(l=>l.orders),[u,t]=y.exports.useState(null);return y.exports.useEffect(()=>{var l;t({order_5p:p==null?void 0:p.id,recipient:(l=p==null?void 0:p.customer)==null?void 0:l.bill_email,subject:`Order ${p==null?void 0:p.short_order}`,message_types:0,message:""})},[p]),y.exports.useEffect(()=>{m(w())},[]),y.exports.useEffect(()=>{m(w())},[]),r("div",{children:s(R,{isOpen:e,toggle:()=>c(!e),className:"modal-dialog-centered modal-lg",fullscreen:"sm",children:[r(q,{toggle:()=>c(!e),children:"Send email to customer"}),s(A,{children:[s("div",{children:[r(f,{className:"form-label",for:"email",children:"Email"}),r(i,{type:"email",id:"email",value:u==null?void 0:u.recipient,onChange:l=>{var _;return t({...u,recipient:(_=l==null?void 0:l.target)==null?void 0:_.value})},placeholder:"Email Address"})]}),s("div",{children:[r(f,{className:"form-label",for:"email",children:"Type"}),r(I,{className:"react-select",classNamePrefix:"select",theme:C,placeholder:"Select Type",options:h==null?void 0:h.emailTypeOptions,value:(d=h==null?void 0:h.emailTypeOptions)==null?void 0:d.find(l=>(l==null?void 0:l.value)===(u==null?void 0:u.message_types)),onChange:l=>t({...u,message_types:l==null?void 0:l.value})})]}),s("div",{children:[r(f,{className:"form-label",for:"email",children:"Subject"}),r(i,{type:"text",id:"text",value:u==null?void 0:u.subject,onChange:l=>{var _;return t({...u,subject:(_=l==null?void 0:l.target)==null?void 0:_.value})},placeholder:"Enter Subject"})]}),r("div",{children:r(ie.exports.Editor,{editorState:a,onEditorStateChange:l=>x(l),wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class"})})]}),r(z,{children:r(T,{color:"primary",onClick:l=>{l.preventDefault(),m(G(u)),c(!e)},children:"Send"})})]})})};function L(e){if(e[0])return e.substring(0,3)==="927"||e[0]==="8"?`https://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e[0]==="L"||e[0]==="U"?`https://tools.usps.com/go/TrackConfirmAction?qtc_tLabels1=${e}`:e.substring(0,3)==="937"?`http://webtrack.dhlglobalmail.com/?trackingnumber=${e}`:e.substring(0,2)==="94"||e.substring(0,3)==="927"?`https://tools.usps.com/go/TrackConfirmAction?tLabels=${e}`:e[0]==="2"||e[0]==="7"?`http://www.fedex.com/Tracking?tracknumbers=${e}`:e.substring(0,2)==="1Z"?`http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e.substring(0,2)==="42"?`https://webtrack.dhlecs.com/?trackingnumber=${e}`:"#"}function be({item:e,setShowTracking:c,setItemTracking:p}){var x,m,h;const a=(u,t)=>{console.log("redo item")};return r("span",{children:(e==null?void 0:e.item_status)==="production"?e!=null&&e.batch?s("p",{children:["View batch:",r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),(e==null?void 0:e.batch.station)&&s(j,{children:[r("br",{}),s("span",{children:[e==null?void 0:e.batch.station.station_name," ",e==null?void 0:e.batch.station.station_description]}),r("br",{}),e==null?void 0:e.batch.change_date]})]}):(e==null?void 0:e.batch_number)!=="0"?r("p",{children:"No Batch Record"}):r("p",{children:"Unbatched"}):(e==null?void 0:e.item_status)==="wap"?e!=null&&e.wap_item?s(j,{children:[s("p",{children:["WAP Bin"," ",r("a",{href:`/wap/details/${(x=e==null?void 0:e.wap_item)==null?void 0:x.bin_id}`,target:"_blank",children:(m=e==null?void 0:e.wap_item)==null?void 0:m.bin.name})]}),r("p",{children:"Added:"}),r("p",{children:(h=e==null?void 0:e.wap_item)==null?void 0:h.created_at})]}):r("p",{children:"WAP BIN: NOT FOUND"}):(e==null?void 0:e.item_status)==="rejected"&&(e==null?void 0:e.rejection)?(e==null?void 0:e.rejection.graphic_status)!=="Redo Item"?s(j,{children:[r("p",{children:"Rejected"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),(e==null?void 0:e.rejection.rejection_reason_info)&&s(j,{children:[r("br",{}),e==null?void 0:e.rejection.rejection_reason_info.rejection_message]}),r("br",{}),e==null?void 0:e.rejection.rejection_message,r("br",{}),e==null?void 0:e.rejection.created_at]}):s(j,{children:[r("p",{children:"Redo"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),(e==null?void 0:e.rejection.rejection_reason_info)&&s(j,{children:[r("br",{}),e==null?void 0:e.rejection.rejection_reason_info.rejection_message]}),r("br",{}),e==null?void 0:e.rejection.rejection_message,r("br",{}),e==null?void 0:e.rejection.created_at]}):(e==null?void 0:e.item_status)==="rejected"&&!(e!=null&&e.rejection)?r("p",{children:"REJECTED BUT NO REJECTION RECORD"}):(e==null?void 0:e.item_status)==="back order"?(()=>{let u=0;return e!=null&&e.inventoryunit&&(e==null||e.inventoryunit.forEach(t=>{t.open_po&&t.open_po.eta>u&&(u=t.open_po.eta)})),s(j,{children:[r("p",{children:"Back Order"}),!(e!=null&&e.batch)&&r("p",{children:"Unbatched"}),u>0&&s("p",{children:["ETA: ",u]})]})})():(e==null?void 0:e.item_status)!=="shipped"?s(j,{children:[r("p",{children:e==null?void 0:e.item_status}),(e==null?void 0:e.batch)&&s(j,{children:[r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),r("br",{}),e==null?void 0:e.batch.change_date]})]}):(e==null?void 0:e.shipInfo)&&(e==null?void 0:e.shipInfo.tracking_number)?s(j,{children:[r("a",{href:`/shipping?search_for_first=${e==null?void 0:e.shipInfo.unique_order_id}&search_in_first=unique_order_id`,children:"Shipped"})," ","on"," ",new Date((e==null?void 0:e.shipInfo.postmark_date)||Date.now()).toLocaleDateString(),r("br",{}),!(e!=null&&e.shipInfo.mail_class.toLowerCase().includes("innovation"))&&s(j,{children:[e==null?void 0:e.shipInfo.mail_class,r("br",{})]}),s("a",{href:L(e==null?void 0:e.shipInfo.shipping_id),target:"_blank",children:["Trk# ",e==null?void 0:e.shipInfo.shipping_id]}),r("br",{}),(e==null?void 0:e.batch)&&s(j,{children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:["Batch ",e==null?void 0:e.batch_number]}),r("br",{})]}),r("br",{}),r("button",{id:"redo-item",onClick:()=>a(e==null?void 0:e.id,e==null?void 0:e.item_quantity),className:"btn btn-xs btn-danger",children:"Redo Item"})]}):(e==null?void 0:e.item_status)==="shipped"&&(e==null?void 0:e.tracking_number)!==null?s("a",{href:L(e==null?void 0:e.tracking_number),target:"_blank",children:["Trk# ",e==null?void 0:e.tracking_number]}):(e==null?void 0:e.item_status)!=="shipped"&&(e==null?void 0:e.item_status)!=="cancelled"&&order.carrier!=="MN"?s(j,{children:[r("br",{}),r("br",{}),r("button",{id:"shipitem",onClick:u=>{u.preventDefault(),c(!0),p(e)},className:"btn btn-xs btn-success",children:"Enter Tracking"})]}):null})}const de=(e,c,p,a,x)=>{var d;const m=F(),h=async l=>{let _=[];return l.length>3?(_=await m(J(l)),_==null?void 0:_.payload):[]},u=l=>{var b,N,o,k,g,E,S;const _=(b=e==null?void 0:e.items)==null?void 0:b.map(D=>({...D}));_==null||_.push({item_id:(N=l==null?void 0:l.data)==null?void 0:N.item_id,child_sku:(o=l==null?void 0:l.data)==null?void 0:o.product_model,id_catalog:(k=l==null?void 0:l.data)==null?void 0:k.id_catalog,item_description:(g=l==null?void 0:l.data)==null?void 0:g.product_name,item_thumb:(E=l==null?void 0:l.data)==null?void 0:E.product_thumb,item_unit_price:(S=l==null?void 0:l.data)==null?void 0:S.product_price,item_quantity:1,is_new:!0}),c({target:{name:"items",value:_}})},t=(l,_)=>{var N,o,k;const b=(N=e==null?void 0:e.items)==null?void 0:N.map(g=>({...g}));b[_][(o=l.target)==null?void 0:o.name]=(k=l.target)==null?void 0:k.value,c({target:{name:"items",value:b}})};return y.exports.useEffect(()=>{const l=parseFloat(e==null?void 0:e.items.reduce(function(_,b){return parseFloat(_)+parseFloat(b==null?void 0:b.item_unit_price)*parseFloat(b==null?void 0:b.item_quantity)},0)).toFixed(2);c({target:{name:"subtotal",value:l}})},[e==null?void 0:e.items]),s(y.exports.Fragment,{children:[s(v,{className:"rounded bg-secondary p-1 my-1 text-uppercase",children:[r(n,{sm:"1 text-light fw-bolder ",children:"Image"}),r(n,{sm:"3 text-light fw-bolder",children:"Name"}),r(n,{sm:"4 text-light fw-bolder",children:"Description"}),r(n,{sm:"1 text-light fw-bolder",children:"Quantity"}),r(n,{sm:"1 text-light fw-bolder",children:"Price"}),r(n,{sm:"1 text-light fw-bolder",children:"Total"}),r(n,{sm:"1 text-light fw-bolder",children:"Action"})]}),(d=e==null?void 0:e.items)==null?void 0:d.map((l,_)=>s(v,{className:"",children:[r(n,{sm:"1",children:r("img",{src:l==null?void 0:l.item_thumb,alt:l==null?void 0:l.child_sku,height:"50",width:"50"})}),s(n,{sm:"3",children:[r("div",{children:l==null?void 0:l.child_sku}),r("div",{children:l==null?void 0:l.item_description})]}),r(n,{sm:"4",children:r(i,{type:"text",Rows:"1",name:"options",id:"options",placeholder:"Click Here",value:l==null?void 0:l.options,onChange:b=>t(b,_)})}),r(n,{sm:"1",children:r(i,{type:"number",name:"item_quantity",id:"item_quantity",placeholder:"Item_quantity",value:l==null?void 0:l.item_quantity,onChange:b=>t(b,_)})}),r(n,{sm:"1",children:r(i,{type:"number",name:"item_unit_price",id:"item_unit_price",placeholder:"Price",value:parseFloat(l==null?void 0:l.item_unit_price).toFixed(2),onChange:b=>t(b,_)})}),r(n,{sm:"1",children:r(i,{type:"number",name:"total_price",id:"total_price",placeholder:"Price",value:parseFloat((l==null?void 0:l.item_quantity)*(l==null?void 0:l.item_unit_price)).toFixed(2),disabled:!0})}),r(n,{sm:"1",children:r(be,{item:l,setShowTracking:!0,setItemTracking:x})}),r("hr",{})]},_)),s(v,{className:"pt-2",children:[r(n,{sm:"2"}),r(n,{sm:"8",children:r(pe,{isClearable:!1,className:"react-select",classNamePrefix:"select",name:"callback-react-select",loadOptions:h,value:null,onChange:u,theme:C})}),r(n,{sm:"2"})]})]})},ye=(e,c,p,a,x)=>{var d;const m=F(),[h,u]=y.exports.useState(null);y.exports.useEffect(()=>{u({track_item_id:p==null?void 0:p.id,track_order_id:a,track_shopify_order_id:x,track_shopify_item_line_id:p==null?void 0:p.item_id,track_shopify_item_quantity:`#${p==null?void 0:p.item_id}`,method:"",track_number:""})},[p]);const t=O(l=>l.orders);return y.exports.useEffect(()=>{m(Q())},[]),r("div",{children:s(R,{isOpen:e,toggle:()=>c(!e),className:"modal-dialog-centered",children:[r(q,{toggle:()=>c(!e),children:"Enter Tracking Number"}),s(A,{children:[s("div",{children:[r(f,{className:"form-label",for:"email",children:"Ship Via"}),r(I,{className:"react-select",classNamePrefix:"select",theme:C,placeholder:"Select Type",options:t==null?void 0:t.shippingMethodOptions,value:(d=t==null?void 0:t.shippingMethodOptions)==null?void 0:d.find(l=>(l==null?void 0:l.value)===(h==null?void 0:h.method)),onChange:l=>u({...h,method:l==null?void 0:l.value})})]}),s("div",{children:[r(f,{className:"form-label",for:"email",children:"Tracking Number"}),r(i,{type:"text",id:"text",value:h==null?void 0:h.subject,onChange:l=>{var _;return u({...h,track_number:(_=l==null?void 0:l.target)==null?void 0:_.value})},placeholder:"Enter Tracking Number"})]})]}),r(z,{children:r(T,{color:"primary",onClick:l=>{l.preventDefault(),m(Y(h)),c(!e)},children:"Ship Item"})})]})})},je=()=>{const{id:e}=B(),c=F(),p=O(g=>g.orders),[a,x]=y.exports.useState(!1),[m,h]=y.exports.useState(!1),[u,t]=y.exports.useState(null),[d,l]=y.exports.useState({items:[]}),[_,b]=y.exports.useState(null);y.exports.useEffect(()=>{c($(e))},[e]),y.exports.useEffect(()=>{p!=null&&p.order&&l(p==null?void 0:p.order)},[p==null?void 0:p.order]);const N=g=>{var E,S;l({...d,[(E=g.target)==null?void 0:E.name]:(S=g.target)==null?void 0:S.value})},o=async()=>{var E,S,D;const g=await c(le({data:d,id:e}));(E=g==null?void 0:g.payload)!=null&&E.status?c($(e)):b((D=(S=g==null?void 0:g.payload)==null?void 0:S.data)==null?void 0:D.errors)},k=async g=>{var S;const E=await c(se(e));(S=E==null?void 0:E.payload)!=null&&S.status&&c($(e))};return r(y.exports.Fragment,{children:r(v,{children:r(K,{children:r(n,{sm:"12",children:s(X,{children:[r(V,{children:r(ee,{tag:"h4",children:"Edit Order"})}),s(re,{children:[fe(d,N,_,k),_e(d,N,_,x),de(d,N,_,h,t),ue(d,N,o),ye(m,h,u,d==null?void 0:d.id,d==null?void 0:d.short_order),te(a,x,d)]})]})})})})})};export{je as default};
