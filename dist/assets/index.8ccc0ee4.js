import{a as R,r as x,ce as K,f as s,Y as a,j as r,Z as n,a0 as b,a1 as _,L as A,H as I,aG as B,cb as Q,ca as X,cf as V,cg as z,ch as U,aE as H,aK as J,aL as G,aM as Y,ci as ee,J as $,cj as re,ck as le,cl as se,cm as ne,cn as ce,co as q,$ as oe,S as he,T as pe,V as ie,W as _e,cp as ue,cq as fe}from"./index.b5767533.js";/* empty css                  */import{a as w,M as te,s as P}from"./App.bf73fcbb.js";import{E as be}from"./eye.27515724.js";import{F as de}from"./index.9962df18.js";import{S as L}from"./react-select.esm.97e349dc.js";import{D as W,d as ye,r as ge}from"./react-draft-wysiwyg.4ab987b1.js";import{A as ve}from"./react-select-async.esm.92c5e197.js";import"./emotion-memoize.esm.06f0e458.js";const xe=(e,c,f,j)=>{var v,i;const E=w();return R(t=>t.manualOrders),x.exports.useEffect(()=>{E(K())},[]),s(x.exports.Fragment,{children:[s(a,{className:"pt-2",children:[r(n,{sm:"5",children:s(a,{children:[s(n,{sm:"12",children:[r("h4",{children:"Ship To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_full_name",children:"Full Name"}),r(_,{type:"text",name:"ship_full_name",id:"ship_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.ship_full_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_company_name",children:"Company"}),r(_,{type:"text",name:"ship_company_name",id:"ship_company_name",placeholder:"Enter Company",value:e==null?void 0:e.ship_company_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_address_1",children:"Street"}),r(_,{type:"text",name:"ship_address_1",id:"ship_address_1",placeholder:"Enter Street",value:e==null?void 0:e.ship_address_1,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_first_name",children:"First/Last"}),r(_,{type:"text",name:"ship_first_name",id:"ship_first_name",placeholder:"Enter First",value:e==null?void 0:e.ship_first_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_last_name",children:"."}),r(_,{type:"text",name:"ship_last_name",id:"ship_last_name",placeholder:"Enter Last",value:e==null?void 0:e.ship_last_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_address_2",children:"Line 2"}),r(_,{type:"text",name:"ship_address_2",id:"ship_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.ship_address_2,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_city",children:"City"}),r(_,{type:"text",name:"ship_city",id:"ship_city",placeholder:"Enter City",value:e==null?void 0:e.ship_city,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_state",children:"State"}),r(_,{type:"text",name:"ship_state",id:"ship_state",placeholder:"State",value:e==null?void 0:e.ship_state,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_zip",children:"ZipCode"}),r(_,{type:"text",name:"ship_zip",id:"ship_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.ship_zip,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_country",children:"Country"}),r(_,{type:"text",name:"ship_country",id:"ship_country",placeholder:"Enter Country",value:e==null?void 0:e.ship_country,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"ship_phone",children:"Phone"}),r(_,{type:"text",name:"ship_phone",id:"ship_phone",placeholder:"Enter Phone",value:e==null?void 0:e.ship_phone,onChange:c})]})]})}),r(n,{sm:"2"}),r(n,{sm:"5",children:s(a,{children:[s(n,{sm:"12",children:[r("h4",{children:"Bill To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_full_name",children:"Full Name"}),r(_,{type:"text",name:"bill_full_name",id:"bill_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.bill_full_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_company_name",children:"Company"}),r(_,{type:"text",name:"bill_company_name",id:"bill_company_name",placeholder:"Enter Company",value:e==null?void 0:e.bill_company_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_address_2",children:"Line 2"}),r(_,{type:"text",name:"bill_address_2",id:"bill_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.bill_address_2,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_first_name",children:"First/Last"}),r(_,{type:"text",name:"bill_first_name",id:"bill_first_name",placeholder:"Enter First",value:e==null?void 0:e.bill_first_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_last_name",children:"."}),r(_,{type:"text",name:"bill_last_name",id:"bill_last_name",placeholder:"Enter Last",value:e==null?void 0:e.bill_last_name,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_address_1",children:"Street"}),r(_,{type:"text",name:"bill_address_1",id:"bill_address_1",placeholder:"Enter Street",value:e==null?void 0:e.bill_address_1,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_city",children:"City"}),r(_,{type:"text",name:"bill_city",id:"bill_city",placeholder:"Enter City",value:e==null?void 0:e.bill_city,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_state",children:"State"}),r(_,{type:"text",name:"bill_state",id:"bill_state",placeholder:"State",value:e==null?void 0:e.bill_state,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_zip",children:"ZipCode"}),r(_,{type:"text",name:"bill_zip",id:"bill_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.bill_zip,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_country",children:"Country"}),r(_,{type:"text",name:"bill_country",id:"bill_country",placeholder:"Enter Country",value:e==null?void 0:e.bill_country,onChange:c})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"bill_phone",children:"Phone"}),r(_,{type:"text",name:"bill_phone",id:"bill_phone",placeholder:"Enter Phone",value:e==null?void 0:e.bill_phone,onChange:c})]})]})})]}),r("hr",{}),s(a,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(b,{className:"form-label",for:"bill_email",children:"Email"})}),r(n,{sm:"3",children:r(_,{type:"text",name:"bill_email",id:"bill_email",placeholder:"Enter Email",value:(v=e==null?void 0:e.customer)==null?void 0:v.bill_email,onChange:c})}),s(n,{sm:"2",className:"d-flex align-items-center",children:[r("div",{onClick:t=>{j(!0),t.preventDefault()},children:r(te,{size:20,className:"mx-1"})}),"|",r(A,{to:`/customer-order?search_for_first=${(i=e==null?void 0:e.customer)==null?void 0:i.bill_email}&operator_first=equals&search_in_first=email`,children:r(be,{size:20,className:"mx-1"})})]})]}),s(a,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(b,{className:"form-label",for:"order_comments",children:"Customer comment"})}),r(n,{sm:"3",children:r(_,{type:"text",name:"order_comments",id:"order_comments",placeholder:"Enter Customer comment",value:e==null?void 0:e.order_comments,onChange:c})})]}),s(a,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(b,{className:"form-label",for:"ship_message",children:"Shipper Message"})}),r(n,{sm:"3",children:r(_,{type:"textarea",name:"ship_message",id:"ship_message",placeholder:"Enter Shipper Message",value:e==null?void 0:e.ship_message,onChange:c})})]})]})},me=(e,c,f,j)=>{var E,v,i,t,m,d,o,N;return x.exports.useEffect(()=>{var F,T,h,l,p,u,g;c({target:{name:"total",value:parseFloat(parseFloat((F=e==null?void 0:e.subtotal)!=null?F:0)-parseFloat((T=e==null?void 0:e.coupon_value)!=null?T:0)+parseFloat((h=e==null?void 0:e.gift_wrap_cost)!=null?h:0)+parseFloat((l=e==null?void 0:e.shipping_charge)!=null?l:0)+parseFloat((p=e==null?void 0:e.insurance)!=null?p:0)+parseFloat((u=e==null?void 0:e.adjustments)!=null?u:0)+parseFloat((g=e==null?void 0:e.tax_charge)!=null?g:0)).toFixed(2)}})},[e==null?void 0:e.subtotal,e==null?void 0:e.coupon_value,e==null?void 0:e.gift_wrap_cost,e==null?void 0:e.shipping_charge,e==null?void 0:e.insurance,e==null?void 0:e.adjustments,e==null?void 0:e.tax_charge]),r(x.exports.Fragment,{children:s(a,{className:"pt-2",children:[r(n,{sm:"7"}),s(n,{sm:"5",children:[s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Subtotal:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"subtotal",id:"subtotal",value:(E=e==null?void 0:e.subtotal)!=null?E:0,disabled:!0})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Coupon-discount:"}),r(n,{sm:"4",children:r(_,{type:"text",name:"coupon_id",id:"coupon_id",placeholder:"Coupon id",value:e==null?void 0:e.coupon_id,onChange:c})}),r(n,{sm:"4",children:r(_,{type:"number",name:"coupon_value",id:"coupon_value",value:(v=e==null?void 0:e.coupon_value)!=null?v:0,onChange:c})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Gift Wrap:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"gift_wrap_cost",id:"gift_wrap_cost",value:(i=e==null?void 0:e.gift_wrap_cost)!=null?i:0,onChange:c})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Shipping:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"shipping_charge",id:"shipping_charge",value:(t=e==null?void 0:e.shipping_charge)!=null?t:0,onChange:c})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Insurance:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"insurance",id:"insurance",value:(m=e==null?void 0:e.insurance)!=null?m:0,onChange:c})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Adjustments:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"adjustments",id:"adjustments",value:(d=e==null?void 0:e.adjustments)!=null?d:0,onChange:c})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Tax:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"tax_charge",id:"tax_charge",value:(o=e==null?void 0:e.tax_charge)!=null?o:0,onChange:c})})]}),s(a,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Total:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(_,{type:"number",name:"total",id:"total",value:(N=e==null?void 0:e.total)!=null?N:0,disabled:!0})})]}),r(a,{children:r(n,{sm:"12",className:"mt-1",children:r("div",{className:"d-flex justify-content-end",children:r(I,{className:"me-1",color:"primary",type:"submit",onClick:F=>{F.preventDefault(),f()},children:"Update Order"})})})})]})]})})},Ne=(e,c,f,j)=>{var o,N,F,T;const E=w(),{id:v}=B(),i=R(h=>h.orders);x.exports.useEffect(()=>{E(Q()),E(X())},[]);const t=h=>{E(V({id:v,store_select:h==null?void 0:h.value})),c({target:{name:"store_id",value:h==null?void 0:h.value}})},m=h=>{E(z({id:v,shipping_method:h==null?void 0:h.value})),c({target:{name:"shipping_method",value:h==null?void 0:h.value}})},d=h=>{E(z({id:v,ship_date:h[0]})),c({target:{name:"ship_date",value:h[0]}})};return s(x.exports.Fragment,{children:[s(a,{children:[s(n,{sm:"4",children:[s("div",{children:["Order: ",e==null?void 0:e.order_id]}),s("div",{children:["Date: ",e==null?void 0:e.order_date]}),(e==null?void 0:e.purchase_order)&&s("div",{children:["PO: ",e==null?void 0:e.purchase_order]})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"store",children:"Store"}),r(L,{className:"react-select",classNamePrefix:"select",theme:P,placeholder:"Select Store",options:i==null?void 0:i.storeOptions,value:(o=i==null?void 0:i.storeOptions)==null?void 0:o.find(h=>(h==null?void 0:h.value)==(e==null?void 0:e.store_id)),onChange:t})]}),r(n,{sm:"4"})]}),r("hr",{}),s(a,{children:[r(n,{sm:"2"}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"store",children:"Ship Via"}),r(L,{className:"react-select",classNamePrefix:"select",theme:P,placeholder:"Ship Via",options:i==null?void 0:i.shipOptions,value:(N=i==null?void 0:i.shipOptions)==null?void 0:N.find(h=>{var l,p;if(((l=e==null?void 0:e.store)==null?void 0:l.change_method)=="1"&&(e==null?void 0:e.carrier)!="MN")return(h==null?void 0:h.value)===`${e==null?void 0:e.carrier}*${e==null?void 0:e.method}`;if(((p=e==null?void 0:e.store)==null?void 0:p.change_method)=="1")return(h==null?void 0:h.value)===`${e==null?void 0:e.carrier}*`;if(e!=null&&e.carrier)return{label:(e==null?void 0:e.carrier)+(e==null?void 0:e.method),value:(e==null?void 0:e.carrier)+(e==null?void 0:e.method)};h==null||h.value}),isDisabled:((F=e==null?void 0:e.store)==null?void 0:F.change_method)!="1",onChange:m})]}),s(n,{sm:"4",children:[r(b,{className:"form-label",for:"date",children:"Ship By Date"}),r(de,{className:"form-control",id:"date",placeholder:"Select Date",value:(T=e==null?void 0:e.ship_date)!=null?T:null,options:{dateFormat:"d-m-Y"},onChange:d})]}),s(n,{sm:"2",className:"d-flex align-items-end",children:[(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7&&r("div",{children:(e==null?void 0:e.carrier)=="MN"&&(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7?r(I,{color:"info",onClick:h=>h.preventDefault(),children:(order==null?void 0:order.method)!=""?order==null?void 0:order.method:"Manual Ship"}):(e==null?void 0:e.batched)==0&&(e==null?void 0:e.order_status)!=6&&(e==null?void 0:e.order_status)!=8?r(I,{color:"info",onClick:h=>h.preventDefault(),children:"Ship"}):(e==null?void 0:e.order_status)==10&&r(I,{color:"info",onClick:h=>h.preventDefault(),children:"Re-Ship Returned Package"})}),((e==null?void 0:e.batched)==0||(e==null?void 0:e.batched)<=2)&&r(I,{color:"info",onClick:()=>{var h;return j((h=e==null?void 0:e.order)==null?void 0:h.id)},children:"Batch"})]})]})]})},ae=(e,c,f)=>{var d;const[j,E]=x.exports.useState(()=>W.EditorState.createEmpty());x.exports.useEffect(()=>{if(j){const o=ye(W.convertToRaw(j.getCurrentContent()));m({...t,message:o})}},[j]);const v=w(),i=R(o=>o.orders),[t,m]=x.exports.useState(null);return x.exports.useEffect(()=>{var o;m({order_5p:f==null?void 0:f.id,recipient:(o=f==null?void 0:f.customer)==null?void 0:o.bill_email,subject:`Order ${f==null?void 0:f.short_order}`,message_types:0,message:""})},[f]),x.exports.useEffect(()=>{v(U())},[]),x.exports.useEffect(()=>{v(U())},[]),r("div",{children:s(H,{isOpen:e,toggle:()=>c(!e),className:"modal-dialog-centered modal-lg",fullscreen:"sm",children:[r(J,{toggle:()=>c(!e),children:"Send email to customer"}),s(G,{children:[s("div",{children:[r(b,{className:"form-label",for:"email",children:"Email"}),r(_,{type:"email",id:"email",value:t==null?void 0:t.recipient,onChange:o=>{var N;return m({...t,recipient:(N=o==null?void 0:o.target)==null?void 0:N.value})},placeholder:"Email Address"})]}),s("div",{children:[r(b,{className:"form-label",for:"email",children:"Type"}),r(L,{className:"react-select",classNamePrefix:"select",theme:P,placeholder:"Select Type",options:i==null?void 0:i.emailTypeOptions,value:(d=i==null?void 0:i.emailTypeOptions)==null?void 0:d.find(o=>(o==null?void 0:o.value)===(t==null?void 0:t.message_types)),onChange:o=>m({...t,message_types:o==null?void 0:o.value})})]}),s("div",{children:[r(b,{className:"form-label",for:"email",children:"Subject"}),r(_,{type:"text",id:"text",value:t==null?void 0:t.subject,onChange:o=>{var N;return m({...t,subject:(N=o==null?void 0:o.target)==null?void 0:N.value})},placeholder:"Enter Subject"})]}),r("div",{children:r(ge.exports.Editor,{editorState:j,onEditorStateChange:o=>E(o),wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class"})})]}),r(Y,{children:r(I,{color:"primary",onClick:o=>{o.preventDefault(),v(ee(t)),c(!e)},children:"Send"})})]})})};function Z(e){if(e[0])return e.substring(0,3)==="927"||e[0]==="8"?`https://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e[0]==="L"||e[0]==="U"?`https://tools.usps.com/go/TrackConfirmAction?qtc_tLabels1=${e}`:e.substring(0,3)==="937"?`http://webtrack.dhlglobalmail.com/?trackingnumber=${e}`:e.substring(0,2)==="94"||e.substring(0,3)==="927"?`https://tools.usps.com/go/TrackConfirmAction?tLabels=${e}`:e[0]==="2"||e[0]==="7"?`http://www.fedex.com/Tracking?tracknumbers=${e}`:e.substring(0,2)==="1Z"?`http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e.substring(0,2)==="42"?`https://webtrack.dhlecs.com/?trackingnumber=${e}`:"#"}function Ee({item:e,setShowTracking:c,setItemTracking:f,carrier:j}){var v,i,t,m,d,o,N,F,T,h,l,p,u,g,k,C,O,D;const E=(S,M)=>{console.log("redo item")};return s("span",{children:[(e==null?void 0:e.item_status)==="production"?e!=null&&e.batch?s("p",{children:["View batch:",r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((v=e==null?void 0:e.batch)==null?void 0:v.station)&&s($,{children:[r("br",{}),s("span",{children:[(t=(i=e==null?void 0:e.batch)==null?void 0:i.station)==null?void 0:t.station_name," ",(d=(m=e==null?void 0:e.batch)==null?void 0:m.station)==null?void 0:d.station_description]}),r("br",{}),(o=e==null?void 0:e.batch)==null?void 0:o.change_date]})]}):(e==null?void 0:e.batch_number)!=="0"?r("p",{children:"No Batch Record"}):r("p",{children:"Unbatched"}):(e==null?void 0:e.item_status)==="wap"?e!=null&&e.wap_item?s($,{children:[s("p",{children:["WAP Bin"," ",r("a",{href:`/wap/details/${(N=e==null?void 0:e.wap_item)==null?void 0:N.bin_id}`,target:"_blank",children:(F=e==null?void 0:e.wap_item)==null?void 0:F.bin.name})]}),r("p",{children:"Added:"}),r("p",{children:(T=e==null?void 0:e.wap_item)==null?void 0:T.created_at})]}):r("p",{children:"WAP BIN: NOT FOUND"}):(e==null?void 0:e.item_status)==="rejected"&&(e==null?void 0:e.rejection)?(e==null?void 0:e.rejection.graphic_status)!=="Redo Item"?s($,{children:[r("p",{children:"Rejected"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((h=e==null?void 0:e.rejection)==null?void 0:h.rejection_reason_info)&&s($,{children:[r("br",{}),(p=(l=e==null?void 0:e.rejection)==null?void 0:l.rejection_reason_info)==null?void 0:p.rejection_message]}),r("br",{}),(u=e==null?void 0:e.rejection)==null?void 0:u.rejection_message,r("br",{}),(g=e==null?void 0:e.rejection)==null?void 0:g.created_at]}):s($,{children:[r("p",{children:"Redo"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((k=e==null?void 0:e.rejection)==null?void 0:k.rejection_reason_info)&&s($,{children:[r("br",{}),(O=(C=e==null?void 0:e.rejection)==null?void 0:C.rejection_reason_info)==null?void 0:O.rejection_message]}),r("br",{}),e==null?void 0:e.rejection.rejection_message,r("br",{}),e==null?void 0:e.rejection.created_at]}):(e==null?void 0:e.item_status)==="rejected"&&!(e!=null&&e.rejection)?r("p",{children:"REJECTED BUT NO REJECTION RECORD"}):(e==null?void 0:e.item_status)==="back order"?(()=>{let S=0;return e!=null&&e.inventoryunit&&(e==null||e.inventoryunit.forEach(M=>{M.open_po&&M.open_po.eta>S&&(S=M.open_po.eta)})),s($,{children:[r("p",{children:"Back Order"}),!(e!=null&&e.batch)&&r("p",{children:"Unbatched"}),S>0&&s("p",{children:["ETA: ",S]})]})})():(e==null?void 0:e.item_status)!=="shipped"&&s($,{children:[r("p",{children:e==null?void 0:e.item_status}),(e==null?void 0:e.batch)&&s($,{children:[r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),r("br",{}),e==null?void 0:e.batch.change_date]})]}),(e==null?void 0:e.ship_info)&&((D=e==null?void 0:e.ship_info)==null?void 0:D.tracking_number)?s($,{children:[r("a",{href:`/shipping?search_for_first=${e==null?void 0:e.ship_info.unique_order_id}&search_in_first=unique_order_id`,children:"Shipped"})," ","on"," ",new Date((e==null?void 0:e.ship_info.postmark_date)||Date.now()).toLocaleDateString(),r("br",{}),!(e!=null&&e.ship_info.mail_class.toLowerCase().includes("innovation"))&&s($,{children:[e==null?void 0:e.ship_info.mail_class,r("br",{})]}),s("a",{href:Z(e==null?void 0:e.ship_info.shipping_id),target:"_blank",children:["Trk# ",e==null?void 0:e.ship_info.shipping_id]}),r("br",{}),(e==null?void 0:e.batch)&&s($,{children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:["Batch ",e==null?void 0:e.batch_number]}),r("br",{})]}),r("br",{}),r("button",{id:"redo-item",onClick:()=>E(e==null?void 0:e.id,e==null?void 0:e.item_quantity),className:"btn btn-xs btn-danger",children:"Redo Item"})]}):(e==null?void 0:e.item_status)==="shipped"&&(e==null?void 0:e.tracking_number)!==null?s("a",{href:Z(e==null?void 0:e.tracking_number),target:"_blank",children:["Trk# ",e==null?void 0:e.tracking_number]}):(e==null?void 0:e.item_status)!=="shipped"&&(e==null?void 0:e.item_status)!=="cancelled"&&j!=="MN"?r($,{children:r("button",{id:"shipitem",onClick:S=>{S.preventDefault(),c(!0),f(e)},className:"btn btn-xs btn-success",children:"Enter Tracking"})}):null]})}const Se=(e,c,f,j,E)=>{var h;const v=w(),{id:i}=B(),t=async l=>{let p=[];return l.length>3?(p=await v(re(l)),p==null?void 0:p.payload):[]},m=l=>{var u,g,k,C,O,D,S;const p=(u=e==null?void 0:e.items)==null?void 0:u.map(M=>({...M}));p==null||p.push({item_id:(g=l==null?void 0:l.data)==null?void 0:g.item_id,child_sku:(k=l==null?void 0:l.data)==null?void 0:k.product_model,id_catalog:(C=l==null?void 0:l.data)==null?void 0:C.id_catalog,item_description:(O=l==null?void 0:l.data)==null?void 0:O.product_name,item_thumb:(D=l==null?void 0:l.data)==null?void 0:D.product_thumb,item_unit_price:(S=l==null?void 0:l.data)==null?void 0:S.product_price,item_quantity:1,is_new:!0}),c({target:{name:"items",value:p}})},d=(l,p)=>{var g,k,C;const u=(g=e==null?void 0:e.items)==null?void 0:g.map(O=>({...O}));u[p][(k=l.target)==null?void 0:k.name]=(C=l.target)==null?void 0:C.value,c({target:{name:"items",value:u}})},o=(l,p,u)=>{var k;const g=(k=e==null?void 0:e.items)==null?void 0:k.map(C=>({...C}));g[u][p]=l.value,c({target:{name:"items",value:g}})};x.exports.useEffect(()=>{const l=parseFloat(e==null?void 0:e.items.reduce(function(p,u){return parseFloat(p)+parseFloat(u==null?void 0:u.item_unit_price)*parseFloat(u==null?void 0:u.item_quantity)},0)).toFixed(2);c({target:{name:"subtotal",value:l}})},[e==null?void 0:e.items]);const N=(l,p,u)=>{l.preventDefault(),v(le({id:i,orderId:p,itemId:u}))},F=(l,p,u)=>{l.preventDefault(),v(se({id:i,orderId:p,itemId:u}))},T=(l,p=`
`,u=0)=>{let g="",k="";u===1&&(g='<strong style="font-size: 110%;">',k="</strong>");let C="";const O=JSON.parse(l);if(O)for(const D in O){let S=O[D];D!=="Confirmation_of_Order_Details"&&D!=="couponcode"&&(typeof S===String&&(S==null?void 0:S.includes("$"))&&u===1&&(S=`<span style="font-size: 120%;">${S}</span>`),C+=`${D.replaceAll("_"," ")} = ${g}${S}${k}${p}`)}return C};return s(x.exports.Fragment,{children:[s(a,{className:"rounded bg-secondary p-1 my-1 text-uppercase",children:[r(n,{sm:"1 text-light fw-bolder ",children:"Image"}),r(n,{sm:"3 text-light fw-bolder",children:"Name"}),r(n,{sm:"4 text-light fw-bolder",children:"Description"}),r(n,{sm:"1 text-light fw-bolder",children:"Quantity"}),r(n,{sm:"1 text-light fw-bolder",children:"Price"}),r(n,{sm:"1 text-light fw-bolder",children:"Total"}),r(n,{sm:"1 text-light fw-bolder",children:"Action"})]}),(h=e==null?void 0:e.items)==null?void 0:h.map((l,p)=>{var u,g,k,C,O,D,S,M;return s(a,{className:"",children:[s(n,{sm:"1",children:[r("a",{href:l!=null&&l.item_url?l==null?void 0:l.item_url:"#",target:"_blank",children:r("img",{src:l==null?void 0:l.item_thumb,alt:l==null?void 0:l.child_sku,height:"100",width:"100"})}),r("div",{children:(e==null?void 0:e.store)&&((u=e==null?void 0:e.store)==null?void 0:u.change_items)==="1"&&(l==null?void 0:l.item_status)!=="cancelled"&&(l==null?void 0:l.item_status)!=="shipped"?r(A,{style:{color:"gray"},className:"delete-item",onClick:y=>N(y,e==null?void 0:e.id,l==null?void 0:l.id),children:"Cancel"}):(e==null?void 0:e.store)&&((g=e==null?void 0:e.store)==null?void 0:g.change_items)==="1"&&(l==null?void 0:l.item_status)==="cancelled"?r(A,{style:{color:"gray"},className:"delete-item",onClick:y=>F(y,e==null?void 0:e.id,l==null?void 0:l.id),children:"Restore"}):null})]}),s(n,{sm:"3",children:[r("div",{children:r("a",{href:(k=l==null?void 0:l.item_url)!=null?k:"#",target:"_blank",children:l==null?void 0:l.item_description})}),s("div",{children:["Item ID: ",l==null?void 0:l.id]}),((C=l==null?void 0:l.all_child_skus)==null?void 0:C.length)>0&&((l==null?void 0:l.parameter_option)===null||((O=l==null?void 0:l.parameter_option)==null?void 0:O.batch_route_id)===115)?r(L,{classNames:"react-select",classNamePrefix:"select",name:"child_sku",options:(D=l==null?void 0:l.all_child_skus)==null?void 0:D.map(y=>({value:y==null?void 0:y.child_sku,label:y==null?void 0:y.child_sku})),value:(M=(S=l==null?void 0:l.all_child_skus)==null?void 0:S.map(y=>({value:y==null?void 0:y.child_sku,label:y==null?void 0:y.child_sku})))==null?void 0:M.find(y=>(y==null?void 0:y.value)===(l==null?void 0:l.child_sku)),onChange:y=>o(y,"child_sku",p)}):r(_,{type:"text",name:"child_sku",className:"child_sku",value:l==null?void 0:l.child_sku,onChange:y=>d(y,p)}),"/",r("a",{style:{color:"red"},href:`/config-child-sku?search_for_first=${l==null?void 0:l.item_code}&contains_first=in&search_in_first=parent_sku`,target:"_blank",children:l==null?void 0:l.item_code})]}),r(n,{sm:"4",children:r(_,{type:"textarea",Rows:"1",name:"options",id:"options",placeholder:"Click Here",value:T(l==null?void 0:l.item_option),rows:"4",onChange:y=>d(y,p)})}),r(n,{sm:"1",children:r(_,{type:"number",name:"item_quantity",id:"item_quantity",placeholder:"Item_quantity",value:l==null?void 0:l.item_quantity,onChange:y=>d(y,p)})}),r(n,{sm:"1",children:r(_,{type:"number",name:"item_unit_price",id:"item_unit_price",placeholder:"Price",value:parseFloat(l==null?void 0:l.item_unit_price).toFixed(2),onChange:y=>d(y,p)})}),r(n,{sm:"1",children:r(_,{type:"number",name:"total_price",id:"total_price",placeholder:"Price",value:parseFloat((l==null?void 0:l.item_quantity)*(l==null?void 0:l.item_unit_price)).toFixed(2),disabled:!0})}),r(n,{sm:"1",children:r(Ee,{item:l,setShowTracking:j,setItemTracking:E,carrier:e==null?void 0:e.carrier})}),r("hr",{})]},p)}),s(a,{className:"pt-2",children:[r(n,{sm:"2"}),r(n,{sm:"8",children:r(ve,{isClearable:!1,className:"react-select",classNamePrefix:"select",name:"callback-react-select",loadOptions:t,value:null,onChange:m,theme:P})}),r(n,{sm:"2"})]})]})},ke=(e,c,f,j,E)=>{var d;const v=w(),[i,t]=x.exports.useState(null);x.exports.useEffect(()=>{t({track_item_id:f==null?void 0:f.id,track_order_id:j,track_shopify_order_id:E,track_shopify_item_line_id:f==null?void 0:f.item_id,track_shopify_item_quantity:`#${f==null?void 0:f.item_id}`,method:"",track_number:""})},[f]);const m=R(o=>o.orders);return x.exports.useEffect(()=>{v(ne())},[]),r("div",{children:s(H,{isOpen:e,toggle:()=>c(!e),className:"modal-dialog-centered",children:[r(J,{toggle:()=>c(!e),children:"Enter Tracking Number"}),s(G,{children:[s("div",{children:[r(b,{className:"form-label",for:"email",children:"Ship Via"}),r(L,{className:"react-select",classNamePrefix:"select",theme:P,placeholder:"Select Type",options:m==null?void 0:m.shippingMethodOptions,value:(d=m==null?void 0:m.shippingMethodOptions)==null?void 0:d.find(o=>(o==null?void 0:o.value)===(i==null?void 0:i.method)),onChange:o=>t({...i,method:o==null?void 0:o.value})})]}),s("div",{children:[r(b,{className:"form-label",for:"email",children:"Tracking Number"}),r(_,{type:"text",id:"text",value:i==null?void 0:i.subject,onChange:o=>{var N;return t({...i,track_number:(N=o==null?void 0:o.target)==null?void 0:N.value})},placeholder:"Enter Tracking Number"})]})]}),r(Y,{children:r(I,{color:"primary",onClick:o=>{o.preventDefault(),v(ce(i)),c(!e)},children:"Ship Item"})})]})})},we=()=>{const{id:e}=B(),c=w(),f=R(p=>p.orders),[j,E]=x.exports.useState(!1),[v,i]=x.exports.useState(!1),[t,m]=x.exports.useState(null),[d,o]=x.exports.useState({items:[]}),[N,F]=x.exports.useState(null);x.exports.useEffect(()=>{c(q(e))},[e]),x.exports.useEffect(()=>{f!=null&&f.order&&o(f==null?void 0:f.order)},[f==null?void 0:f.order]);const T=p=>{var u,g;o({...d,[(u=p.target)==null?void 0:u.name]:(g=p.target)==null?void 0:g.value})},h=async()=>{var u,g,k;const p=await c(ue({data:d,id:e}));(u=p==null?void 0:p.payload)!=null&&u.status?c(q(e)):F((k=(g=p==null?void 0:p.payload)==null?void 0:g.data)==null?void 0:k.errors)},l=async p=>{var g;const u=await c(fe(e));(g=u==null?void 0:u.payload)!=null&&g.status&&c(q(e))};return r(x.exports.Fragment,{children:r(a,{children:r(oe,{children:r(n,{sm:"12",children:s(he,{children:[r(pe,{children:r(ie,{tag:"h4",children:"Edit Order"})}),s(_e,{children:[Ne(d,T,N,l),xe(d,T,N,E),Se(d,T,N,i,m),me(d,T,h),ke(v,i,t,d==null?void 0:d.id,d==null?void 0:d.short_order),ae(j,E,d)]})]})})})})})};export{we as default};
