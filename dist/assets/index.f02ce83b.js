import{a5 as ie,w as le,a as te,r as u,bM as oe,bN as re,bO as de,j as s,f as l,Q as h,V as _,X as f,Y as a,a0 as v,G as g,S as ce,bP as J}from"./index.f7fd932c.js";/* empty css                  */import{a as me}from"./App.1a82b0ab.js";/* empty css                                  */import{h as Z}from"./moment.4d75c86c.js";import{S as x}from"./react-select.esm.fefdc9bc.js";import"./emotion-memoize.esm.06f0e458.js";const Ce=()=>{var S,y,N,k,P,M,O,B,w,A,D,j,E,F,R,T,W,L,I,U;const m=me();let[b,ue]=ie();const{state:t}=le(),p=b.get("station"),n=te(e=>e.moveBatches),[o,C]=u.exports.useState(!1),i=n==null?void 0:n.searchParams;u.exports.useEffect(()=>{p&&(r({station:p}),d({station:p}))},[p]),u.exports.useEffect(()=>{t!=null&&t.scan_batches&&(r({scan_batches:t==null?void 0:t.scan_batches}),d({scan_batches:t==null?void 0:t.scan_batches}))},[t==null?void 0:t.scan_batches]),u.exports.useEffect(()=>{m(oe())},[]);const d=async e=>{C(!0),await m(re(e)),C(!1)},r=e=>{m(de(e))},ee=e=>{var c;m(J((c=e==null?void 0:e.target)==null?void 0:c.value))},ne=()=>{m(J("all"))},se=()=>{d({task:"next",batch_number:n==null?void 0:n.moveParams,route:null})},ae=()=>{d({task:"move",batch_number:n==null?void 0:n.moveParams,station:null})};return s("div",{className:"app-user-list",children:l(u.exports.Fragment,{children:[s(h,{className:"px-1",children:s(_,{children:l(f,{children:[s(a,{sm:"2"}),s(a,{sm:"3",children:s(v,{placeholder:"Find Batches (Comma Separated)",value:i==null?void 0:i.scan_batches,onChange:e=>{var c;r({scan_batches:(c=e==null?void 0:e.target)==null?void 0:c.value})},onBlur:()=>r({scan_batches:(i==null?void 0:i.scan_batches)+","}),onKeyDown:e=>{(e==null?void 0:e.key)==="Enter"&&r({scan_batches:(i==null?void 0:i.scan_batches)+","})}})}),s(a,{sm:"3",children:s(x,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stationOptions,placeholder:"View Batches in Station",value:(S=n==null?void 0:n.stationOptions)==null?void 0:S.find(e=>(e==null?void 0:e.value)==(i==null?void 0:i.station)),onChange:e=>{r({station:e==null?void 0:e.value})},isClearable:!0})}),s(a,{sm:"2",className:"d-flex align-items-start flex-column",children:s(g,{color:"primary",onClick:()=>d({}),disabled:o,children:o?"Please Wait":"Search"})})]})})}),((y=n==null?void 0:n.data)==null?void 0:y.station)&&s(h,{children:s(_,{children:l("h4",{className:"card-title",children:[(k=(N=n==null?void 0:n.data)==null?void 0:N.station)==null?void 0:k.station_name," -"," ",(M=(P=n==null?void 0:n.data)==null?void 0:P.station)==null?void 0:M.station_description," -"," ",(B=(O=n==null?void 0:n.data)==null?void 0:O.batches)==null?void 0:B.length," Active Batch/es Found"]})})}),((A=(w=n==null?void 0:n.data)==null?void 0:w.batches)==null?void 0:A.length)>0?l("span",{children:[s(h,{children:s(_,{children:(((D=n==null?void 0:n.data)==null?void 0:D.route)&&((j=n==null?void 0:n.data)==null?void 0:j.route)!="all"||((F=(E=n==null?void 0:n.data)==null?void 0:E.batches)==null?void 0:F.length)==1)&&((T=(R=n==null?void 0:n.data)==null?void 0:R.stations_in_route)==null?void 0:T.length)>0?l(f,{children:[s(a,{sm:"3"}),s(a,{sm:"4",children:s(x,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stations_in_routeOptions,placeholder:"Select Route (To move to other stations)",value:(W=n==null?void 0:n.stations_in_routeOptions)==null?void 0:W.find(e=>(e==null?void 0:e.value)==(i==null?void 0:i.route)),onChange:e=>r({station_change:e==null?void 0:e.value})})}),s(a,{sm:"2",className:"d-flex align-items-start flex-column",children:s(g,{color:"primary",onClick:ae,disabled:o,children:o?"Please Wait":"Move to Station"})})]}):l(f,{children:[s(a,{sm:"3"}),s(a,{sm:"4",children:s(x,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.routes_in_stationOptions,placeholder:"Select Route (To move to other stations)",value:(L=n==null?void 0:n.routes_in_stationOptions)==null?void 0:L.find(e=>(e==null?void 0:e.value)==(i==null?void 0:i.route)),onChange:e=>r({route:e==null?void 0:e.value})})}),s(a,{sm:"2",className:"d-flex align-items-start flex-column",children:s(g,{color:"primary",onClick:()=>d({}),disabled:o,children:o?"Please Wait":"Filter"})})]})})}),l(h,{children:[s(ce,{children:s(g,{color:"primary",onClick:se,disabled:o,children:o?"Please Wait":"Move to Next Station"})}),l(_,{children:[l(f,{className:"mb-1",children:[s(a,{sm:"1",children:s(v,{type:"checkbox",checked:n==null?void 0:n.allChecked,onChange:ne})}),s(a,{sm:"1",children:n!=null&&n.allChecked?"UnCheck All":"Check All"}),s(a,{sm:"1",children:"Batch Date"}),s(a,{sm:"2",children:"Min. Order Date"}),s(a,{sm:"2",children:"Station"}),s(a,{sm:"1",children:"Next Station"}),s(a,{sm:"1",children:"Route"}),s(a,{sm:"1",children:"Line"}),s(a,{sm:"2",children:"Image"}),s("hr",{})]}),(U=(I=n==null?void 0:n.data)==null?void 0:I.batches)==null?void 0:U.map((e,c)=>{var V,$,G,H,K,Q,X,Y,q,z;return l(f,{children:[s(a,{sm:"1",children:s(v,{type:"checkbox",value:e==null?void 0:e.batch_number,checked:(V=n==null?void 0:n.moveParams)==null?void 0:V.includes(e==null?void 0:e.batch_number),onChange:ee})}),l(a,{sm:"1",children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,children:e==null?void 0:e.batch_number}),s("br",{}),(e==null?void 0:e.status.charAt(0).toUpperCase())+(e==null?void 0:e.status.slice(1))]}),s(a,{sm:"1",children:Z(e==null?void 0:e.creation_date).format("dd MMM yyyy")}),s(a,{sm:"2",children:Z(e==null?void 0:e.min_order_date).format("dd MMM yyyy")}),l(a,{sm:"2",children:[($=e==null?void 0:e.station)==null?void 0:$.station_name," -"," ",(G=e==null?void 0:e.station)==null?void 0:G.station_description]}),s(a,{sm:"1",children:(H=n==null?void 0:n.data)==null?void 0:H.next_in_route[e==null?void 0:e.batch_route_id]}),s(a,{sm:"1",children:(K=e==null?void 0:e.route)==null?void 0:K.batch_code}),s(a,{sm:"1",children:((Q=e==null?void 0:e.items_count)==null?void 0:Q.length)>0&&((X=e==null?void 0:e.items_count[0])==null?void 0:X.count)}),l(a,{sm:"2",children:[s("img",{src:(Y=e==null?void 0:e.first_item)==null?void 0:Y.item_thumb,width:"70",height:"70"}),s("a",{href:(q=e==null?void 0:e.first_item)==null?void 0:q.item_thumb,target:"_blank",children:(z=e.first_item)==null?void 0:z.item_thumb})]}),s("hr",{})]})})]})]})]}):s(h,{children:s(_,{children:s("h4",{className:"d-flex align-items-center justify-content-center",children:"No movable batches found."})})})]})})};export{Ce as default};
