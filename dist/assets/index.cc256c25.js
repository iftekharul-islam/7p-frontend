import{k as q,r as L,f as c,X as D,j as n,Y as l,I as ss,G as T,$ as j,a0 as B,eU as as,eV as ns,a as cs,Q as ls,S as hs,V as ds,L as z,bo as rs,eT as ps,eS as _s,eW as us,eX as os}from"./index.e1afb3ce.js";/* empty css                  */import{a as J}from"./App.88da7bf3.js";import{h as Ss}from"./moment.4d75c86c.js";const es=({data:N,selected:v})=>{var S,p,U,C,f,M,O,y,X,F,Y,e,W;const P=J(),k=q(),{bin:u,order:a,item_options:A,thumbs:h}=N,x="WAP",d=u==null?void 0:u.items,[o,t]=L.exports.useState([{pounds:0,ounces:0}]),V=()=>{t([...o,{pounds:0,ounces:0}])};let g=null,R=null;const I=JSON.parse(localStorage.getItem("userData")),w={"":"DEFAULT SHIPPING","MN*":"MANUAL SHIPPING","US*FIRST_CLASS":"USPS FIRST_CLASS","US*PRIORITY":"USPS PRIORITY","US*EXPRESS":"USPS EXPRESS","UP*S_GROUND":"UPS GROUND","UP*S_3DAYSELECT":"UPS 3DAYSELECT","UP*S_AIR_2DAY":"UPS AIR_2DAY","UP*S_AIR_2DAYAM":"UPS AIR_2DAYAM","UP*S_AIR_1DAYSAVER":"UPS AIR_1DAYSAVER","UP*S_AIR_1DAY":"UPS AIR_1DAY","UP*S_SUREPOST":"UPS SUREPOST","FX*_SMART_POST":"FEDEX SMARTPOST","FX*_GROUND_HOME_DELIVERY":"FEDEX GROUND_HOME_DELIVERY","FX*_FEDEX_GROUND":"FEDEX GROUND","FX*_FEDEX_2_DAY":"FEDEX 2_DAY","FX*_FEDEX_EXPRESS_SAVER":"FEDEX EXPRESS_SAVER","FX*_STANDARD_OVERNIGHT":"FEDEX STANDARD_OVERNIGHT","FX*_PRIORITY_OVERNIGHT":"FEDEX PRIORITY_OVERNIGHT","DL*_SMARTMAIL_PARCEL_EXPEDITED_MAX":"DHL SMARTMAIL PARCEL EXPEDITED MAX","DL*_SMARTMAIL_PARCEL_EXPEDITED":"DHL SMARTMAIL PARCEL EXPEDITED","DL*_SMARTMAIL_PARCEL_GROUND":"DHL SMARTMAIL PARCEL GROUND","DL*_SMARTMAIL_PARCEL_PLUS_EXPEDITED":"DHL SMARTMAIL PARCEL PLUS EXPEDITED","DL*_SMARTMAIL_PARCEL_PLUS_GROUND":"DHL SMARTMAIL PARCEL PLUS GROUND","DL*_PARCEL_INTERNATIONAL_DIRECT":"DHL PARCEL INTERNATIONAL DIRECT","EN*USFC":"ENDCIA USPS FIRST CLASS","EN*USPM":"ENDCIA USPS PRIORITY","EN*USCG":"ENDCIA USPS GROUND"};(a==null?void 0:a.store)&&((S=a==null?void 0:a.store)==null?void 0:S.qc)==="0"?(g="success",(a==null?void 0:a.carrier)==="MN"?(R=a==null?void 0:a.method,g="info"):(d==null?void 0:d.length)>1?R=`${d==null?void 0:d.length} Lines Approved by ${I==null?void 0:I.username}`:R=`Approved by ${I==null?void 0:I.username}`,((p=a==null?void 0:a.shippable_items)==null?void 0:p.length)!==(d==null?void 0:d.length)&&(R=`Partial Ship ${R}`,g="primary")):(R="Ship by Supervisor",g="danger");const G=(_,E)=>{_.preventDefault(),P(as(E))},s=(_,E)=>{const{name:b,value:$}=_.target,H=[...o];H[E][b]=$,t(H)},r=async(_,E,b,$,H,Q,K)=>{_.preventDefault();const Z=o==null?void 0:o.map(i=>i.pounds),m=o==null?void 0:o.map(i=>i.ounces);await P(ns({bin:E,order_id:b,origin:$,location:H,count:Q,"selected-items-json":K,pounds:Z,ounces:m}))&&k("/wap")};return c(D,{className:"border rounded p-1",children:[(a==null?void 0:a.carrier)!=null&&(a==null?void 0:a.carrier)!=="MN"&&n(l,{sm:"12",className:"panel-header",children:n("h4",{children:n("strong",{children:c("u",{children:["Ship By ",w[(a==null?void 0:a.carrier)+"*"+(a==null?void 0:a.method)]]})})})}),c(D,{className:"panel-body",children:[n(l,{sm:"4",className:"col-xs-12 col-sm-4 col-md-2",children:(a==null?void 0:a.carrier)!=null?c(ss,{children:[(a==null?void 0:a.carrier)==="FX"&&n("img",{src:"/assets/images/fedex.jpg",alt:"FedEx"}),(a==null?void 0:a.carrier)==="UP"&&!a.method.includes("MAIL_INNOVATIONS")&&n("img",{src:"/assets/images/ups.jpg",alt:"UPS"}),(a==null?void 0:a.carrier)==="US"&&n("img",{src:"/assets/images/usps.jpg",alt:"USPS"})]}):n("strong",{children:"Ship to:"})}),c(l,{sm:"4",className:"col-xs-12 col-sm-8 col-md-5",children:[n("div",{children:(U=a==null?void 0:a.customer)==null?void 0:U.ship_full_name}),n("div",{children:((C=a==null?void 0:a.customer)==null?void 0:C.ship_company_name)&&((f=a==null?void 0:a.customer)==null?void 0:f.ship_company_name)}),n("div",{children:(M=a==null?void 0:a.customer)==null?void 0:M.ship_address_1}),n("div",{children:((O=a==null?void 0:a.customer)==null?void 0:O.ship_address_2)&&((y=a==null?void 0:a.customer)==null?void 0:y.ship_address_2)}),c("div",{children:[(X=a==null?void 0:a.customer)==null?void 0:X.ship_city,", ",(F=a==null?void 0:a.customer)==null?void 0:F.ship_state," ",(Y=a==null?void 0:a.customer)==null?void 0:Y.ship_zip]}),n("div",{children:((e=a==null?void 0:a.customer)==null?void 0:e.ship_country.substring(0,2))!=="US"&&((W=a==null?void 0:a.customer)==null?void 0:W.ship_country)}),n(T,{color:"primary",size:"sm",className:"btn-xs",onClick:_=>G(_,{order_id:a==null?void 0:a.id}),children:"Bad Address"})]}),c(l,{sm:"4",className:"col-xs-12 col-sm-12 col-md-5",style:{textAlign:"right",padding:0},children:[o==null?void 0:o.map((_,E)=>c(D,{children:[n(l,{sm:"4",children:E==0&&((a==null?void 0:a.carrier)==="US"?n("label",{style:{color:"red"},children:"*Weight:"}):n("label",{children:"Weight:"}))}),c(l,{sm:"4",children:[E==0&&n(j,{children:"lbs"}),n(B,{type:"number",name:"pounds",style:{width:"100px"},min:"0",defaultValue:0,value:_.pounds,onChange:b=>s(b,E)})]}),c(l,{sm:"4",children:[E==0&&n(j,{children:"oz"}),n(B,{type:"number",name:"ounces",style:{width:"100px"},min:"0",defaultValue:0,value:_.ounces,onChange:b=>s(b,E)})]})]})),n(T,{onClick:V,children:"Add Weight"}),c(T,{type:"submit",name:"submitButton",value:"fl",className:`pull-right btn btn-lg btn-${g}`,style:{marginTop:"5px"},onClick:_=>r(_,u==null?void 0:u.id,a==null?void 0:a.id,x,"FL",d==null?void 0:d.length,v),children:[R," (FL)"]}),c(T,{type:"submit",name:"submitButton",value:"ny",className:"pull-right btn btn-lg btn-warning",style:{marginTop:"5px"},onClick:_=>r(_,u==null?void 0:u.id,a==null?void 0:a.id,x,"NY",d==null?void 0:d.length,v),children:[R," (NY)"]})]})]})]})},gs=()=>{var G;const N=J(),v=q(),[P,k]=L.exports.useState(!1),{WAPData:u,searchParams:a}=cs(s=>s.WAP),{bin:A,order:h,item_options:x,thumbs:d}=u,[o,t]=L.exports.useState([]),V=(s,r)=>{s.target.checked?t([...o,r]):t(o.filter(S=>S!==r))};L.exports.useEffect(()=>{var r,S;const s=(S=(r=h==null?void 0:h.items)==null?void 0:r.filter(p=>(p==null?void 0:p.item_status)=="wap"&&(p==null?void 0:p.batch)))==null?void 0:S.map(p=>p==null?void 0:p.id);t(s)},[h]),L.exports.useEffect(()=>{u!=null&&u.order||v("/wap")},[u]);const g=async(s,r,S)=>{s.preventDefault(),k(!0),await N(ps({[S]:r})),k(!1)},R=s=>{N(_s(s))},I=async(s,r,S)=>{var p;await N(us({item_id:s,bin_id:r,origin:S,s:(p=document.getElementById("s"))==null?void 0:p.checked}))},w=(s,r,S)=>{s.preventDefault(),N(os({item_id:r,bin_id:S}))};return n(L.exports.Fragment,{children:c(ls,{children:[n(hs,{children:n("h4",{className:"card-title",children:"WAP"})}),c(ds,{children:[c(D,{className:"mb-1",children:[n(l,{md:"7"}),n(l,{md:"2",children:n(B,{type:"text",name:"order_id",placeholder:"Scan Label",value:a==null?void 0:a.order_id,onChange:s=>{var r;return R({order_id:(r=s==null?void 0:s.target)==null?void 0:r.value})}})}),n(l,{md:"2",children:n(T,{color:"primary",onClick:s=>g(s,a==null?void 0:a.order_id,"order_id"),disabled:P,children:P?"Please Wait...":"Open Bin"})})]}),n(D,{children:c(D,{children:[n(l,{sm:"2"}),n(l,{sm:"8",children:n(es,{data:u,selected:o})}),n(l,{sm:"2"})]})}),h?c("div",{children:[c(D,{children:[c(l,{md:"3",className:"p-1",children:["BIN ",c("b",{children:["#",A==null?void 0:A.name]})]}),c(l,{md:"7",className:"p-1",children:["Order"," ",c("b",{children:["#",n(z,{to:`/customer-order-edit/${h==null?void 0:h.id}`,children:h==null?void 0:h.short_order})]})]}),n(l,{md:"2",className:"p-1",children:c("small",{children:["Order Date: ",Ss(h==null?void 0:h.order_date).format("YYYY-MM-DD")]})})]}),h!=null&&h.items?(G=h==null?void 0:h.items)==null?void 0:G.map((s,r)=>{var S,p,U,C,f,M,O,y,X,F,Y;return c(D,{className:"border rounded mt-1",children:[n(l,{md:"8",className:"p-1",children:n("a",{href:s==null?void 0:s.item_url,target:"_blank",children:s==null?void 0:s.item_description})}),n(l,{md:"2",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&n(z,{onClick:e=>w(e,s==null?void 0:s.id,A==null?void 0:A.id),className:"btn btn-primary btn-sm",children:"Reprint WAP Label"})}),n(l,{md:"2",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&(s==null?void 0:s.batch)?c("span",{className:"d-flex",children:[n(T,{color:"danger",size:"sm",onClick:()=>I(s==null?void 0:s.id,A==null?void 0:A.id,"WP"),children:"Reject from WAP"}),n(B,{type:"checkbox",name:"s",checked:o.includes(s==null?void 0:s.id),defaultChecked:!0,onChange:e=>V(e,s==null?void 0:s.id)})]}):(s==null?void 0:s.item_status)=="rejected"?c("strong",{children:["REJECTED ",(S=s==null?void 0:s.rejections)==null?void 0:S.lenght," TIMES"]}):n("strong",{children:s==null?void 0:s.item_status})}),n(l,{md:"12",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&(s==null?void 0:s.wap_item)?c("small",{children:["Added to Bin ",(p=s==null?void 0:s.wap_item)==null?void 0:p.created_at]}):(s==null?void 0:s.item_status)=="wap"?n("strong",{children:"WAP ITEM NOT FOUND"}):n("hr",{})}),n(l,{md:"3",className:"p-1",children:n("a",{href:s==null?void 0:s.item_url,target:"_blank",children:n("img",{src:s==null?void 0:s.item_thumb,height:"200"})})}),c(l,{md:"6",className:"p-1",children:[s==null?void 0:s.child_sku,n("br",{}),"Item: ",s==null?void 0:s.id,n("br",{}),(s==null?void 0:s.item_quantity)>1&&c("strong",{children:["QTY: ",s==null?void 0:s.item_quantity]}),n("ul",{children:n("div",{dangerouslySetInnerHTML:{__html:x[s==null?void 0:s.id]}})})]}),n(l,{md:"3",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&((U=d[s==null?void 0:s.id])==null?void 0:U.length)>0?n("img",{src:d[s==null?void 0:s.id][0],width:d[s==null?void 0:s.id][1],height:d[s==null?void 0:s.id][2]}):(s==null?void 0:s.item_status)=="production"&&(s==null?void 0:s.batch_number)!="0"?c("span",{children:[c("a",{className:"link-info",href:`/batch-list/${s==null?void 0:s.batch_number}`,target:"_blank",children:["Batch ",s==null?void 0:s.batch_number]}),(s==null?void 0:s.batch)&&((C=s==null?void 0:s.batch)==null?void 0:C.station)&&c("span",{children:[(M=(f=s==null?void 0:s.batch)==null?void 0:f.station)==null?void 0:M.station_description,n("br",{})]}),(s==null?void 0:s.batch)&&n("span",{children:(O=s==null?void 0:s.batch)==null?void 0:O.change_date})]}):(s==null?void 0:s.item_status)=="production"&&(s==null?void 0:s.batch_number)=="0"?"Unbatched":(s==null?void 0:s.item_status)=="rejected"?c("span",{children:[c("a",{href:`/batch-list/${s==null?void 0:s.batch_number}`,target:"_blank",children:["Batch ",s==null?void 0:s.batch_number]}),((y=s==null?void 0:s.rejections)==null?void 0:y.length)>0&&((X=s==null?void 0:s.rejections)==null?void 0:X.map((e,W)=>{var _;return c("span",{children:[n("br",{}),c("small",{children:["Rejected ",e==null?void 0:e.created_at,n("br",{}),(_=e==null?void 0:e.rejection_reason_info)==null?void 0:_.rejection_message]})]},W)}))]}):(s==null?void 0:s.item_status)=="back order"?c("a",{href:`/batch-list/${s==null?void 0:s.batch_number}`,target:"_blank",children:["Batch ",s==null?void 0:s.batch_number]}):(s==null?void 0:s.item_status)=="shipped"?s!=null&&s.shipInfo?c("div",{children:[(F=s==null?void 0:s.shipInfo)==null?void 0:F.mail_class,n("br",{}),(Y=s==null?void 0:s.shipInfo)==null?void 0:Y.shipping_id]}):"SHIPMENT NOT FOUND":""})]},r)}):"No Items in Bin."]}):n(D,{children:n(l,{md:"12",children:n("h4",{className:"text-center",children:P?c("span",{children:[n(rs,{size:"sm"}),"Data Loading"]}):"Bin Empty"})})})]})]})})};export{gs as default};
