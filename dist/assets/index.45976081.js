import{k as I,aB as q,r as p,a as z,j as r,f as n,Q as E,S as M,br as B,V as O,X as m,Y as s,a0 as k,dd as t,G as P,L as Q,I as u,df as W,de as G}from"./index.3c92940a.js";import{h as H}from"./moment.4d75c86c.js";import{a as R}from"./App.1e2e16c3.js";const A=()=>{var _,g,N;const o=R(),Y=I(),{id:a}=q(),[l,c]=p.exports.useState(!0),{listData:d,searchParams:i}=z(e=>e==null?void 0:e.qualityControls),w=async()=>{a&&(c(!0),await o(W(a)),c(!1))};p.exports.useEffect(()=>{w()},[a]);const j=async()=>{const e=await o(G());e!=null&&e.payload&&Y("/quality-control/order")};return r(p.exports.Fragment,{children:n(E,{children:[r(M,{children:r("h4",{className:"card-title",children:l?n("span",{children:["Please Wait ",r(B,{size:"sm"})]}):(_=d==null?void 0:d.station)==null?void 0:_.station_description})}),n(O,{children:[n(m,{className:"mb-1",children:[r(s,{md:"2",children:r(k,{type:"text",placeholder:"Enter Batch",value:i==null?void 0:i.batch_number,onChange:e=>o(t({batch_number:e.target.value}))})}),r(s,{md:"2",children:r(k,{type:"text",value:i==null?void 0:i.user_barcode,onChange:e=>o(t({user_barcode:e.target.value}))})}),r(s,{md:"2",children:r(P,{color:"primary",onClick:j,disabled:l,children:l?"Please Wait...":"Open Batch"})})]}),((g=d==null?void 0:d.batches)==null?void 0:g.length)>0?n("div",{children:[n(m,{children:[r(s,{md:"2",className:"p-1 border",children:"Batch"}),r(s,{md:"1",className:"p-1 border",children:"First order"}),r(s,{md:"1",className:"p-1 border",children:"Lines"}),r(s,{md:"3",className:"p-1 border",children:"Last Scan"}),r(s,{md:"2",className:"p-1 border"}),r(s,{md:"3",className:"p-1 border"})]}),(N=d==null?void 0:d.batches)==null?void 0:N.map((e,D)=>{var f,x,y,C,v,L,S;return r(Q,{onClick:F=>{F.preventDefault(),o(t({batch_number:e==null?void 0:e.batch_number}))},children:n(m,{children:[n(s,{md:"2",className:"p-1 border",children:[e==null?void 0:e.batch_number,(e==null?void 0:e.store)&&n(u,{children:[r("br",{}),(f=e==null?void 0:e.store)==null?void 0:f.store_name]})]}),r(s,{md:"1",className:"p-1 border",children:H(e==null?void 0:e.min_order_date).format("YYYY-MM-DD")}),r(s,{md:"1",className:"p-1 border",children:(x=e==null?void 0:e.items_count)!=null?x:0}),n(s,{md:"3",className:"p-1 border",children:[(e==null?void 0:e.scanned_in)&&((y=e==null?void 0:e.scanned_in)==null?void 0:y.station_id)==(e==null?void 0:e.station_id)&&n(u,{children:[n("strong",{children:["QC in Progress by"," ",(v=(C=e==null?void 0:e.scanned_in)==null?void 0:C.in_user)==null?void 0:v.username]}),r("br",{})]}),e==null?void 0:e.change_date]}),e!=null&&e.first_item?n(u,{children:[r(s,{md:"2",className:"p-1 border",children:r("img",{src:(L=e==null?void 0:e.first_item)==null?void 0:L.item_thumb,width:"70",height:"70"})}),r(s,{md:"3",className:"p-1 border",children:(S=e==null?void 0:e.first_item)==null?void 0:S.item_description})]}):r(s,{md:"5",className:"p-1 border",children:"No Items"})]},D)})})]}):r(m,{children:r(s,{md:"12",children:r("h4",{className:"text-center",children:l?n("span",{children:[r(B,{size:"sm"}),"Data Loading"]}):"No batches in station."})})})]})]})})};export{A as default};
