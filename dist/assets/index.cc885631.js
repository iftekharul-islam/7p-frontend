import{a5 as le,a as ae,r as _,bM as ie,bN as te,bO as oe,j as s,f as i,Q as m,V as u,X as h,Y as l,a0 as g,G as f,S as re,bP as z}from"./index.48d1d48f.js";/* empty css                  */import{a as de}from"./App.c015087f.js";/* empty css                                  */import{h as J}from"./moment.4d75c86c.js";import{S as v}from"./react-select.esm.8632f7ad.js";import"./emotion-memoize.esm.06f0e458.js";const ve=()=>{var C,S,y,N,k,P,M,O,B,A,w,D,j,F,R,T,W,E,I,L;const d=de();let[Z,ce]=le();const p=Z.get("station"),n=ae(e=>e.moveBatches),[t,x]=_.exports.useState(!1),a=n==null?void 0:n.searchParams;_.exports.useEffect(()=>{o({station:p}),c({station:p})},[p]),_.exports.useEffect(()=>{d(ie())},[]);const c=async e=>{x(!0),await d(te(e)),x(!1)},o=e=>{d(oe(e))},b=e=>{var r;d(z((r=e==null?void 0:e.target)==null?void 0:r.value))},ee=()=>{d(z("all"))},ne=()=>{c({task:"next",batch_number:n==null?void 0:n.moveParams,route:null})},se=()=>{c({task:"move",batch_number:n==null?void 0:n.moveParams,station:null})};return s("div",{className:"app-user-list",children:i(_.exports.Fragment,{children:[s(m,{className:"px-1",children:s(u,{children:i(h,{children:[s(l,{sm:"2"}),s(l,{sm:"3",children:s(g,{placeholder:"Find Batches (Comma Separated)",value:a==null?void 0:a.scan_batches,onChange:e=>{var r;o({scan_batches:(r=e==null?void 0:e.target)==null?void 0:r.value})},onBlur:()=>o({scan_batches:(a==null?void 0:a.scan_batches)+","}),onKeyDown:e=>{(e==null?void 0:e.key)==="Enter"&&o({scan_batches:(a==null?void 0:a.scan_batches)+","})}})}),s(l,{sm:"3",children:s(v,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stationOptions,placeholder:"View Batches in Station",value:(C=n==null?void 0:n.stationOptions)==null?void 0:C.find(e=>(e==null?void 0:e.value)==(a==null?void 0:a.station)),onChange:e=>{o({station:e==null?void 0:e.value})},isClearable:!0})}),s(l,{sm:"2",className:"d-flex align-items-start flex-column",children:s(f,{color:"primary",onClick:()=>c({}),disabled:t,children:t?"Please Wait":"Search"})})]})})}),((S=n==null?void 0:n.data)==null?void 0:S.station)&&s(m,{children:s(u,{children:i("h4",{className:"card-title",children:[(N=(y=n==null?void 0:n.data)==null?void 0:y.station)==null?void 0:N.station_name," -"," ",(P=(k=n==null?void 0:n.data)==null?void 0:k.station)==null?void 0:P.station_description," -"," ",(O=(M=n==null?void 0:n.data)==null?void 0:M.batches)==null?void 0:O.length," Active Batch/es Found"]})})}),((A=(B=n==null?void 0:n.data)==null?void 0:B.batches)==null?void 0:A.length)>0?i("span",{children:[s(m,{children:s(u,{children:(((w=n==null?void 0:n.data)==null?void 0:w.route)&&((D=n==null?void 0:n.data)==null?void 0:D.route)!="all"||((F=(j=n==null?void 0:n.data)==null?void 0:j.batches)==null?void 0:F.length)==1)&&((T=(R=n==null?void 0:n.data)==null?void 0:R.stations_in_route)==null?void 0:T.length)>0?i(h,{children:[s(l,{sm:"3"}),s(l,{sm:"4",children:s(v,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stations_in_routeOptions,placeholder:"Select Route (To move to other stations)",value:(W=n==null?void 0:n.stations_in_routeOptions)==null?void 0:W.find(e=>(e==null?void 0:e.value)==(a==null?void 0:a.route)),onChange:e=>o({station_change:e==null?void 0:e.value})})}),s(l,{sm:"2",className:"d-flex align-items-start flex-column",children:s(f,{color:"primary",onClick:se,disabled:t,children:t?"Please Wait":"Move to Station"})})]}):i(h,{children:[s(l,{sm:"3"}),s(l,{sm:"4",children:s(v,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.routes_in_stationOptions,placeholder:"Select Route (To move to other stations)",value:(E=n==null?void 0:n.routes_in_stationOptions)==null?void 0:E.find(e=>(e==null?void 0:e.value)==(a==null?void 0:a.route)),onChange:e=>o({route:e==null?void 0:e.value})})}),s(l,{sm:"2",className:"d-flex align-items-start flex-column",children:s(f,{color:"primary",onClick:()=>c({}),disabled:t,children:t?"Please Wait":"Filter"})})]})})}),i(m,{children:[s(re,{children:s(f,{color:"primary",onClick:ne,disabled:t,children:t?"Please Wait":"Move to Next Station"})}),i(u,{children:[i(h,{className:"mb-1",children:[s(l,{sm:"1",children:s(g,{type:"checkbox",checked:n==null?void 0:n.allChecked,onChange:ee})}),s(l,{sm:"1",children:n!=null&&n.allChecked?"UnCheck All":"Check All"}),s(l,{sm:"1",children:"Batch Date"}),s(l,{sm:"2",children:"Min. Order Date"}),s(l,{sm:"2",children:"Station"}),s(l,{sm:"1",children:"Next Station"}),s(l,{sm:"1",children:"Route"}),s(l,{sm:"1",children:"Line"}),s(l,{sm:"2",children:"Image"}),s("hr",{})]}),(L=(I=n==null?void 0:n.data)==null?void 0:I.batches)==null?void 0:L.map((e,r)=>{var U,V,$,G,H,K,Q,X,Y,q;return i(h,{children:[s(l,{sm:"1",children:s(g,{type:"checkbox",value:e==null?void 0:e.batch_number,checked:(U=n==null?void 0:n.moveParams)==null?void 0:U.includes(e==null?void 0:e.batch_number),onChange:b})}),i(l,{sm:"1",children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,children:e==null?void 0:e.batch_number}),s("br",{}),(e==null?void 0:e.status.charAt(0).toUpperCase())+(e==null?void 0:e.status.slice(1))]}),s(l,{sm:"1",children:J(e==null?void 0:e.creation_date).format("dd MMM yyyy")}),s(l,{sm:"2",children:J(e==null?void 0:e.min_order_date).format("dd MMM yyyy")}),i(l,{sm:"2",children:[(V=e==null?void 0:e.station)==null?void 0:V.station_name," -"," ",($=e==null?void 0:e.station)==null?void 0:$.station_description]}),s(l,{sm:"1",children:(G=n==null?void 0:n.data)==null?void 0:G.next_in_route[e==null?void 0:e.batch_route_id]}),s(l,{sm:"1",children:(H=e==null?void 0:e.route)==null?void 0:H.batch_code}),s(l,{sm:"1",children:((K=e==null?void 0:e.items_count)==null?void 0:K.length)>0&&((Q=e==null?void 0:e.items_count[0])==null?void 0:Q.count)}),i(l,{sm:"2",children:[s("img",{src:(X=e==null?void 0:e.first_item)==null?void 0:X.item_thumb,width:"70",height:"70"}),s("a",{href:(Y=e==null?void 0:e.first_item)==null?void 0:Y.item_thumb,target:"_blank",children:(q=e.first_item)==null?void 0:q.item_thumb})]}),s("hr",{})]})})]})]})]}):s(m,{children:s(u,{children:s("h4",{className:"d-flex align-items-center justify-content-center",children:"No movable batches found."})})})]})})};export{ve as default};
