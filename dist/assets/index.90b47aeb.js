import{r as l,aB as S,k as v,a as y,dC as R,dD as j,j as n,X as h,Y as u,Z as B,f,Q as E,S as F,T as $,V as i,a0 as w,$ as T,G as _,dF as A}from"./index.3c92940a.js";import{a as G}from"./App.1e2e16c3.js";const O=()=>{var C;const[d,p]=l.exports.useState(null),{id:x}=S(),N=v(),o=G(),r=y(s=>s.roles),P=s=>{const c=d==null?void 0:d.map(a=>(a==null?void 0:a.id)===s?{id:a==null?void 0:a.id,attached:!(a!=null&&a.attached)}:a);p(c)};l.exports.useEffect(()=>{var c;const s=(c=r==null?void 0:r.allPermission)==null?void 0:c.map(a=>{var g,D;return((D=(g=r==null?void 0:r.role)==null?void 0:g.permissions)==null?void 0:D.find(e=>(e==null?void 0:e.id)===(a==null?void 0:a.id)))?{id:a==null?void 0:a.id,attached:!0}:{id:a==null?void 0:a.id,attached:!1}});p(s)},[r==null?void 0:r.role]),l.exports.useEffect(()=>{o(R(x)),o(j())},[]);const b=()=>{const s=[];d==null||d.forEach(a=>{a!=null&&a.attached&&s.push(a==null?void 0:a.id)}),o(A({role_id:x,permission_id:s})),N("/role")},k=s=>{const c=d==null?void 0:d.find(a=>(a==null?void 0:a.id)===s);return c==null?void 0:c.attached};return n(l.exports.Fragment,{children:n(h,{children:n(u,{md:"6",sm:"12",children:n(B,{children:f(E,{children:[n(F,{children:n($,{tag:"h4",children:"New Role"})}),f(i,{children:[n(h,{children:(C=r==null?void 0:r.allPermission)==null?void 0:C.map(s=>f(u,{sm:"12",children:[n(w,{type:"checkbox",name:s==null?void 0:s.id,id:s==null?void 0:s.id,checked:k(s==null?void 0:s.id),onChange:()=>P(s==null?void 0:s.id)}),n(T,{className:"form-label mx-2",for:"name",children:s==null?void 0:s.name})]}))}),n(h,{children:n(u,{sm:"12",className:"mt-1",children:n("div",{className:"d-flex",children:n(_,{className:"me-1",color:"primary",type:"submit",onClick:s=>{s.preventDefault(),b()},children:"Submit"})})})})]})]})})})})})};export{O as default};
