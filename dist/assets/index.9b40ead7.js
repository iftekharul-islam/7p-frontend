import{r as O,j as a,p as E,k as re,a as le,eW as ce,eX as ie,a5 as ne,eY as de,eZ as se,f as n,Q as P,S as T,G as z,V as U,X as C,Y as d,a0 as y,I as te,br as he,e_ as pe,e$ as ue,f0 as oe,f1 as me}from"./index.2802cfd2.js";/* empty css                  */import{a as fe}from"./App.68a9a764.js";/* empty css                                  */import{S as b}from"./react-select.esm.04aba8d6.js";import{E as ge}from"./edit.99ba6477.js";import"./emotion-memoize.esm.06f0e458.js";function ve(s,f){if(s==null)return{};var m=xe(s,f),u,t;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);for(t=0;t<o.length;t++)u=o[t],!(f.indexOf(u)>=0)&&(!Object.prototype.propertyIsEnumerable.call(s,u)||(m[u]=s[u]))}return m}function xe(s,f){if(s==null)return{};var m={},u=Object.keys(s),t,o;for(o=0;o<u.length;o++)t=u[o],!(f.indexOf(t)>=0)&&(m[t]=s[t]);return m}var W=O.exports.forwardRef(function(s,f){var m=s.color,u=m===void 0?"currentColor":m,t=s.size,o=t===void 0?24:t,r=ve(s,["color","size"]);return a("svg",{ref:f,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:u,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...r,children:a("polyline",{points:"20 6 9 17 4 12"})})});W.propTypes={color:E.exports.string,size:E.exports.oneOfType([E.exports.string,E.exports.number])};W.displayName="Check";const Ne=W,Fe=()=>{var R,A,B,L,V,X,Y,w,G,H,Q,Z,q,J;const s=fe(),f=re(),[m,u]=O.exports.useState(!1),[t,o]=O.exports.useState(null),r=le(e=>e.tasks),{searchParams:h,newTask:l}=r,[N,S]=O.exports.useState(!1);let I="";O.exports.useEffect(()=>{s(ce()),s(ie())},[]);const[j,_e]=ne();O.exports.useEffect(()=>{if(j){let e={};j==null||j.forEach((i,p)=>{i!="null"&&(e={...e,[p]:i})}),D(e),$()}},[j]);const $=async()=>{S(!0),await s(de()),S(!1)},D=e=>{s(se(e))},g=e=>{s(pe(e))},k=async e=>{await s(ue(e))},ee=async e=>{var v,x,F;e==null||e.preventDefault(),S(!0);const i=new FormData;i.append("user",l==null?void 0:l.user),i.append("text",l==null?void 0:l.text),i.append("due_date",l==null?void 0:l.due_date),i.append("attachment",l==null?void 0:l.attachment),i.append("search_in",l==null?void 0:l.search_in),i.append("associate_with",l==null?void 0:l.associate_with);const p=await s(oe(i));((v=p==null?void 0:p.payload)==null?void 0:v.status)==201&&f("/tasks?task_id="+((F=(x=p==null?void 0:p.payload)==null?void 0:x.params)==null?void 0:F.task_id),{replace:!0}),S(!1)},ae=async()=>{var p,v,x;S(!0);const e=new FormData;e.append("reassign",l==null?void 0:l.reassign),e.append("note_text",l==null?void 0:l.note_text),e.append("attach",l==null?void 0:l.attach);const i=await s(me({data:e,id:t}));((p=i==null?void 0:i.payload)==null?void 0:p.status)==201&&f("/tasks?task_id="+((x=(v=i==null?void 0:i.payload)==null?void 0:v.params)==null?void 0:x.task_id),{replace:!0}),S(!1)};return a("div",{className:"app-user-list",children:n(O.exports.Fragment,{children:[n(P,{className:"px-1",children:[n(T,{children:[a("h4",{className:"card-title",children:"Search Tasks"}),a(z,{color:"primary",onClick:e=>{e.preventDefault(),u(!m)},children:"New Task"})]}),a(U,{children:n(C,{className:"border p-1",children:[a(d,{sm:"2",children:a(b,{className:"react-select",classNamePrefix:"select",options:r==null?void 0:r.taskStatusOptions,placeholder:"Task Status",value:(R=r==null?void 0:r.taskStatusOptions)==null?void 0:R.find(e=>(e==null?void 0:e.value)==(h==null?void 0:h.status)),onChange:e=>D({status:e==null?void 0:e.value}),isClearable:!0})}),a(d,{sm:"3",children:a(b,{className:"react-select",classNamePrefix:"select",options:r==null?void 0:r.userOptions,placeholder:"Assigned To",value:(A=r==null?void 0:r.userOptions)==null?void 0:A.find(e=>(e==null?void 0:e.value)==(h==null?void 0:h.user_id)),onChange:e=>D({user_id:e==null?void 0:e.value}),isClearable:!0})}),a(d,{sm:"3",children:a(b,{className:"react-select",classNamePrefix:"select",options:r==null?void 0:r.userOptions,placeholder:"Created By",value:(B=r==null?void 0:r.userOptions)==null?void 0:B.find(e=>(e==null?void 0:e.value)==(h==null?void 0:h.create_user_id)),onChange:e=>D({create_user_id:e==null?void 0:e.value}),isClearable:!0})}),a(d,{sm:"1",children:a(y,{placeholder:"Search For",value:h==null?void 0:h.search_for,onChange:e=>{var i;D({search_for:(i=e==null?void 0:e.target)==null?void 0:i.value})}})}),a(d,{sm:"2",children:a(b,{className:"react-select",classNamePrefix:"select",options:r==null?void 0:r.searchInOption,placeholder:"Search In",value:(L=r==null?void 0:r.searchInOption)==null?void 0:L.find(e=>(e==null?void 0:e.value)==(h==null?void 0:h.search_in)),onChange:e=>D({search_in:e==null?void 0:e.value}),isClearable:!0})}),a(d,{sm:"1",className:"d-flex justify-content-end",children:a(z,{color:"primary",onClick:$,disabled:N,className:"w-full",children:N?"Please Wait":"Filter"})})]})})]}),m&&n(P,{className:"p-2",children:[a(T,{children:a("h4",{className:"card-title",children:"Create Task"})}),a(U,{children:n(C,{className:"border rounded p-1",children:[n(d,{sm:"8",children:[n(C,{className:"mb-1",children:[a(d,{sm:"4",children:a(b,{className:"react-select",classNamePrefix:"select",options:r==null?void 0:r.userOptions,placeholder:"For",value:(V=r==null?void 0:r.userOptions)==null?void 0:V.find(e=>(e==null?void 0:e.value)==(l==null?void 0:l.user)),onChange:e=>g({user:e==null?void 0:e.value}),isClearable:!0})}),a(d,{sm:"8",children:a(y,{type:"text",placeholder:"Task",value:l==null?void 0:l.text,onChange:e=>{var i;return g({text:(i=e==null?void 0:e.target)==null?void 0:i.value})}})})]}),n(C,{children:[a(d,{sm:"4",children:a(y,{type:"date",placeholder:"Due Date",value:l==null?void 0:l.due_date,onChange:e=>{var i;return g({due_date:(i=e==null?void 0:e.target)==null?void 0:i.value})}})}),a(d,{sm:"8",children:a(y,{type:"file",placeholder:"Attachment",onChange:e=>{var i;return g({attachment:(i=e==null?void 0:e.target)==null?void 0:i.files[0]})}})})]})]}),a(d,{sm:"3",children:(X=r==null?void 0:r.data)!=null&&X.array?n("div",{children:[a("a",{href:(Y=r==null?void 0:r.data)==null?void 0:Y.array[2],target:"_blank",children:(w=r==null?void 0:r.data)==null?void 0:w.array[3]}),a("br",{}),(G=r==null?void 0:r.data)==null?void 0:G.array[4]," ",a("br",{})," ",(H=r==null?void 0:r.data)==null?void 0:H.array[5]]}):n(C,{children:[a(d,{sm:"12",className:"mb-1",children:a(b,{className:"react-select",classNamePrefix:"select",placeholder:"Search In",options:r==null?void 0:r.searchInOption,value:l==null?void 0:l.search_in,onChange:e=>{var i;return g({search_in:(i=e==null?void 0:e.target)==null?void 0:i.value})}})}),a(d,{sm:"12",children:a(y,{type:"text",placeholder:"Search For",value:l==null?void 0:l.associate_with,onChange:e=>{var i;return g({associate_with:(i=e==null?void 0:e.target)==null?void 0:i.value})}})})]})}),a(d,{sm:"1",className:"d-flex align-items-center",children:a(z,{color:"primary",onClick:ee,disabled:N,children:N?"Please Wait":"Create"})})]})})]}),a(P,{children:a(U,{children:((Z=(Q=r==null?void 0:r.data)==null?void 0:Q.tasks)==null?void 0:Z.length)>0?(J=(q=r==null?void 0:r.data)==null?void 0:q.tasks)==null?void 0:J.map((e,i)=>{var p,v,x,F,K;return n("span",{children:[n(C,{className:"p-1 border rounded mb-1",children:[n(d,{sm:"1",className:"d-flex justify-content-end",children:[a(ge,{ize:18,className:"text-info me-50",onClick:()=>o(e==null?void 0:e.id)}),a(Ne,{ize:18,className:"text-success me-50",onClick:()=>k(e==null?void 0:e.id)})]}),n(d,{sm:"2",children:[(e==null?void 0:e.msg_read)!="2"?n("strong",{children:["*Task ",e==null?void 0:e.id]}):n("span",{children:["Task ",e==null?void 0:e.id]}),a("br",{}),(e==null?void 0:e.due_date)&&(e==null?void 0:e.due_date)!="0000-00-00"&&(e==null?void 0:e.due_date)<=new Date&&n("strong",{className:"text-danger",children:["Due ",e==null?void 0:e.due_date]}),(e==null?void 0:e.due_date)&&(e==null?void 0:e.due_date)!="0000-00-00"&&n("span",{children:["Due ",e==null?void 0:e.due_date]})]}),a(d,{sm:"2",children:e!=null&&e.assigned_user?(e==null?void 0:e.status)=="O"?a("strong",{children:(p=e==null?void 0:e.assigned_user)==null?void 0:p.username}):(e==null?void 0:e.status)=="C"?a("span",{children:(v=e==null?void 0:e.assigned_user)==null?void 0:v.username}):a("span",{children:"Unrecognized status"}):a("span",{children:"USER NOT FOUND"})}),n(d,{sm:"4",children:[n("div",{className:"alert-info mb-1 p-1 rounded",children:[a("div",{children:e==null?void 0:e.text}),n("div",{children:[e!=null&&e.create_user?n("span",{children:["- ",(x=e==null?void 0:e.create_user)==null?void 0:x.username]}):a("span",{children:"USER NOT FOUND"}),a("span",{children:e==null?void 0:e.created_at})]})]}),(F=e==null?void 0:e.notes)==null?void 0:F.map((c,_)=>{var M;return I=="alert-warning"?I="alert-success":I="alert-warning",n("div",{className:`mb-1 ${I} p-1`,children:[a("div",{children:(c==null?void 0:c.ext)==null?a("div",{children:c==null?void 0:c.text}):a("a",{download:c==null?void 0:c.text,href:`/assets/attachments/${c.text}`,children:["gif","jpg","png","jpeg"].includes(c==null?void 0:c.ext)?a("img",{src:`/assets/attachments/${c==null?void 0:c.text}`,className:"Image"}):n("span",{children:["Download ",c==null?void 0:c.ext]})})}),n("div",{children:[c!=null&&c.user?n("span",{children:["- ",(M=c==null?void 0:c.user)==null?void 0:M.username]}):a("span",{children:"USER NOT FOUND"}),n("span",{children:[" - ",c==null?void 0:c.created_at]})]})]},_)})]})]},i),t==(e==null?void 0:e.id)&&n(C,{className:"border rounded p-1",children:[a(d,{sm:"3",children:a(b,{className:"react-select",classNamePrefix:"select",options:r==null?void 0:r.userOptions,placeholder:"Reassign",value:(K=r==null?void 0:r.userOptions)==null?void 0:K.find(c=>(c==null?void 0:c.value)==(e==null?void 0:e.reassign)),onChange:c=>g({reassign:c==null?void 0:c.value}),isClearable:!0})}),a(d,{sm:"4",children:a(y,{type:"text",placeholder:"Add Note",value:l==null?void 0:l.note_text,onChange:c=>{var _;return g({note_text:(_=c==null?void 0:c.target)==null?void 0:_.value})}})}),a(d,{sm:"3",children:a(y,{type:"file",placeholder:"Attachment",onChange:c=>{var _;return g({attach:(_=c==null?void 0:c.target)==null?void 0:_.files[0]})}})}),a(d,{sm:"2",className:"d-flex align-items-center",children:a(z,{color:"primary",onClick:ae,disabled:N,children:N?"Please Wait":"Create"})})]})]})}):a("div",{className:"text-center",children:N?n(te,{children:[a(he,{size:"sm"}),"Please Wait"]}):"No Data Found"})})})]})})};export{Fe as default};
