import{a as $,r as m,c6 as J,f as s,X as x,j as r,Y as n,$ as u,a0 as i,G as C,aG as U,c3 as Q,c2 as Y,c7 as X,c8 as R,c9 as q,aA as W,aB as Z,aC as H,aD as G,ca as K,I as j,cb as V,cc as ee,cd as re,ce as P,Z as le,Q as se,S as ne,T as ce,V as oe,cf as he,cg as ie}from"./index.cea1df40.js";/* empty css                  */import{a as O,M as pe,s as D}from"./App.9726445a.js";import{E as _e}from"./eye.61b2104b.js";import{F as ue}from"./index.31b5a765.js";import{S as w}from"./react-select.esm.3c5cd197.js";import{D as A,d as fe,r as te}from"./react-draft-wysiwyg.e119ef64.js";import{A as be}from"./react-select-async.esm.43254c4a.js";import"./emotion-memoize.esm.06f0e458.js";const de=(e,c,_,E)=>{var g;const v=O();return $(h=>h.manualOrders),m.exports.useEffect(()=>{v(J())},[]),s(m.exports.Fragment,{children:[s(x,{className:"pt-2",children:[r(n,{sm:"5",children:s(x,{children:[s(n,{sm:"12",children:[r("h4",{children:"Ship To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_full_name",children:"Full Name"}),r(i,{type:"text",name:"ship_full_name",id:"ship_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.ship_full_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_company_name",children:"Company"}),r(i,{type:"text",name:"ship_company_name",id:"ship_company_name",placeholder:"Enter Company",value:e==null?void 0:e.ship_company_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_address_1",children:"Street"}),r(i,{type:"text",name:"ship_address_1",id:"ship_address_1",placeholder:"Enter Street",value:e==null?void 0:e.ship_address_1,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_first_name",children:"First/Last"}),r(i,{type:"text",name:"ship_first_name",id:"ship_first_name",placeholder:"Enter First",value:e==null?void 0:e.ship_first_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_last_name",children:"."}),r(i,{type:"text",name:"ship_last_name",id:"ship_last_name",placeholder:"Enter Last",value:e==null?void 0:e.ship_last_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_address_2",children:"Line 2"}),r(i,{type:"text",name:"ship_address_2",id:"ship_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.ship_address_2,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_city",children:"City"}),r(i,{type:"text",name:"ship_city",id:"ship_city",placeholder:"Enter City",value:e==null?void 0:e.ship_city,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_state",children:"State"}),r(i,{type:"text",name:"ship_state",id:"ship_state",placeholder:"State",value:e==null?void 0:e.ship_state,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_zip",children:"ZipCode"}),r(i,{type:"text",name:"ship_zip",id:"ship_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.ship_zip,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_country",children:"Country"}),r(i,{type:"text",name:"ship_country",id:"ship_country",placeholder:"Enter Country",value:e==null?void 0:e.ship_country,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"ship_phone",children:"Phone"}),r(i,{type:"text",name:"ship_phone",id:"ship_phone",placeholder:"Enter Phone",value:e==null?void 0:e.ship_phone,onChange:c})]})]})}),r(n,{sm:"2"}),r(n,{sm:"5",children:s(x,{children:[s(n,{sm:"12",children:[r("h4",{children:"Bill To"}),r("hr",{})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_full_name",children:"Full Name"}),r(i,{type:"text",name:"bill_full_name",id:"bill_full_name",placeholder:"Enter Full Name",value:e==null?void 0:e.bill_full_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_company_name",children:"Company"}),r(i,{type:"text",name:"bill_company_name",id:"bill_company_name",placeholder:"Enter Company",value:e==null?void 0:e.bill_company_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_address_2",children:"Line 2"}),r(i,{type:"text",name:"bill_address_2",id:"bill_address_2",placeholder:"Enter Line 2",value:e==null?void 0:e.bill_address_2,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_first_name",children:"First/Last"}),r(i,{type:"text",name:"bill_first_name",id:"bill_first_name",placeholder:"Enter First",value:e==null?void 0:e.bill_first_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_last_name",children:"."}),r(i,{type:"text",name:"bill_last_name",id:"bill_last_name",placeholder:"Enter Last",value:e==null?void 0:e.bill_last_name,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_address_1",children:"Street"}),r(i,{type:"text",name:"bill_address_1",id:"bill_address_1",placeholder:"Enter Street",value:e==null?void 0:e.bill_address_1,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_city",children:"City"}),r(i,{type:"text",name:"bill_city",id:"bill_city",placeholder:"Enter City",value:e==null?void 0:e.bill_city,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_state",children:"State"}),r(i,{type:"text",name:"bill_state",id:"bill_state",placeholder:"State",value:e==null?void 0:e.bill_state,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_zip",children:"ZipCode"}),r(i,{type:"text",name:"bill_zip",id:"bill_zip",placeholder:"Enter ZipCode",value:e==null?void 0:e.bill_zip,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_country",children:"Country"}),r(i,{type:"text",name:"bill_country",id:"bill_country",placeholder:"Enter Country",value:e==null?void 0:e.bill_country,onChange:c})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"bill_phone",children:"Phone"}),r(i,{type:"text",name:"bill_phone",id:"bill_phone",placeholder:"Enter Phone",value:e==null?void 0:e.bill_phone,onChange:c})]})]})})]}),r("hr",{}),s(x,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(u,{className:"form-label",for:"bill_email",children:"Email"})}),r(n,{sm:"3",children:r(i,{type:"text",name:"bill_email",id:"bill_email",placeholder:"Enter Email",value:(g=e==null?void 0:e.customer)==null?void 0:g.bill_email,onChange:c})}),s(n,{sm:"2",className:"d-flex align-items-center",children:[r("div",{onClick:h=>{E(!0),h.preventDefault()},children:r(pe,{size:20,className:"mx-1"})}),"|",r(_e,{size:20,className:"mx-1"})]})]}),s(x,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(u,{className:"form-label",for:"order_comments",children:"Customer comment"})}),r(n,{sm:"3",children:r(i,{type:"text",name:"order_comments",id:"order_comments",placeholder:"Enter Customer comment",value:e==null?void 0:e.order_comments,onChange:c})})]}),s(x,{className:"pt-1",children:[r(n,{sm:"2",className:"d-flex align-items-center",children:r(u,{className:"form-label",for:"ship_message",children:"Shipper Message"})}),r(n,{sm:"3",children:r(i,{type:"textarea",name:"ship_message",id:"ship_message",placeholder:"Enter Shipper Message",value:e==null?void 0:e.ship_message,onChange:c})})]})]})},ye=(e,c,_,E)=>{var v,g,h,t,d,b,l,p;return m.exports.useEffect(()=>{var f,N,o,k,y,a,S;c({target:{name:"total",value:parseFloat(parseFloat((f=e==null?void 0:e.subtotal)!=null?f:0)-parseFloat((N=e==null?void 0:e.coupon_value)!=null?N:0)+parseFloat((o=e==null?void 0:e.gift_wrap_cost)!=null?o:0)+parseFloat((k=e==null?void 0:e.shipping_charge)!=null?k:0)+parseFloat((y=e==null?void 0:e.insurance)!=null?y:0)+parseFloat((a=e==null?void 0:e.adjustments)!=null?a:0)+parseFloat((S=e==null?void 0:e.tax_charge)!=null?S:0)).toFixed(2)}})},[e==null?void 0:e.subtotal,e==null?void 0:e.coupon_value,e==null?void 0:e.gift_wrap_cost,e==null?void 0:e.shipping_charge,e==null?void 0:e.insurance,e==null?void 0:e.adjustments,e==null?void 0:e.tax_charge]),r(m.exports.Fragment,{children:s(x,{className:"pt-2",children:[r(n,{sm:"7"}),s(n,{sm:"5",children:[s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Subtotal:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"subtotal",id:"subtotal",value:(v=e==null?void 0:e.subtotal)!=null?v:0,disabled:!0})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Coupon-discount:"}),r(n,{sm:"4",children:r(i,{type:"text",name:"coupon_id",id:"coupon_id",placeholder:"Coupon id",value:e==null?void 0:e.coupon_id,onChange:c})}),r(n,{sm:"4",children:r(i,{type:"number",name:"coupon_value",id:"coupon_value",value:(g=e==null?void 0:e.coupon_value)!=null?g:0,onChange:c})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Gift Wrap:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"gift_wrap_cost",id:"gift_wrap_cost",value:(h=e==null?void 0:e.gift_wrap_cost)!=null?h:0,onChange:c})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Shipping:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"shipping_charge",id:"shipping_charge",value:(t=e==null?void 0:e.shipping_charge)!=null?t:0,onChange:c})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Insurance:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"insurance",id:"insurance",value:(d=e==null?void 0:e.insurance)!=null?d:0,onChange:c})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Adjustments:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"adjustments",id:"adjustments",value:(b=e==null?void 0:e.adjustments)!=null?b:0,onChange:c})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Tax:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"tax_charge",id:"tax_charge",value:(l=e==null?void 0:e.tax_charge)!=null?l:0,onChange:c})})]}),s(x,{children:[r(n,{sm:"4",className:"d-flex align-self-center justify-content-end",children:"Total:"}),r(n,{sm:"4"}),r(n,{sm:"4",children:r(i,{type:"number",name:"total",id:"total",value:(p=e==null?void 0:e.total)!=null?p:0,disabled:!0})})]}),r(x,{children:r(n,{sm:"12",className:"mt-1",children:r("div",{className:"d-flex justify-content-end",children:r(C,{className:"me-1",color:"primary",type:"submit",onClick:f=>{f.preventDefault(),_()},children:"Update Order"})})})})]})]})})},me=(e,c,_,E)=>{var l,p,f,N;const v=O(),{id:g}=U(),h=$(o=>o.orders);m.exports.useEffect(()=>{v(Q()),v(Y())},[]);const t=o=>{v(X({id:g,store_select:o==null?void 0:o.value})),c({target:{name:"store_id",value:o==null?void 0:o.value}})},d=o=>{v(R({id:g,shipping_method:o==null?void 0:o.value})),c({target:{name:"shipping_method",value:o==null?void 0:o.value}})},b=o=>{v(R({id:g,ship_date:o[0]})),c({target:{name:"ship_date",value:o[0]}})};return s(m.exports.Fragment,{children:[s(x,{children:[s(n,{sm:"4",children:[s("div",{children:["Order: ",e==null?void 0:e.order_id]}),s("div",{children:["Date: ",e==null?void 0:e.order_date]}),(e==null?void 0:e.purchase_order)&&s("div",{children:["PO: ",e==null?void 0:e.purchase_order]})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"store",children:"Store"}),r(w,{className:"react-select",classNamePrefix:"select",theme:D,placeholder:"Select Store",options:h==null?void 0:h.storeOptions,value:(l=h==null?void 0:h.storeOptions)==null?void 0:l.find(o=>(o==null?void 0:o.value)==(e==null?void 0:e.store_id)),onChange:t})]}),r(n,{sm:"4"})]}),r("hr",{}),s(x,{children:[r(n,{sm:"2"}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"store",children:"Ship Via"}),r(w,{className:"react-select",classNamePrefix:"select",theme:D,placeholder:"Ship Via",options:h==null?void 0:h.shipOptions,value:(p=h==null?void 0:h.shipOptions)==null?void 0:p.find(o=>{var k,y;if(((k=e==null?void 0:e.store)==null?void 0:k.change_method)=="1"&&(e==null?void 0:e.carrier)!="MN")return(o==null?void 0:o.value)===`${e==null?void 0:e.carrier}*${e==null?void 0:e.method}`;if(((y=e==null?void 0:e.store)==null?void 0:y.change_method)=="1")return(o==null?void 0:o.value)===`${e==null?void 0:e.carrier}*`;if(e!=null&&e.carrier)return{label:(e==null?void 0:e.carrier)+(e==null?void 0:e.method),value:(e==null?void 0:e.carrier)+(e==null?void 0:e.method)};o==null||o.value}),isDisabled:((f=e==null?void 0:e.store)==null?void 0:f.change_method)!="1",onChange:d})]}),s(n,{sm:"4",children:[r(u,{className:"form-label",for:"date",children:"Ship By Date"}),r(ue,{className:"form-control",id:"date",placeholder:"Select Date",value:(N=e==null?void 0:e.ship_date)!=null?N:null,options:{dateFormat:"d-m-Y"},onChange:b})]}),s(n,{sm:"2",className:"d-flex align-items-end",children:[(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7&&r("div",{children:(e==null?void 0:e.carrier)=="MN"&&(e==null?void 0:e.order_status)!=12&&(e==null?void 0:e.order_status)!=7?r(C,{color:"info",onClick:o=>o.preventDefault(),children:(order==null?void 0:order.method)!=""?order==null?void 0:order.method:"Manual Ship"}):(e==null?void 0:e.batched)==0&&(e==null?void 0:e.order_status)!=6&&(e==null?void 0:e.order_status)!=8?r(C,{color:"info",onClick:o=>o.preventDefault(),children:"Ship"}):(e==null?void 0:e.order_status)==10&&r(C,{color:"info",onClick:o=>o.preventDefault(),children:"Re-Ship Returned Package"})}),((e==null?void 0:e.batched)==0||(e==null?void 0:e.batched)<=2)&&r(C,{color:"info",onClick:()=>{var o;return E((o=e==null?void 0:e.order)==null?void 0:o.id)},children:"Batch"})]})]})]})},ge=(e,c,_)=>{var b;const[E,v]=m.exports.useState(()=>A.EditorState.createEmpty());m.exports.useEffect(()=>{if(E){const l=fe(A.convertToRaw(E.getCurrentContent()));d({...t,message:l})}},[E]);const g=O(),h=$(l=>l.orders),[t,d]=m.exports.useState(null);return m.exports.useEffect(()=>{var l;d({order_5p:_==null?void 0:_.id,recipient:(l=_==null?void 0:_.customer)==null?void 0:l.bill_email,subject:`Order ${_==null?void 0:_.short_order}`,message_types:0,message:""})},[_]),m.exports.useEffect(()=>{g(q())},[]),m.exports.useEffect(()=>{g(q())},[]),r("div",{children:s(W,{isOpen:e,toggle:()=>c(!e),className:"modal-dialog-centered modal-lg",fullscreen:"sm",children:[r(Z,{toggle:()=>c(!e),children:"Send email to customer"}),s(H,{children:[s("div",{children:[r(u,{className:"form-label",for:"email",children:"Email"}),r(i,{type:"email",id:"email",value:t==null?void 0:t.recipient,onChange:l=>{var p;return d({...t,recipient:(p=l==null?void 0:l.target)==null?void 0:p.value})},placeholder:"Email Address"})]}),s("div",{children:[r(u,{className:"form-label",for:"email",children:"Type"}),r(w,{className:"react-select",classNamePrefix:"select",theme:D,placeholder:"Select Type",options:h==null?void 0:h.emailTypeOptions,value:(b=h==null?void 0:h.emailTypeOptions)==null?void 0:b.find(l=>(l==null?void 0:l.value)===(t==null?void 0:t.message_types)),onChange:l=>d({...t,message_types:l==null?void 0:l.value})})]}),s("div",{children:[r(u,{className:"form-label",for:"email",children:"Subject"}),r(i,{type:"text",id:"text",value:t==null?void 0:t.subject,onChange:l=>{var p;return d({...t,subject:(p=l==null?void 0:l.target)==null?void 0:p.value})},placeholder:"Enter Subject"})]}),r("div",{children:r(te.exports.Editor,{editorState:E,onEditorStateChange:l=>v(l),wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class"})})]}),r(G,{children:r(C,{color:"primary",onClick:l=>{l.preventDefault(),g(K(t)),c(!e)},children:"Send"})})]})})};function z(e){if(e[0])return e.substring(0,3)==="927"||e[0]==="8"?`https://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e[0]==="L"||e[0]==="U"?`https://tools.usps.com/go/TrackConfirmAction?qtc_tLabels1=${e}`:e.substring(0,3)==="937"?`http://webtrack.dhlglobalmail.com/?trackingnumber=${e}`:e.substring(0,2)==="94"||e.substring(0,3)==="927"?`https://tools.usps.com/go/TrackConfirmAction?tLabels=${e}`:e[0]==="2"||e[0]==="7"?`http://www.fedex.com/Tracking?tracknumbers=${e}`:e.substring(0,2)==="1Z"?`http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=${e}`:e.substring(0,2)==="42"?`https://webtrack.dhlecs.com/?trackingnumber=${e}`:"#"}function xe({item:e,setShowTracking:c,setItemTracking:_,carrier:E}){var g,h,t,d,b,l,p,f,N,o,k,y,a,S,T,I,L,B;const v=(F,M)=>{console.log("redo item")};return s("span",{children:[(e==null?void 0:e.item_status)==="production"?e!=null&&e.batch?s("p",{children:["View batch:",r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((g=e==null?void 0:e.batch)==null?void 0:g.station)&&s(j,{children:[r("br",{}),s("span",{children:[(t=(h=e==null?void 0:e.batch)==null?void 0:h.station)==null?void 0:t.station_name," ",(b=(d=e==null?void 0:e.batch)==null?void 0:d.station)==null?void 0:b.station_description]}),r("br",{}),(l=e==null?void 0:e.batch)==null?void 0:l.change_date]})]}):(e==null?void 0:e.batch_number)!=="0"?r("p",{children:"No Batch Record"}):r("p",{children:"Unbatched"}):(e==null?void 0:e.item_status)==="wap"?e!=null&&e.wap_item?s(j,{children:[s("p",{children:["WAP Bin"," ",r("a",{href:`/wap/details/${(p=e==null?void 0:e.wap_item)==null?void 0:p.bin_id}`,target:"_blank",children:(f=e==null?void 0:e.wap_item)==null?void 0:f.bin.name})]}),r("p",{children:"Added:"}),r("p",{children:(N=e==null?void 0:e.wap_item)==null?void 0:N.created_at})]}):r("p",{children:"WAP BIN: NOT FOUND"}):(e==null?void 0:e.item_status)==="rejected"&&(e==null?void 0:e.rejection)?(e==null?void 0:e.rejection.graphic_status)!=="Redo Item"?s(j,{children:[r("p",{children:"Rejected"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((o=e==null?void 0:e.rejection)==null?void 0:o.rejection_reason_info)&&s(j,{children:[r("br",{}),(y=(k=e==null?void 0:e.rejection)==null?void 0:k.rejection_reason_info)==null?void 0:y.rejection_message]}),r("br",{}),(a=e==null?void 0:e.rejection)==null?void 0:a.rejection_message,r("br",{}),(S=e==null?void 0:e.rejection)==null?void 0:S.created_at]}):s(j,{children:[r("p",{children:"Redo"}),r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),((T=e==null?void 0:e.rejection)==null?void 0:T.rejection_reason_info)&&s(j,{children:[r("br",{}),(L=(I=e==null?void 0:e.rejection)==null?void 0:I.rejection_reason_info)==null?void 0:L.rejection_message]}),r("br",{}),e==null?void 0:e.rejection.rejection_message,r("br",{}),e==null?void 0:e.rejection.created_at]}):(e==null?void 0:e.item_status)==="rejected"&&!(e!=null&&e.rejection)?r("p",{children:"REJECTED BUT NO REJECTION RECORD"}):(e==null?void 0:e.item_status)==="back order"?(()=>{let F=0;return e!=null&&e.inventoryunit&&(e==null||e.inventoryunit.forEach(M=>{M.open_po&&M.open_po.eta>F&&(F=M.open_po.eta)})),s(j,{children:[r("p",{children:"Back Order"}),!(e!=null&&e.batch)&&r("p",{children:"Unbatched"}),F>0&&s("p",{children:["ETA: ",F]})]})})():(e==null?void 0:e.item_status)!=="shipped"&&s(j,{children:[r("p",{children:e==null?void 0:e.item_status}),(e==null?void 0:e.batch)&&s(j,{children:[r("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:e==null?void 0:e.batch_number}),r("br",{}),e==null?void 0:e.batch.change_date]})]}),(e==null?void 0:e.ship_info)&&((B=e==null?void 0:e.ship_info)==null?void 0:B.tracking_number)?s(j,{children:[r("a",{href:`/shipping?search_for_first=${e==null?void 0:e.ship_info.unique_order_id}&search_in_first=unique_order_id`,children:"Shipped"})," ","on"," ",new Date((e==null?void 0:e.ship_info.postmark_date)||Date.now()).toLocaleDateString(),r("br",{}),!(e!=null&&e.ship_info.mail_class.toLowerCase().includes("innovation"))&&s(j,{children:[e==null?void 0:e.ship_info.mail_class,r("br",{})]}),s("a",{href:z(e==null?void 0:e.ship_info.shipping_id),target:"_blank",children:["Trk# ",e==null?void 0:e.ship_info.shipping_id]}),r("br",{}),(e==null?void 0:e.batch)&&s(j,{children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,target:"_blank",children:["Batch ",e==null?void 0:e.batch_number]}),r("br",{})]}),r("br",{}),r("button",{id:"redo-item",onClick:()=>v(e==null?void 0:e.id,e==null?void 0:e.item_quantity),className:"btn btn-xs btn-danger",children:"Redo Item"})]}):(e==null?void 0:e.item_status)==="shipped"&&(e==null?void 0:e.tracking_number)!==null?s("a",{href:z(e==null?void 0:e.tracking_number),target:"_blank",children:["Trk# ",e==null?void 0:e.tracking_number]}):(e==null?void 0:e.item_status)!=="shipped"&&(e==null?void 0:e.item_status)!=="cancelled"&&E!=="MN"?r(j,{children:r("button",{id:"shipitem",onClick:F=>{F.preventDefault(),c(!0),_(e)},className:"btn btn-xs btn-success",children:"Enter Tracking"})}):null]})}const ve=(e,c,_,E,v)=>{var b;const g=O(),h=async l=>{let p=[];return l.length>3?(p=await g(V(l)),p==null?void 0:p.payload):[]},t=l=>{var f,N,o,k,y,a,S;const p=(f=e==null?void 0:e.items)==null?void 0:f.map(T=>({...T}));p==null||p.push({item_id:(N=l==null?void 0:l.data)==null?void 0:N.item_id,child_sku:(o=l==null?void 0:l.data)==null?void 0:o.product_model,id_catalog:(k=l==null?void 0:l.data)==null?void 0:k.id_catalog,item_description:(y=l==null?void 0:l.data)==null?void 0:y.product_name,item_thumb:(a=l==null?void 0:l.data)==null?void 0:a.product_thumb,item_unit_price:(S=l==null?void 0:l.data)==null?void 0:S.product_price,item_quantity:1,is_new:!0}),c({target:{name:"items",value:p}})},d=(l,p)=>{var N,o,k;const f=(N=e==null?void 0:e.items)==null?void 0:N.map(y=>({...y}));f[p][(o=l.target)==null?void 0:o.name]=(k=l.target)==null?void 0:k.value,c({target:{name:"items",value:f}})};return m.exports.useEffect(()=>{const l=parseFloat(e==null?void 0:e.items.reduce(function(p,f){return parseFloat(p)+parseFloat(f==null?void 0:f.item_unit_price)*parseFloat(f==null?void 0:f.item_quantity)},0)).toFixed(2);c({target:{name:"subtotal",value:l}})},[e==null?void 0:e.items]),s(m.exports.Fragment,{children:[s(x,{className:"rounded bg-secondary p-1 my-1 text-uppercase",children:[r(n,{sm:"1 text-light fw-bolder ",children:"Image"}),r(n,{sm:"3 text-light fw-bolder",children:"Name"}),r(n,{sm:"4 text-light fw-bolder",children:"Description"}),r(n,{sm:"1 text-light fw-bolder",children:"Quantity"}),r(n,{sm:"1 text-light fw-bolder",children:"Price"}),r(n,{sm:"1 text-light fw-bolder",children:"Total"}),r(n,{sm:"1 text-light fw-bolder",children:"Action"})]}),(b=e==null?void 0:e.items)==null?void 0:b.map((l,p)=>s(x,{className:"",children:[r(n,{sm:"1",children:r("img",{src:l==null?void 0:l.item_thumb,alt:l==null?void 0:l.child_sku,height:"50",width:"50"})}),s(n,{sm:"3",children:[r("div",{children:l==null?void 0:l.child_sku}),r("div",{children:l==null?void 0:l.item_description})]}),r(n,{sm:"4",children:r(i,{type:"text",Rows:"1",name:"options",id:"options",placeholder:"Click Here",value:l==null?void 0:l.options,onChange:f=>d(f,p)})}),r(n,{sm:"1",children:r(i,{type:"number",name:"item_quantity",id:"item_quantity",placeholder:"Item_quantity",value:l==null?void 0:l.item_quantity,onChange:f=>d(f,p)})}),r(n,{sm:"1",children:r(i,{type:"number",name:"item_unit_price",id:"item_unit_price",placeholder:"Price",value:parseFloat(l==null?void 0:l.item_unit_price).toFixed(2),onChange:f=>d(f,p)})}),r(n,{sm:"1",children:r(i,{type:"number",name:"total_price",id:"total_price",placeholder:"Price",value:parseFloat((l==null?void 0:l.item_quantity)*(l==null?void 0:l.item_unit_price)).toFixed(2),disabled:!0})}),r(n,{sm:"1",children:r(xe,{item:l,setShowTracking:E,setItemTracking:v,carrier:e==null?void 0:e.carrier})}),r("hr",{})]},p)),s(x,{className:"pt-2",children:[r(n,{sm:"2"}),r(n,{sm:"8",children:r(be,{isClearable:!1,className:"react-select",classNamePrefix:"select",name:"callback-react-select",loadOptions:h,value:null,onChange:t,theme:D})}),r(n,{sm:"2"})]})]})},Ne=(e,c,_,E,v)=>{var b;const g=O(),[h,t]=m.exports.useState(null);m.exports.useEffect(()=>{t({track_item_id:_==null?void 0:_.id,track_order_id:E,track_shopify_order_id:v,track_shopify_item_line_id:_==null?void 0:_.item_id,track_shopify_item_quantity:`#${_==null?void 0:_.item_id}`,method:"",track_number:""})},[_]);const d=$(l=>l.orders);return m.exports.useEffect(()=>{g(ee())},[]),r("div",{children:s(W,{isOpen:e,toggle:()=>c(!e),className:"modal-dialog-centered",children:[r(Z,{toggle:()=>c(!e),children:"Enter Tracking Number"}),s(H,{children:[s("div",{children:[r(u,{className:"form-label",for:"email",children:"Ship Via"}),r(w,{className:"react-select",classNamePrefix:"select",theme:D,placeholder:"Select Type",options:d==null?void 0:d.shippingMethodOptions,value:(b=d==null?void 0:d.shippingMethodOptions)==null?void 0:b.find(l=>(l==null?void 0:l.value)===(h==null?void 0:h.method)),onChange:l=>t({...h,method:l==null?void 0:l.value})})]}),s("div",{children:[r(u,{className:"form-label",for:"email",children:"Tracking Number"}),r(i,{type:"text",id:"text",value:h==null?void 0:h.subject,onChange:l=>{var p;return t({...h,track_number:(p=l==null?void 0:l.target)==null?void 0:p.value})},placeholder:"Enter Tracking Number"})]})]}),r(G,{children:r(C,{color:"primary",onClick:l=>{l.preventDefault(),g(re(h)),c(!e)},children:"Ship Item"})})]})})},De=()=>{const{id:e}=U(),c=O(),_=$(y=>y.orders),[E,v]=m.exports.useState(!1),[g,h]=m.exports.useState(!1),[t,d]=m.exports.useState(null),[b,l]=m.exports.useState({items:[]}),[p,f]=m.exports.useState(null);m.exports.useEffect(()=>{c(P(e))},[e]),m.exports.useEffect(()=>{_!=null&&_.order&&l(_==null?void 0:_.order)},[_==null?void 0:_.order]);const N=y=>{var a,S;l({...b,[(a=y.target)==null?void 0:a.name]:(S=y.target)==null?void 0:S.value})},o=async()=>{var a,S,T;const y=await c(he({data:b,id:e}));(a=y==null?void 0:y.payload)!=null&&a.status?c(P(e)):f((T=(S=y==null?void 0:y.payload)==null?void 0:S.data)==null?void 0:T.errors)},k=async y=>{var S;const a=await c(ie(e));(S=a==null?void 0:a.payload)!=null&&S.status&&c(P(e))};return r(m.exports.Fragment,{children:r(x,{children:r(le,{children:r(n,{sm:"12",children:s(se,{children:[r(ne,{children:r(ce,{tag:"h4",children:"Edit Order"})}),s(oe,{children:[me(b,N,p,k),de(b,N,p,v),ve(b,N,p,h,d),ye(b,N,o),Ne(g,h,t,b==null?void 0:b.id,b==null?void 0:b.short_order),ge(E,v,b)]})]})})})})})};export{De as default};
