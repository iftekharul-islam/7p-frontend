import{a as en,r as $,cy as sn,cz as dn,f as l,Q as E,j as i,S as V,V as W,X as a,Y as e,G as J,a0 as U,bn as I,L as K,cA as Z,cB as rn,cC as on,cD as tn}from"./index.73b35bb3.js";/* empty css                  */import{a as cn}from"./App.e1420fea.js";import{h as j}from"./moment.4d75c86c.js";import{F as w}from"./index.f3075203.js";import{S as C}from"./react-select.esm.6f9f2c43.js";import"./emotion-memoize.esm.06f0e458.js";const an=()=>{var Y,L,k,M,G,B,z,H;const f=cn(),{data:d,queues:g,searchParams:s,printerOptions:D,typeOption:R,stationsOptions:A,storeOptions:F}=en(n=>n.printSublimations),[O,Q]=$.exports.useState(!1),m=n=>{f(Z(n))},T=async()=>{Q(!0),await f(rn()),Q(!1)},q=async()=>{await f(on())},b=()=>{f(tn())},nn=async n=>{await f(Z({production_station_id:[n]})),T()};return $.exports.useEffect(()=>{T(),f(sn()),f(dn()),q()},[]),l(E,{children:[i(V,{children:i("h4",{children:"Send Graphics to Printer"})}),l(W,{children:[l(a,{className:"mb-1",children:[i(e,{md:"7"}),i(e,{md:"3",children:i(C,{className:"react-select",classNamePrefix:"select",options:D,value:D.find(n=>n.value===(s==null?void 0:s.printer)),onChange:n=>{m({printer:n==null?void 0:n.value})}})}),i(e,{md:"2",children:i(J,{color:"primary",onClick:b,children:"Print All"})})]}),l(E,{className:"border rounded",children:[l(a,{className:"m-1",children:[i(e,{md:"1",children:i(U,{type:"text",placeholder:"Batch Number",value:s==null?void 0:s.select_batch,onChange:n=>{m({...s,select_batch:n.target.value})}})}),i(e,{md:"1",children:i(C,{className:"react-select",classNamePrefix:"select",placeholder:"Type",options:R,value:R.find(n=>n.value===(s==null?void 0:s.type)),onChange:n=>{m({type:n==null?void 0:n.value})}})}),i(e,{md:"3",children:i(C,{className:"react-select",classNamePrefix:"select",placeholder:"Select Section",isMulti:!0,options:A,value:A.filter(n=>{var o;return(o=s==null?void 0:s.production_station_id)==null?void 0:o.includes(n.value)}),onChange:n=>{m({...s,production_station_id:n==null?void 0:n.map(o=>o.value)})}})}),i(e,{md:"3",children:i(C,{className:"react-select",classNamePrefix:"select",placeholder:"Select Store",isMulti:!0,options:F,value:F.filter(n=>{var o;return(o=s==null?void 0:s.store_id)==null?void 0:o.includes(n.value)}),onChange:n=>{m({...s,store_id:n==null?void 0:n.map(o=>o.value)})}})}),i(e,{md:"2",children:i(w,{className:"form-control",placeholder:"From",value:(Y=s==null?void 0:s.from_date)!=null?Y:null,options:{dateFormat:"d-m-Y"},onChange:n=>m({from_date:n[0]})})}),i(e,{md:"2",children:i(w,{className:"form-control",placeholder:"To",value:(L=s==null?void 0:s.to_date)!=null?L:null,options:{dateFormat:"d-m-Y"},onChange:n=>m({to_date:n[0]})})})]}),l(a,{className:"m-1 mt-0",children:[i(e,{md:"10",children:i(C,{className:"react-select",classNamePrefix:"select",placeholder:"Mass set a printer",options:D,value:D.find(n=>n.value===(s==null?void 0:s.set_printer)),onChange:n=>{m({set_printer:n==null?void 0:n.value})}})}),i(e,{md:"2",children:i(J,{color:"primary",onClick:T,disabled:O,children:O?l("span",{className:"d-flex justify-content-center",children:[i(I,{size:"sm"}),"Wait..."]}):"Show"})})]})]}),i(E,{children:O?l("span",{className:"d-flex justify-content-center align-items-center",children:[i("span",{className:"mx-1",children:i(I,{size:"sm"})}),"Data Loading..."]}):l(a,{children:[i(e,{md:"10",children:((k=d==null?void 0:d.batches)==null?void 0:k.length)>0?l("span",{children:[l(a,{children:[l("h5",{children:[(M=d==null?void 0:d.batches)==null?void 0:M.length," batches found"]}),i("hr",{})]}),(G=d==null?void 0:d.batches)==null?void 0:G.map((n,o)=>{var p,_,h,N,v,y,x,S,c;return l("span",{children:[l(a,{className:(n==null?void 0:n.to_printer_date)!=null&&"bg-info",children:[l(e,{sm:"2",children:[i(K,{to:`/batch-list/${n==null?void 0:n.batch_number}`,children:l("strong",{children:[n==null?void 0:n.batch_number,"-"]})}),((p=n==null?void 0:n.items)==null?void 0:p.length)>1&&l("span",{children:[(_=n==null?void 0:n.items)==null?void 0:_.length," Items-"]}),(n==null?void 0:n.store_id)&&i("strong",{className:"text-danger",children:(v=(N=(h=d==null?void 0:d.stores)==null?void 0:h.find(r=>(r==null?void 0:r.value)==(n==null?void 0:n.store_id)))==null?void 0:N.label)!=null?v:null})]}),i(e,{sm:"1"}),i(e,{sm:"1",children:i("a",{href:`/batch-list/${n==null?void 0:n.batch_number}`,children:i("img",{src:(y=n==null?void 0:n.items[0])==null?void 0:y.item_thumb,alt:"print",width:"50px",height:"50px"})})}),l(e,{sm:"3",children:[(n==null?void 0:n.type)==="P"&&i("div",{children:i("strong",{style:{color:"red"},children:"IN PRODUCTION:"})}),(n==null?void 0:n.type)==="Q"&&i("div",{children:i("strong",{style:{color:"red"},children:"IN QC:"})}),n!=null&&n.production_station?l("div",{children:["Give to:"," ",(x=n==null?void 0:n.production_station)==null?void 0:x.station_description]}):l("div",{children:["PRODUCTION STATION NOT FOUND:"," ",n==null?void 0:n.production_station_id]}),(n==null?void 0:n.status)!=="active"&&l("div",{children:["Batch Status:"," ",i("strong",{style:{color:"red"},children:n==null?void 0:n.status})]}),i("br",{}),"First Order Date:"," ",j(n==null?void 0:n.min_order_date).format("DD-MM-YYYY")]}),l(e,{sm:"1",children:["Graphic",i("br",{}),"QTY: ",(S=n==null?void 0:n.items[0])==null?void 0:S.item_quantity]}),i(e,{sm:"1",children:((n==null?void 0:n.graphic_found)=="Found"||(n==null?void 0:n.graphic_found)=="Unknown")&&i("a",{href:"batches/view_graphic?batch_number=%s",target:"_blank",children:"View Graphics"})}),l(e,{sm:"2",children:[l("div",{className:"d-flex align-items-center",children:[i("span",{children:"Scale: "}),i(U,{value:"100%"})]}),l("div",{children:["pdf ",i(U,{type:"checkbox"})]})]}),i(e,{sm:"1",children:"Rejects"}),i("hr",{})]},o),(c=n==null?void 0:n.items)==null?void 0:c.map((r,mn)=>{var P;r!=null&&r.rejections&&((P=r==null?void 0:r.rejections)==null||P.map((t,ln)=>{var X,u;return l(a,{children:[i(e,{sm:"3"}),l(e,{sm:"9",children:["Item ",r==null?void 0:r.id," Rejected"," ",t==null?void 0:t.created_at,"by ",(X=t==null?void 0:t.user)==null?void 0:X.username,(t==null?void 0:t.rejection_reason_info)&&"-"+((u=t==null?void 0:t.rejection_reason_info)==null?void 0:u.rejection_message),"- ",t==null?void 0:t.rejection_message]})]},ln)}))})]})})]}):((B=d==null?void 0:d.summary)==null?void 0:B.length)>0?l("span",{children:[l(a,{children:[i(e,{md:"6",className:"d-flex justify-content-start",children:i("b",{children:"Production Station"})}),i(e,{md:"3",className:"d-flex justify-content-center",children:i("b",{children:"First order"})}),i(e,{md:"3",className:"d-flex justify-content-end",children:i("b",{children:"Batches"})})]}),(z=d==null?void 0:d.summary)==null?void 0:z.map((n,o)=>{var p;return l("span",{children:[i("hr",{}),l(a,{children:[i(e,{md:"6",className:"d-flex justify-content-start",children:(p=n==null?void 0:n.production_station)==null?void 0:p.station_description}),i(e,{md:"3",className:"d-flex justify-content-center",children:j(n==null?void 0:n.date).format("YYYY-MM-DD")}),i(e,{md:"3",className:"d-flex justify-content-end",children:i(K,{onClick:_=>{_.preventDefault(),nn(n==null?void 0:n.production_station_id)},children:n==null?void 0:n.count})})]})]},o)}),i("hr",{}),l(a,{children:[i(e,{md:"6"}),i(e,{md:"3",className:"d-flex justify-content-end",children:i("b",{children:"Totol"})}),i(e,{md:"3",className:"d-flex justify-content-end",children:i("b",{children:(H=d==null?void 0:d.summary)==null?void 0:H.reduce((n,o)=>n+parseInt(o==null?void 0:o.count),0)})})]})]}):i("span",{className:"d-flex justify-content-center align-items-center",children:"Nothing Found"})}),i(e,{md:"2",children:g?Array.isArray(g)?g==null?void 0:g.map((n,o)=>{var p,_,h,N,v,y,x,S;return l(E,{className:"mb-1",children:[i(V,{children:i("h5",{children:o.replace("_"," ")+" "+(n==null?void 0:n.TOTAL)})}),l(W,{children:[i("b",{children:"STAGED XML"}),((p=n==null?void 0:n.STAGED_XML)==null?void 0:p.length)>0?(_=n==null?void 0:n.STAGED_XML)==null?void 0:_.map((c,r)=>l("div",{children:[c," ",i("br",{})]},r)):l("div",{children:["Nothing",i("br",{})]}),i("b",{children:"HOT FOLDER"}),((h=n==null?void 0:n.HOT_FOLDER)==null?void 0:h.length)>0?(N=n==null?void 0:n.HOT_FOLDER)==null?void 0:N.map((c,r)=>l("div",{children:[c," ",i("br",{})]},r)):l("div",{children:["Nothing",i("br",{})]}),i("b",{children:"RIP_QUEUE"}),((v=n==null?void 0:n.RIP_QUEUE)==null?void 0:v.length)>0?(y=n==null?void 0:n.RIP_QUEUE)==null?void 0:y.map((c,r)=>l("div",{children:[c," ",i("br",{})]},r)):l("div",{children:["Nothing",i("br",{})]}),i("b",{children:"PRINT_QUEUE"}),((x=n==null?void 0:n.PRINT_QUEUE)==null?void 0:x.length)>0?(S=n==null?void 0:n.PRINT_QUEUE)==null?void 0:S.map((c,r)=>l("div",{children:[c," ",i("br",{})]},r)):l("div",{children:["Nothing",i("br",{})]})]})]},an)}):i("h5",{children:g}):l("span",{className:"d-flex justify-content-center align-items-center",children:[i(I,{size:"sm",className:"mx-1"}),"QUEUE is loading..."]})})]})})]})]})};export{an as default};
