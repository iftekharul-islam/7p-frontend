import{k as z,r as g,a as Q,j as s,f as n,Q as G,S as J,V,X as b,Y as c,a0 as P,G as Y,L as A,bo as X,eZ as Z,eY as K,e_ as e,e$ as t}from"./index.a8647309.js";/* empty css                  */import{a as i}from"./App.4b41cec3.js";import{h as m}from"./moment.4d75c86c.js";import{S as aa}from"./ShippingPanel.41069721.js";import"./plus-circle.07877bd6.js";const ha=()=>{var x;const f=i(),M=z(),[C,w]=g.exports.useState(!1),{WAPData:_,searchParams:u}=Q(a=>a.WAP),{bin:p,order:r,item_options:$,thumbs:N}=_,[k,I]=g.exports.useState([]),j=(a,d)=>{a.target.checked?I([...k,d]):I(k.filter(h=>h!==d))};g.exports.useEffect(()=>{var d,h;const a=(h=(d=r==null?void 0:r.items)==null?void 0:d.filter(l=>(l==null?void 0:l.item_status)=="wap"&&(l==null?void 0:l.batch)))==null?void 0:h.map(l=>l==null?void 0:l.id);I(a)},[r]),g.exports.useEffect(()=>{_!=null&&_.order||M("/wap")},[_]);const R=async(a,d,h)=>{a.preventDefault(),w(!0),await f(Z({[h]:d})),w(!1)},F=a=>{f(K(a))},H=async(a,d,h)=>{var l;await f(e({item_id:a,bin_id:d,origin:h,s:(l=document.getElementById("s"))==null?void 0:l.checked}))},U=(a,d,h)=>{a.preventDefault(),f(t({item_id:d,bin_id:h}))};return s(g.exports.Fragment,{children:n(G,{children:[s(J,{children:s("h4",{className:"card-title",children:"WAP"})}),n(V,{children:[n(b,{className:"mb-1",children:[s(c,{md:"7"}),s(c,{md:"2",children:s(P,{type:"text",name:"order_id",placeholder:"Scan Label",value:u==null?void 0:u.order_id,onChange:a=>{var d;return F({order_id:(d=a==null?void 0:a.target)==null?void 0:d.value})}})}),s(c,{md:"2",children:s(Y,{color:"primary",onClick:a=>R(a,u==null?void 0:u.order_id,"order_id"),disabled:C,children:C?"Please Wait...":"Open Bin"})})]}),s(b,{children:n(b,{children:[s(c,{sm:"2"}),s(c,{sm:"8",children:s(aa,{data:_,selected:k})}),s(c,{sm:"2"})]})}),r?n("div",{children:[n(b,{children:[n(c,{md:"3",className:"p-1",children:["BIN ",n("b",{children:["#",p==null?void 0:p.name]})]}),n(c,{md:"7",className:"p-1",children:["Order"," ",n("b",{children:["#",s(A,{to:`/customer-order-edit/${r==null?void 0:r.id}`,children:r==null?void 0:r.short_order})]})]}),s(c,{md:"2",className:"p-1",children:n("small",{children:["Order Date: ",m(r==null?void 0:r.order_date).format("YYYY-MM-DD")]})})]}),r!=null&&r.items?(x=r==null?void 0:r.items)==null?void 0:x.map((a,d)=>{var h,l,S,y,B,D,E,W,v,L,O;return n(b,{className:"border rounded mt-1",children:[s(c,{md:"8",className:"p-1",children:s("a",{href:a==null?void 0:a.item_url,target:"_blank",children:a==null?void 0:a.item_description})}),s(c,{md:"2",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&s(A,{onClick:o=>U(o,a==null?void 0:a.id,p==null?void 0:p.id),className:"btn btn-primary btn-sm",children:"Reprint WAP Label"})}),s(c,{md:"2",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&(a==null?void 0:a.batch)?n("span",{className:"d-flex",children:[s(Y,{color:"danger",size:"sm",onClick:()=>H(a==null?void 0:a.id,p==null?void 0:p.id,"WP"),children:"Reject from WAP"}),s(P,{type:"checkbox",name:"s",checked:k.includes(a==null?void 0:a.id),defaultChecked:!0,onChange:o=>j(o,a==null?void 0:a.id)})]}):(a==null?void 0:a.item_status)=="rejected"?n("strong",{children:["REJECTED ",(h=a==null?void 0:a.rejections)==null?void 0:h.lenght," TIMES"]}):s("strong",{children:a==null?void 0:a.item_status})}),s(c,{md:"12",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&(a==null?void 0:a.wap_item)?n("small",{children:["Added to Bin ",(l=a==null?void 0:a.wap_item)==null?void 0:l.created_at]}):(a==null?void 0:a.item_status)=="wap"?s("strong",{children:"WAP ITEM NOT FOUND"}):s("hr",{})}),s(c,{md:"3",className:"p-1",children:s("a",{href:a==null?void 0:a.item_url,target:"_blank",children:s("img",{src:a==null?void 0:a.item_thumb,height:"200"})})}),n(c,{md:"6",className:"p-1",children:[a==null?void 0:a.child_sku,s("br",{}),"Item: ",a==null?void 0:a.id,s("br",{}),(a==null?void 0:a.item_quantity)>1&&n("strong",{children:["QTY: ",a==null?void 0:a.item_quantity]}),s("ul",{children:s("div",{dangerouslySetInnerHTML:{__html:$[a==null?void 0:a.id]}})})]}),s(c,{md:"3",className:"p-1",children:(a==null?void 0:a.item_status)=="wap"&&((S=N[a==null?void 0:a.id])==null?void 0:S.length)>0?s("img",{src:N[a==null?void 0:a.id][0],width:N[a==null?void 0:a.id][1],height:N[a==null?void 0:a.id][2]}):(a==null?void 0:a.item_status)=="production"&&(a==null?void 0:a.batch_number)!="0"?n("span",{children:[n("a",{className:"link-info",href:`/batch-list/${a==null?void 0:a.batch_number}`,target:"_blank",children:["Batch ",a==null?void 0:a.batch_number]}),(a==null?void 0:a.batch)&&((y=a==null?void 0:a.batch)==null?void 0:y.station)&&n("span",{children:[(D=(B=a==null?void 0:a.batch)==null?void 0:B.station)==null?void 0:D.station_description,s("br",{})]}),(a==null?void 0:a.batch)&&s("span",{children:(E=a==null?void 0:a.batch)==null?void 0:E.change_date})]}):(a==null?void 0:a.item_status)=="production"&&(a==null?void 0:a.batch_number)=="0"?"Unbatched":(a==null?void 0:a.item_status)=="rejected"?n("span",{children:[n("a",{href:`/batch-list/${a==null?void 0:a.batch_number}`,target:"_blank",children:["Batch ",a==null?void 0:a.batch_number]}),((W=a==null?void 0:a.rejections)==null?void 0:W.length)>0&&((v=a==null?void 0:a.rejections)==null?void 0:v.map((o,q)=>{var T;return n("span",{children:[s("br",{}),n("small",{children:["Rejected ",o==null?void 0:o.created_at,s("br",{}),(T=o==null?void 0:o.rejection_reason_info)==null?void 0:T.rejection_message]})]},q)}))]}):(a==null?void 0:a.item_status)=="back order"?n("a",{href:`/batch-list/${a==null?void 0:a.batch_number}`,target:"_blank",children:["Batch ",a==null?void 0:a.batch_number]}):(a==null?void 0:a.item_status)=="shipped"?a!=null&&a.shipInfo?n("div",{children:[(L=a==null?void 0:a.shipInfo)==null?void 0:L.mail_class,s("br",{}),(O=a==null?void 0:a.shipInfo)==null?void 0:O.shipping_id]}):"SHIPMENT NOT FOUND":""})]},d)}):"No Items in Bin."]}):s(b,{children:s(c,{md:"12",children:s("h4",{className:"text-center",children:C?n("span",{children:[s(X,{size:"sm"}),"Data Loading"]}):"Bin Empty"})})})]})]})})};export{ha as default};
