import{r as b,k as Y,a as H,cX as M,cY as J,cZ as W,j as e,X as C,Z as O,Y as c,f as i,Q as I,S as ee,T as ne,V as z,$ as h,a0 as p,I as A,G as V,bm as ae,c_ as te}from"./index.87b69802.js";import{R as le,s as re}from"./slidedown.a33cb79d.js";/* empty css                  */import{a as se,s as q}from"./App.4bf6c745.js";import{F as L}from"./index.85f7af45.js";import{S as K}from"./react-select.esm.e6170e9b.js";import{P as oe}from"./slidedown.9202dd65.js";import"./emotion-memoize.esm.06f0e458.js";const _e=()=>{var E;const[a,D]=b.exports.useState({po_date:new Date,grand_total:0}),[F,T]=b.exports.useState(!1),[U,w]=b.exports.useState(!1),[r,g]=b.exports.useState([{}]),[x,Z]=b.exports.useState(null),P=se(),B=Y(),l=H(n=>n.purchaseOrders),k=n=>{var s,t;D({...a,[(s=n.target)==null?void 0:s.name]:(t=n.target)==null?void 0:t.value})},Q=(n,s)=>{D({...a,[n]:s})},R=(n,s)=>{var d;w(!0);const t=(d=l==null?void 0:l.skuOptions)==null?void 0:d.find(u=>(u==null?void 0:u.value)===(n==null?void 0:n.value)),m=r==null?void 0:r.map((u,v)=>{var y,N,S,o,f,_;return s===v?{product_id:(y=t==null?void 0:t.data)==null?void 0:y.id,vendor_sku:(N=t==null?void 0:t.data)==null?void 0:N.vendor_sku,vendor_sku_name:(S=t==null?void 0:t.data)==null?void 0:S.vendor_sku_name,stock_no:(o=t==null?void 0:t.data)==null?void 0:o.stock_no,unit_price:(f=t==null?void 0:t.data)==null?void 0:f.unit_price,lead_time_days:(_=t==null?void 0:t.data)==null?void 0:_.lead_time_days,sub_total:0,eta:new Date}:u});g(m)},j=(n,s,t)=>{if(n=="unit_price"){const m=r==null?void 0:r.map((d,u)=>{var v;if(t===u){const y=(s!=null?s:0)*((v=d==null?void 0:d.quantity)!=null?v:0);return{...d,[n]:s,sub_total:parseFloat(y).toFixed(2)}}else return d});g(m)}else if(n=="quantity"){const m=r==null?void 0:r.map((d,u)=>{var v;if(t===u){const y=((v=d==null?void 0:d.unit_price)!=null?v:0)*(s!=null?s:0);return{...d,[n]:s,sub_total:parseFloat(y).toFixed(2)}}else return d});g(m)}else{const m=r==null?void 0:r.map((d,u)=>t===u?{...d,[n]:s}:d);g(m)}};b.exports.useEffect(()=>{P(M())},[]),b.exports.useEffect(()=>{a!=null&&a.vendor_id&&(P(J(a==null?void 0:a.vendor_id)),g([{}]),P(W(a==null?void 0:a.vendor_id)))},[a==null?void 0:a.vendor_id]),b.exports.useEffect(()=>{var n,s,t,m,d,u;D({...a,vendor_id:(n=l==null?void 0:l.vendor)==null?void 0:n.id,vendor_name:(s=l==null?void 0:l.vendor)==null?void 0:s.vendor_name,email:(t=l==null?void 0:l.vendor)==null?void 0:t.email,zip_code:(m=l==null?void 0:l.vendor)==null?void 0:m.zip_code,state:(d=l==null?void 0:l.vendor)==null?void 0:d.state,phone_number:(u=l==null?void 0:l.vendor)==null?void 0:u.phone_number})},[l==null?void 0:l.vendor]),b.exports.useEffect(()=>{let n=0;r.forEach(s=>{var t;n=parseFloat(n)+parseFloat((t=s==null?void 0:s.sub_total)!=null?t:0)}),D({...a,grand_total:n.toFixed(2)})},[r]);const $=()=>{g([...r,{}])},G=n=>{const s=r==null?void 0:r.filter((t,m)=>m!==n);(s==null?void 0:s.length)<1?(g([{}]),w(!1)):g(s)},X=async()=>{var s,t,m;T(!0);const n=await P(te({...a,skus:r}));(s=n==null?void 0:n.payload)!=null&&s.status?B("/purchase-order"):Z((m=(t=n==null?void 0:n.payload)==null?void 0:t.data)==null?void 0:m.errors),T(!1)};return e(b.exports.Fragment,{children:e(C,{children:e(O,{children:e(c,{sm:"12",children:i(I,{children:[e(ee,{children:e(ne,{tag:"h4",children:"New Purchase Product"})}),i(z,{children:[i(C,{children:[i(c,{sm:"4",children:[e(h,{className:"form-label",for:"po_date",children:"PO Date"}),e(L,{className:"form-control",id:"po_date",name:"po_date",placeholder:"Purchase Order Date",value:a==null?void 0:a.po_date,onChange:n=>Q("po_date",n)}),e("small",{className:"text-danger",children:x==null?void 0:x.name})]}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"payment_method",children:"Payment"}),e(p,{type:"text",name:"payment_method",id:"payment_method",placeholder:"Payment Method",value:a==null?void 0:a.payment_method,onChange:k})]}),e(c,{sm:"4"}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"vendor_id",children:"Vendor ID"}),e(K,{className:"react-select",classNamePrefix:"select",theme:q,placeholder:"Select Vendor",options:l==null?void 0:l.vendorOptions,value:(E=l==null?void 0:l.vendorOptions)==null?void 0:E.find(n=>(n==null?void 0:n.value)===(a==null?void 0:a.vendor_id)),onChange:n=>k({target:{name:"vendor_id",value:n==null?void 0:n.value}}),isClearable:!1,isDisabled:U}),e("small",{className:"text-danger",children:x==null?void 0:x.phone_number})]}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"vendor_name",children:"Vendor"}),e(p,{type:"text",name:"vendor_name",id:"vendor_name",placeholder:"Vendor's Name",value:a==null?void 0:a.vendor_name,disabled:!0})]}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"email",children:"Email"}),e(p,{type:"text",name:"email",id:"email",placeholder:"Vendor's Email",value:a==null?void 0:a.email,disabled:!0})]}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"zip_code",children:"Zip Code"}),e(p,{type:"text",name:"zip_code",id:"zip_code",placeholder:"Vendor's Zip Code",value:a==null?void 0:a.zip_code,disabled:!0})]}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"state",children:"State"}),e(p,{type:"text",name:"state",id:"state",placeholder:"Vendor's State",value:a==null?void 0:a.state,disabled:!0})]}),i(c,{sm:"4",children:[e(h,{className:"form-label",for:"phone_number",children:"Phone"}),e(p,{type:"text",name:"phone_number",id:"phone_number",placeholder:"Vendor's Phone Number",value:a==null?void 0:a.phone_number,disabled:!0})]}),i(c,{sm:"12",children:[e(h,{className:"form-label",for:"notes",children:"Notes"}),e(p,{type:"text",name:"notes",id:"notes",placeholder:"Notes",value:a==null?void 0:a.notes,onChange:k})]})]}),(r==null?void 0:r.length)>0&&i(A,{children:[e("hr",{}),i(z,{children:[i(C,{className:"justify-content-between align-items-center",children:[e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Vendor SKU"})}),e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Stock"})}),e(c,{sm:"3",className:"d-flex justify-content-center",children:e(h,{children:"SKU"})}),e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Quantity"})}),e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Price"})}),e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Subtotal"})}),e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Lead Time"})}),e(c,{sm:"2",className:"d-flex justify-content-center",children:e(h,{children:"ETA"})}),e(c,{sm:"1",className:"d-flex justify-content-center",children:e(h,{children:"Action"})})]}),e(le,{count:r==null?void 0:r.length,children:n=>{var t,m,d,u,v,y,N,S;const s=n===0?"div":re.SlideDown;return e(s,{children:e(O,{children:i(C,{className:"justify-content-between align-items-center mb-1",children:[e(c,{sm:"1",children:e(p,{type:"text",name:"vendor_sku",id:"vendor_sku",placeholder:"SKU",value:(t=r[n])==null?void 0:t.vendor_sku,onChange:o=>{var f,_;return j((f=o==null?void 0:o.target)==null?void 0:f.name,(_=o==null?void 0:o.target)==null?void 0:_.value,n)}})}),e(c,{sm:"1",children:e(p,{type:"text",name:"stock_no",id:"stock_no",placeholder:"Stock",value:(m=r[n])==null?void 0:m.stock_no,disabled:!0})}),e(c,{sm:"3",children:e(K,{className:"react-select",classNamePrefix:"select",theme:q,placeholder:"Select SKU",options:l==null?void 0:l.skuOptions,value:(d=l==null?void 0:l.skuOptions)==null?void 0:d.find(o=>(o==null?void 0:o.value)===(r==null?void 0:r.sku)),onChange:o=>R(o,n),isClearable:!1})}),e(c,{sm:"1",children:e(p,{type:"number",name:"quantity",id:"quantity",min:0,placeholder:"Quantity",value:(u=r[n])==null?void 0:u.quantity,onChange:o=>{var f,_;return j((f=o==null?void 0:o.target)==null?void 0:f.name,(_=o==null?void 0:o.target)==null?void 0:_.value,n)}})}),e(c,{sm:"1",children:e(p,{type:"text",name:"unit_price",id:"unit_price",placeholder:"Price",value:(v=r[n])==null?void 0:v.unit_price,onChange:o=>{var f,_;return j((f=o==null?void 0:o.target)==null?void 0:f.name,(_=o==null?void 0:o.target)==null?void 0:_.value,n)}})}),e(c,{sm:"1",children:e(p,{type:"text",name:"sub_total",id:"sub_total",placeholder:"Subtotal",value:(y=r[n])==null?void 0:y.sub_total,disabled:!0})}),e(c,{sm:"1",children:e(p,{type:"text",name:"lead_time_days",id:"lead_time_days",placeholder:"Lead Time Days",value:(N=r[n])==null?void 0:N.lead_time_days,disabled:!0})}),e(c,{sm:"2",children:e(L,{className:"form-control",id:"eta",name:"eta",placeholder:"ETA",value:(S=r[n])==null?void 0:S.eta,onChange:o=>j("eta",o,n)})}),e(c,{sm:"1",children:e(V,{className:"me-1",color:"danger",onClick:o=>{o.preventDefault(),G(n)},children:e("span",{className:"align-middle ms-25",children:"Delete"})})})]})})},n)}})]}),e("hr",{}),i(C,{children:[e(c,{sm:"9",className:"mt-1",children:i("div",{className:"d-flex",children:[i(V,{className:"me-1",color:"success",onClick:n=>{n.preventDefault(),$()},children:[e(oe,{size:14}),e("span",{className:"align-middle ms-25",children:"Add New"})]}),e(V,{className:"me-1",color:"primary",type:"submit",onClick:n=>{n.preventDefault(),X()},disabled:F,children:F?i(A,{children:[e(ae,{className:"me-25",size:"sm"}),"Submiting"]}):"Submit"})]})}),i(c,{sm:"3",children:["Grand Total: ",a==null?void 0:a.grand_total]})]})]})]})]})})})})})};export{_e as default};
