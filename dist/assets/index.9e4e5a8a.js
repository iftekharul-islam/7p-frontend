import{k as z,r as T,f as c,X as D,j as n,Y as l,I as m,G as U,$ as j,a0 as H,eU as ss,eV as as,a as ns,Q as cs,S as ls,V as hs,L as i,bo as ds,eT as rs,eS as ps,eW as _s,eX as us}from"./index.7687a0d9.js";/* empty css                  */import{a as q}from"./App.c5a53fe9.js";import{h as os}from"./moment.4d75c86c.js";const Ss=({data:t,selected:G})=>{var d,u,r,M,O,y,X,F,Y,v,k,x,e;const L=q();z();const{bin:E,order:a,item_options:g,thumbs:A}=t,h="WAP",p=E==null?void 0:E.items,[_,b]=T.exports.useState([{pounds:0,ounces:0}]),C=()=>{b([..._,{pounds:0,ounces:0}])};let N=null,R=null;const I=JSON.parse(localStorage.getItem("userData")),B={"":"DEFAULT SHIPPING","MN*":"MANUAL SHIPPING","US*FIRST_CLASS":"USPS FIRST_CLASS","US*PRIORITY":"USPS PRIORITY","US*EXPRESS":"USPS EXPRESS","UP*S_GROUND":"UPS GROUND","UP*S_3DAYSELECT":"UPS 3DAYSELECT","UP*S_AIR_2DAY":"UPS AIR_2DAY","UP*S_AIR_2DAYAM":"UPS AIR_2DAYAM","UP*S_AIR_1DAYSAVER":"UPS AIR_1DAYSAVER","UP*S_AIR_1DAY":"UPS AIR_1DAY","UP*S_SUREPOST":"UPS SUREPOST","FX*_SMART_POST":"FEDEX SMARTPOST","FX*_GROUND_HOME_DELIVERY":"FEDEX GROUND_HOME_DELIVERY","FX*_FEDEX_GROUND":"FEDEX GROUND","FX*_FEDEX_2_DAY":"FEDEX 2_DAY","FX*_FEDEX_EXPRESS_SAVER":"FEDEX EXPRESS_SAVER","FX*_STANDARD_OVERNIGHT":"FEDEX STANDARD_OVERNIGHT","FX*_PRIORITY_OVERNIGHT":"FEDEX PRIORITY_OVERNIGHT","DL*_SMARTMAIL_PARCEL_EXPEDITED_MAX":"DHL SMARTMAIL PARCEL EXPEDITED MAX","DL*_SMARTMAIL_PARCEL_EXPEDITED":"DHL SMARTMAIL PARCEL EXPEDITED","DL*_SMARTMAIL_PARCEL_GROUND":"DHL SMARTMAIL PARCEL GROUND","DL*_SMARTMAIL_PARCEL_PLUS_EXPEDITED":"DHL SMARTMAIL PARCEL PLUS EXPEDITED","DL*_SMARTMAIL_PARCEL_PLUS_GROUND":"DHL SMARTMAIL PARCEL PLUS GROUND","DL*_PARCEL_INTERNATIONAL_DIRECT":"DHL PARCEL INTERNATIONAL DIRECT","EN*USFC":"ENDCIA USPS FIRST CLASS","EN*USPM":"ENDCIA USPS PRIORITY","EN*USCG":"ENDCIA USPS GROUND"};(a==null?void 0:a.store)&&((d=a==null?void 0:a.store)==null?void 0:d.qc)==="0"?(N="success",(a==null?void 0:a.carrier)==="MN"?(R=a==null?void 0:a.method,N="info"):(p==null?void 0:p.length)>1?R=`${p==null?void 0:p.length} Lines Approved by ${I==null?void 0:I.username}`:R=`Approved by ${I==null?void 0:I.username}`,((u=a==null?void 0:a.shippable_items)==null?void 0:u.length)!==(p==null?void 0:p.length)&&(R=`Partial Ship ${R}`,N="primary")):(R="Ship by Supervisor",N="danger");const V=(o,S)=>{o.preventDefault(),L(ss(S))},f=(o,S)=>{const{name:P,value:w}=o.target,W=[..._];W[S][P]=w,b(W)},s=async(o,S,P,w,W,J,Q)=>{o.preventDefault();const K=_==null?void 0:_.map($=>$.pounds),Z=_==null?void 0:_.map($=>$.ounces);await L(as({bin:S,order_id:P,origin:w,location:W,count:J,"selected-items-json":Q,pounds:K,ounces:Z}))};return c(D,{className:"border rounded p-1",children:[(a==null?void 0:a.carrier)!=null&&(a==null?void 0:a.carrier)!=="MN"&&n(l,{sm:"12",className:"panel-header",children:n("h4",{children:n("strong",{children:c("u",{children:["Ship By ",B[(a==null?void 0:a.carrier)+"*"+(a==null?void 0:a.method)]]})})})}),c(D,{className:"panel-body",children:[n(l,{sm:"4",className:"col-xs-12 col-sm-4 col-md-2",children:(a==null?void 0:a.carrier)!=null?c(m,{children:[(a==null?void 0:a.carrier)==="FX"&&n("img",{src:"/assets/images/fedex.jpg",alt:"FedEx"}),(a==null?void 0:a.carrier)==="UP"&&!a.method.includes("MAIL_INNOVATIONS")&&n("img",{src:"/assets/images/ups.jpg",alt:"UPS"}),(a==null?void 0:a.carrier)==="US"&&n("img",{src:"/assets/images/usps.jpg",alt:"USPS"})]}):n("strong",{children:"Ship to:"})}),c(l,{sm:"4",className:"col-xs-12 col-sm-8 col-md-5",children:[n("div",{children:(r=a==null?void 0:a.customer)==null?void 0:r.ship_full_name}),n("div",{children:((M=a==null?void 0:a.customer)==null?void 0:M.ship_company_name)&&((O=a==null?void 0:a.customer)==null?void 0:O.ship_company_name)}),n("div",{children:(y=a==null?void 0:a.customer)==null?void 0:y.ship_address_1}),n("div",{children:((X=a==null?void 0:a.customer)==null?void 0:X.ship_address_2)&&((F=a==null?void 0:a.customer)==null?void 0:F.ship_address_2)}),c("div",{children:[(Y=a==null?void 0:a.customer)==null?void 0:Y.ship_city,", ",(v=a==null?void 0:a.customer)==null?void 0:v.ship_state," ",(k=a==null?void 0:a.customer)==null?void 0:k.ship_zip]}),n("div",{children:((x=a==null?void 0:a.customer)==null?void 0:x.ship_country.substring(0,2))!=="US"&&((e=a==null?void 0:a.customer)==null?void 0:e.ship_country)}),n(U,{color:"primary",size:"sm",className:"btn-xs",onClick:o=>V(o,{order_id:a==null?void 0:a.id}),children:"Bad Address"})]}),c(l,{sm:"4",className:"col-xs-12 col-sm-12 col-md-5",style:{textAlign:"right",padding:0},children:[_==null?void 0:_.map((o,S)=>c(D,{children:[n(l,{sm:"4",children:S==0&&((a==null?void 0:a.carrier)==="US"?n("label",{style:{color:"red"},children:"*Weight:"}):n("label",{children:"Weight:"}))}),c(l,{sm:"4",children:[S==0&&n(j,{children:"lbs"}),n(H,{type:"number",name:"pounds",style:{width:"100px"},min:"0",defaultValue:0,value:o.pounds,onChange:P=>f(P,S)})]}),c(l,{sm:"4",children:[S==0&&n(j,{children:"oz"}),n(H,{type:"number",name:"ounces",style:{width:"100px"},min:"0",defaultValue:0,value:o.ounces,onChange:P=>f(P,S)})]})]})),n(U,{onClick:C,children:"Add Weight"}),c(U,{type:"submit",name:"submitButton",value:"fl",className:`pull-right btn btn-lg btn-${N}`,style:{marginTop:"5px"},onClick:o=>s(o,E==null?void 0:E.id,a==null?void 0:a.id,h,"FL",p==null?void 0:p.length,G),children:[R," (FL)"]}),c(U,{type:"submit",name:"submitButton",value:"ny",className:"pull-right btn btn-lg btn-warning",style:{marginTop:"5px"},onClick:o=>s(o,E==null?void 0:E.id,a==null?void 0:a.id,h,"NY",p==null?void 0:p.length,G),children:[R," (NY)"]})]})]})]})},Ds=()=>{var f;const t=q(),G=z(),[L,E]=T.exports.useState(!1),{WAPData:a,searchParams:g}=ns(s=>s.WAP),{bin:A,order:h,item_options:p,thumbs:_}=a,[b,C]=T.exports.useState([]),N=(s,d)=>{s.target.checked?C([...b,d]):C(b.filter(u=>u!==d))};T.exports.useEffect(()=>{var d,u;const s=(u=(d=h==null?void 0:h.items)==null?void 0:d.filter(r=>(r==null?void 0:r.item_status)=="wap"&&(r==null?void 0:r.batch)))==null?void 0:u.map(r=>r==null?void 0:r.id);C(s)},[h]),T.exports.useEffect(()=>{a!=null&&a.order||G("/wap")},[a]);const R=async(s,d,u)=>{s.preventDefault(),E(!0),await t(rs({[u]:d})),E(!1)},I=s=>{t(ps(s))},B=async(s,d,u)=>{var r;await t(_s({item_id:s,bin_id:d,origin:u,s:(r=document.getElementById("s"))==null?void 0:r.checked}))},V=(s,d,u)=>{s.preventDefault(),t(us({item_id:d,bin_id:u}))};return n(T.exports.Fragment,{children:c(cs,{children:[n(ls,{children:n("h4",{className:"card-title",children:"WAP"})}),c(hs,{children:[c(D,{className:"mb-1",children:[n(l,{md:"7"}),n(l,{md:"2",children:n(H,{type:"text",name:"order_id",placeholder:"Scan Label",value:g==null?void 0:g.order_id,onChange:s=>{var d;return I({order_id:(d=s==null?void 0:s.target)==null?void 0:d.value})}})}),n(l,{md:"2",children:n(U,{color:"primary",onClick:s=>R(s,g==null?void 0:g.order_id,"order_id"),disabled:L,children:L?"Please Wait...":"Open Bin"})})]}),n(D,{children:c(D,{children:[n(l,{sm:"2"}),n(l,{sm:"8",children:n(Ss,{data:a,selected:b})}),n(l,{sm:"2"})]})}),h?c("div",{children:[c(D,{children:[c(l,{md:"3",className:"p-1",children:["BIN ",c("b",{children:["#",A==null?void 0:A.name]})]}),c(l,{md:"7",className:"p-1",children:["Order"," ",c("b",{children:["#",n(i,{to:`/customer-order-edit/${h==null?void 0:h.id}`,children:h==null?void 0:h.short_order})]})]}),n(l,{md:"2",className:"p-1",children:c("small",{children:["Order Date: ",os(h==null?void 0:h.order_date).format("YYYY-MM-DD")]})})]}),h!=null&&h.items?(f=h==null?void 0:h.items)==null?void 0:f.map((s,d)=>{var u,r,M,O,y,X,F,Y,v,k,x;return c(D,{className:"border rounded mt-1",children:[n(l,{md:"8",className:"p-1",children:n("a",{href:s==null?void 0:s.item_url,target:"_blank",children:s==null?void 0:s.item_description})}),n(l,{md:"2",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&n(i,{onClick:e=>V(e,s==null?void 0:s.id,A==null?void 0:A.id),className:"btn btn-primary btn-sm",children:"Reprint WAP Label"})}),n(l,{md:"2",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&(s==null?void 0:s.batch)?c("span",{className:"d-flex",children:[n(U,{color:"danger",size:"sm",onClick:()=>B(s==null?void 0:s.id,A==null?void 0:A.id,"WP"),children:"Reject from WAP"}),n(H,{type:"checkbox",name:"s",checked:b.includes(s==null?void 0:s.id),defaultChecked:!0,onChange:e=>N(e,s==null?void 0:s.id)})]}):(s==null?void 0:s.item_status)=="rejected"?c("strong",{children:["REJECTED ",(u=s==null?void 0:s.rejections)==null?void 0:u.lenght," TIMES"]}):n("strong",{children:s==null?void 0:s.item_status})}),n(l,{md:"12",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&(s==null?void 0:s.wap_item)?c("small",{children:["Added to Bin ",(r=s==null?void 0:s.wap_item)==null?void 0:r.created_at]}):(s==null?void 0:s.item_status)=="wap"?n("strong",{children:"WAP ITEM NOT FOUND"}):n("hr",{})}),n(l,{md:"3",className:"p-1",children:n("a",{href:s==null?void 0:s.item_url,target:"_blank",children:n("img",{src:s==null?void 0:s.item_thumb,height:"200"})})}),c(l,{md:"6",className:"p-1",children:[s==null?void 0:s.child_sku,n("br",{}),"Item: ",s==null?void 0:s.id,n("br",{}),(s==null?void 0:s.item_quantity)>1&&c("strong",{children:["QTY: ",s==null?void 0:s.item_quantity]}),n("ul",{children:n("div",{dangerouslySetInnerHTML:{__html:p[s==null?void 0:s.id]}})})]}),n(l,{md:"3",className:"p-1",children:(s==null?void 0:s.item_status)=="wap"&&((M=_[s==null?void 0:s.id])==null?void 0:M.length)>0?n("img",{src:_[s==null?void 0:s.id][0],width:_[s==null?void 0:s.id][1],height:_[s==null?void 0:s.id][2]}):(s==null?void 0:s.item_status)=="production"&&(s==null?void 0:s.batch_number)!="0"?c("span",{children:[c("a",{className:"link-info",href:`/batch-list/${s==null?void 0:s.batch_number}`,target:"_blank",children:["Batch ",s==null?void 0:s.batch_number]}),(s==null?void 0:s.batch)&&((O=s==null?void 0:s.batch)==null?void 0:O.station)&&c("span",{children:[(X=(y=s==null?void 0:s.batch)==null?void 0:y.station)==null?void 0:X.station_description,n("br",{})]}),(s==null?void 0:s.batch)&&n("span",{children:(F=s==null?void 0:s.batch)==null?void 0:F.change_date})]}):(s==null?void 0:s.item_status)=="production"&&(s==null?void 0:s.batch_number)=="0"?"Unbatched":(s==null?void 0:s.item_status)=="rejected"?c("span",{children:[c("a",{href:`/batch-list/${s==null?void 0:s.batch_number}`,target:"_blank",children:["Batch ",s==null?void 0:s.batch_number]}),((Y=s==null?void 0:s.rejections)==null?void 0:Y.length)>0&&((v=s==null?void 0:s.rejections)==null?void 0:v.map((e,o)=>{var S;return c("span",{children:[n("br",{}),c("small",{children:["Rejected ",e==null?void 0:e.created_at,n("br",{}),(S=e==null?void 0:e.rejection_reason_info)==null?void 0:S.rejection_message]})]},o)}))]}):(s==null?void 0:s.item_status)=="back order"?c("a",{href:`/batch-list/${s==null?void 0:s.batch_number}`,target:"_blank",children:["Batch ",s==null?void 0:s.batch_number]}):(s==null?void 0:s.item_status)=="shipped"?s!=null&&s.shipInfo?c("div",{children:[(k=s==null?void 0:s.shipInfo)==null?void 0:k.mail_class,n("br",{}),(x=s==null?void 0:s.shipInfo)==null?void 0:x.shipping_id]}):"SHIPMENT NOT FOUND":""})]},d)}):"No Items in Bin."]}):n(D,{children:n(l,{md:"12",children:n("h4",{className:"text-center",children:L?c("span",{children:[n(ds,{size:"sm"}),"Data Loading"]}):"Bin Empty"})})})]})]})})};export{Ds as default};
