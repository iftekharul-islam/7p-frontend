import{a6 as ie,x as le,a as te,r as u,bT as oe,bU as re,bV as de,j as s,f as l,S as h,W as _,Y as f,Z as a,a1 as x,H as g,T as ce,bW as Q}from"./index.b5767533.js";/* empty css                  */import{a as me}from"./App.bf73fcbb.js";/* empty css                                  */import{h as X}from"./moment.4d75c86c.js";import{S as v}from"./react-select.esm.97e349dc.js";import"./emotion-memoize.esm.06f0e458.js";const Ce=()=>{var S,y,N,k,P,M,B,O,A,T,W,w,D,j,E,F,R,L,U,H;const m=me();let[b,ue]=ie();const{state:t}=le(),p=b.get("station"),n=te(e=>e.moveBatches),[o,C]=u.exports.useState(!1),i=n==null?void 0:n.searchParams;u.exports.useEffect(()=>{p&&(r({station:p}),d({station:p}))},[p]),u.exports.useEffect(()=>{t!=null&&t.scan_batches&&(r({scan_batches:t==null?void 0:t.scan_batches}),d({scan_batches:t==null?void 0:t.scan_batches}))},[t==null?void 0:t.scan_batches]),u.exports.useEffect(()=>{m(oe())},[]);const d=async e=>{C(!0),await m(re(e)),C(!1)},r=e=>{m(de(e))},ee=e=>{var c;m(Q((c=e==null?void 0:e.target)==null?void 0:c.value))},ne=()=>{m(Q("all"))},se=()=>{d({task:"next",batch_number:n==null?void 0:n.moveParams,route:null})},ae=()=>{d({task:"move",batch_number:n==null?void 0:n.moveParams,station:null})};return s("div",{className:"app-user-list",children:l(u.exports.Fragment,{children:[s(h,{className:"px-1",children:s(_,{children:l(f,{children:[s(a,{sm:"2"}),s(a,{sm:"3",children:s(x,{placeholder:"Find Batches (Comma Separated)",value:i==null?void 0:i.scan_batches,onChange:e=>{var c;r({scan_batches:(c=e==null?void 0:e.target)==null?void 0:c.value})},onBlur:()=>r({scan_batches:(i==null?void 0:i.scan_batches)+","}),onKeyDown:e=>{(e==null?void 0:e.key)==="Enter"&&r({scan_batches:(i==null?void 0:i.scan_batches)+","})}})}),s(a,{sm:"3",children:s(v,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stationOptions,placeholder:"View Batches in Station",value:(S=n==null?void 0:n.stationOptions)==null?void 0:S.find(e=>(e==null?void 0:e.value)==(i==null?void 0:i.station)),onChange:e=>{r({station:e==null?void 0:e.value})},isClearable:!0})}),s(a,{sm:"2",className:"d-flex align-items-start flex-column",children:s(g,{color:"primary",onClick:()=>d({}),disabled:o,children:o?"Please Wait":"Search"})})]})})}),((y=n==null?void 0:n.data)==null?void 0:y.station)&&s(h,{children:s(_,{children:l("h4",{className:"card-title",children:[(k=(N=n==null?void 0:n.data)==null?void 0:N.station)==null?void 0:k.station_name," -"," ",(M=(P=n==null?void 0:n.data)==null?void 0:P.station)==null?void 0:M.station_description," -"," ",(O=(B=n==null?void 0:n.data)==null?void 0:B.batches)==null?void 0:O.length," Active Batch/es Found"]})})}),((T=(A=n==null?void 0:n.data)==null?void 0:A.batches)==null?void 0:T.length)>0?l("span",{children:[s(h,{children:s(_,{children:(((W=n==null?void 0:n.data)==null?void 0:W.route)&&((w=n==null?void 0:n.data)==null?void 0:w.route)!="all"||((j=(D=n==null?void 0:n.data)==null?void 0:D.batches)==null?void 0:j.length)==1)&&((F=(E=n==null?void 0:n.data)==null?void 0:E.stations_in_route)==null?void 0:F.length)>0?l(f,{children:[s(a,{sm:"3"}),s(a,{sm:"4",children:s(v,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stations_in_routeOptions,placeholder:"Select Route (To move to other stations)",value:(R=n==null?void 0:n.stations_in_routeOptions)==null?void 0:R.find(e=>(e==null?void 0:e.value)==(i==null?void 0:i.route)),onChange:e=>r({station_change:e==null?void 0:e.value})})}),s(a,{sm:"2",className:"d-flex align-items-start flex-column",children:s(g,{color:"primary",onClick:ae,disabled:o,children:o?"Please Wait":"Move to Station"})})]}):l(f,{children:[s(a,{sm:"3"}),s(a,{sm:"4",children:s(v,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.routes_in_stationOptions,placeholder:"Select Route (To move to other stations)",value:(L=n==null?void 0:n.routes_in_stationOptions)==null?void 0:L.find(e=>(e==null?void 0:e.value)==(i==null?void 0:i.route)),onChange:e=>r({route:e==null?void 0:e.value})})}),s(a,{sm:"2",className:"d-flex align-items-start flex-column",children:s(g,{color:"primary",onClick:()=>d({}),disabled:o,children:o?"Please Wait":"Filter"})})]})})}),l(h,{children:[s(ce,{children:s(g,{color:"primary",onClick:se,disabled:o,children:o?"Please Wait":"Move to Next Station"})}),l(_,{children:[l(f,{className:"mb-1",children:[s(a,{sm:"1",children:s(x,{type:"checkbox",checked:n==null?void 0:n.allChecked,onChange:ne})}),s(a,{sm:"1",children:n!=null&&n.allChecked?"UnCheck All":"Check All"}),s(a,{sm:"1",children:"Batch Date"}),s(a,{sm:"2",children:"Min. Order Date"}),s(a,{sm:"2",children:"Station"}),s(a,{sm:"1",children:"Next Station"}),s(a,{sm:"1",children:"Route"}),s(a,{sm:"1",children:"Line"}),s(a,{sm:"2",children:"Image"}),s("hr",{})]}),(H=(U=n==null?void 0:n.data)==null?void 0:U.batches)==null?void 0:H.map((e,c)=>{var I,V,$,K,Y,Z,q,z,G,J;return l(f,{children:[s(a,{sm:"1",children:s(x,{type:"checkbox",value:e==null?void 0:e.batch_number,checked:(I=n==null?void 0:n.moveParams)==null?void 0:I.includes(e==null?void 0:e.batch_number),onChange:ee})}),l(a,{sm:"1",children:[s("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,children:e==null?void 0:e.batch_number}),s("br",{}),(e==null?void 0:e.status.charAt(0).toUpperCase())+(e==null?void 0:e.status.slice(1))]}),s(a,{sm:"1",children:X(e==null?void 0:e.creation_date).format("dd MMM yyyy")}),s(a,{sm:"2",children:X(e==null?void 0:e.min_order_date).format("dd MMM yyyy")}),l(a,{sm:"2",children:[(V=e==null?void 0:e.station)==null?void 0:V.station_name," -"," ",($=e==null?void 0:e.station)==null?void 0:$.station_description]}),s(a,{sm:"1",children:(K=n==null?void 0:n.data)==null?void 0:K.next_in_route[e==null?void 0:e.batch_route_id]}),s(a,{sm:"1",children:(Y=e==null?void 0:e.route)==null?void 0:Y.batch_code}),s(a,{sm:"1",children:((Z=e==null?void 0:e.items_count)==null?void 0:Z.length)>0&&((q=e==null?void 0:e.items_count[0])==null?void 0:q.count)}),l(a,{sm:"2",children:[s("img",{src:(z=e==null?void 0:e.first_item)==null?void 0:z.item_thumb,width:"70",height:"70"}),s("a",{href:(G=e==null?void 0:e.first_item)==null?void 0:G.item_thumb,target:"_blank",children:(J=e.first_item)==null?void 0:J.item_thumb})]}),s("hr",{})]})})]})]})]}):s(h,{children:s(_,{children:s("h4",{className:"d-flex align-items-center justify-content-center",children:"No movable batches found."})})})]})})};export{Ce as default};
