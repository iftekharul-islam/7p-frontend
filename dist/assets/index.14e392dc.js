import{a as ne,r as p,bL as le,j as l,f as a,Q as c,V as m,X as u,Y as i,a0 as f,G as _,S as ie,bM as se,bN as ae,bO as q}from"./index.5183447c.js";/* empty css                  */import{a as te}from"./App.4b464e6f.js";/* empty css                                  */import{h as z}from"./moment.4d75c86c.js";import{S as g}from"./react-select.esm.cd027792.js";import"./emotion-memoize.esm.06f0e458.js";const _e=()=>{var x,C,y,N,S,k,P,M,O,B,A,w,D,j,F,R,T,W,L,E;const r=te(),n=ne(e=>e.moveBatches),[t,v]=p.exports.useState(!1),s=n==null?void 0:n.searchParams;p.exports.useEffect(()=>{r(le())},[]);const h=async e=>{v(!0),await r(se(e)),v(!1)},o=e=>{r(ae(e))},J=e=>{var d;r(q((d=e==null?void 0:e.target)==null?void 0:d.value))},Z=()=>{r(q("all"))},b=()=>{h({task:"next",batch_number:n==null?void 0:n.moveParams,route:null})},ee=()=>{h({task:"move",batch_number:n==null?void 0:n.moveParams,station:null})};return l("div",{className:"app-user-list",children:a(p.exports.Fragment,{children:[l(c,{className:"px-1",children:l(m,{children:a(u,{children:[l(i,{sm:"2"}),l(i,{sm:"3",children:l(f,{placeholder:"Find Batches (Comma Separated)",value:s==null?void 0:s.scan_batches,onChange:e=>{var d;o({scan_batches:(d=e==null?void 0:e.target)==null?void 0:d.value})},onBlur:()=>o({scan_batches:(s==null?void 0:s.scan_batches)+","}),onKeyDown:e=>{(e==null?void 0:e.key)==="Enter"&&o({scan_batches:(s==null?void 0:s.scan_batches)+","})}})}),l(i,{sm:"3",children:l(g,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stationOptions,placeholder:"View Batches in Station",value:(x=n==null?void 0:n.stationOptions)==null?void 0:x.find(e=>(e==null?void 0:e.value)==(s==null?void 0:s.station)),onChange:e=>o({station:e==null?void 0:e.value}),isClearable:!0})}),l(i,{sm:"2",className:"d-flex align-items-start flex-column",children:l(_,{color:"primary",onClick:()=>h({}),disabled:t,children:t?"Please Wait":"Search"})})]})})}),((C=n==null?void 0:n.data)==null?void 0:C.station)&&l(c,{children:l(m,{children:a("h4",{className:"card-title",children:[(N=(y=n==null?void 0:n.data)==null?void 0:y.station)==null?void 0:N.station_name," -"," ",(k=(S=n==null?void 0:n.data)==null?void 0:S.station)==null?void 0:k.station_description," -"," ",(M=(P=n==null?void 0:n.data)==null?void 0:P.batches)==null?void 0:M.length," Active Batch/es Found"]})})}),((B=(O=n==null?void 0:n.data)==null?void 0:O.batches)==null?void 0:B.length)>0?a("span",{children:[l(c,{children:l(m,{children:(((A=n==null?void 0:n.data)==null?void 0:A.route)&&((w=n==null?void 0:n.data)==null?void 0:w.route)!="all"||((j=(D=n==null?void 0:n.data)==null?void 0:D.batches)==null?void 0:j.length)==1)&&((R=(F=n==null?void 0:n.data)==null?void 0:F.stations_in_route)==null?void 0:R.length)>0?a(u,{children:[l(i,{sm:"3"}),l(i,{sm:"4",children:l(g,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.stations_in_routeOptions,placeholder:"Select Route (To move to other stations)",value:(T=n==null?void 0:n.stations_in_routeOptions)==null?void 0:T.find(e=>(e==null?void 0:e.value)==(s==null?void 0:s.route)),onChange:e=>o({station_change:e==null?void 0:e.value})})}),l(i,{sm:"2",className:"d-flex align-items-start flex-column",children:l(_,{color:"primary",onClick:ee,disabled:t,children:t?"Please Wait":"Move to Station"})})]}):a(u,{children:[l(i,{sm:"3"}),l(i,{sm:"4",children:l(g,{className:"react-select",classNamePrefix:"select",options:n==null?void 0:n.routes_in_stationOptions,placeholder:"Select Route (To move to other stations)",value:(W=n==null?void 0:n.routes_in_stationOptions)==null?void 0:W.find(e=>(e==null?void 0:e.value)==(s==null?void 0:s.route)),onChange:e=>o({route:e==null?void 0:e.value})})}),l(i,{sm:"2",className:"d-flex align-items-start flex-column",children:l(_,{color:"primary",onClick:()=>h({}),disabled:t,children:t?"Please Wait":"Filter"})})]})})}),a(c,{children:[l(ie,{children:l(_,{color:"primary",onClick:b,disabled:t,children:t?"Please Wait":"Move to Next Station"})}),a(m,{children:[a(u,{className:"mb-1",children:[l(i,{sm:"1",children:l(f,{type:"checkbox",checked:n==null?void 0:n.allChecked,onChange:Z})}),l(i,{sm:"1",children:n!=null&&n.allChecked?"UnCheck All":"Check All"}),l(i,{sm:"1",children:"Batch Date"}),l(i,{sm:"2",children:"Min. Order Date"}),l(i,{sm:"2",children:"Station"}),l(i,{sm:"1",children:"Next Station"}),l(i,{sm:"1",children:"Route"}),l(i,{sm:"1",children:"Line"}),l(i,{sm:"2",children:"Image"}),l("hr",{})]}),(E=(L=n==null?void 0:n.data)==null?void 0:L.batches)==null?void 0:E.map((e,d)=>{var I,U,V,$,G,H,K,Q,X,Y;return a(u,{children:[l(i,{sm:"1",children:l(f,{type:"checkbox",value:e==null?void 0:e.batch_number,checked:(I=n==null?void 0:n.moveParams)==null?void 0:I.includes(e==null?void 0:e.batch_number),onChange:J})}),a(i,{sm:"1",children:[l("a",{href:`/batch-list/${e==null?void 0:e.batch_number}`,children:e==null?void 0:e.batch_number}),l("br",{}),(e==null?void 0:e.status.charAt(0).toUpperCase())+(e==null?void 0:e.status.slice(1))]}),l(i,{sm:"1",children:z(e==null?void 0:e.creation_date).format("dd MMM yyyy")}),l(i,{sm:"2",children:z(e==null?void 0:e.min_order_date).format("dd MMM yyyy")}),a(i,{sm:"2",children:[(U=e==null?void 0:e.station)==null?void 0:U.station_name," -"," ",(V=e==null?void 0:e.station)==null?void 0:V.station_description]}),l(i,{sm:"1",children:($=n==null?void 0:n.data)==null?void 0:$.next_in_route[e==null?void 0:e.batch_route_id]}),l(i,{sm:"1",children:(G=e==null?void 0:e.route)==null?void 0:G.batch_code}),l(i,{sm:"1",children:((H=e==null?void 0:e.items_count)==null?void 0:H.length)>0&&((K=e==null?void 0:e.items_count[0])==null?void 0:K.count)}),a(i,{sm:"2",children:[l("img",{src:(Q=e==null?void 0:e.first_item)==null?void 0:Q.item_thumb,width:"70",height:"70"}),l("a",{href:(X=e==null?void 0:e.first_item)==null?void 0:X.item_thumb,target:"_blank",children:(Y=e.first_item)==null?void 0:Y.item_thumb})]}),l("hr",{})]})})]})]})]}):l(c,{children:l(m,{children:l("h4",{className:"d-flex align-items-center justify-content-center",children:"No movable batches found."})})})]})})};export{_e as default};
